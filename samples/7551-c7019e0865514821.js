try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d8a31b52-0c71-4f5c-9803-a82df128c774",e._sentryDebugIdIdentifier="sentry-dbid-d8a31b52-0c71-4f5c-9803-a82df128c774")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7551],{11481:(e,t,a)=>{"use strict";a.d(t,{eN:()=>u,ic:()=>x,u1:()=>m});var n=a(68208),s=a(92545),r=a(82735),l=a(44563),i=a(57982),o=a(35388);a(66107);let d="recaptcha-v2-container",c=(0,r.eU)("idle");function u(){let{resolvedTheme:e}=(0,i.D)(),t="dark"===e?"dark":"light",a=(0,l.Pj)();return{getRecaptchaV2Token:()=>new Promise((e,n)=>{!async function(){try{var s,r,l;if(!(null==(l=window)||null==(r=l.grecaptcha)||null==(s=r.enterprise)?void 0:s.render))throw Error("reCAPTCHA Enterprise not loaded");let i=new Promise(e=>{let t=a.get(c);if("container-mounted"===t)return void e();let n=a.sub(c,()=>{let t=a.get(c);"container-mounted"===t&&(n(),e())})});a.set(c,"container-mounting"),await i;let o=document.getElementById(d);if(null==o)throw Error("reCAPTCHA V2 container not found");let u=setTimeout(()=>{a.set(c,"idle"),n(Error("reCAPTCHA V2 token timed out"))},6e4);window.grecaptcha.enterprise.render(o,{sitekey:"6Ld7ePYrAAAAAB34ovoFoDau1fqCJ6IyOjFEQaMn",callback:t=>{clearTimeout(u),a.set(c,"idle"),e(t)},"error-callback":()=>{clearTimeout(u),a.set(c,"idle"),n(Error("reCAPTCHA V2 rendering failed"))},theme:t}),a.set(c,"challenging")}catch(e){a.set(c,"idle"),n(e)}}()})}}function m(){let[e]=(0,l.fp)(c);return(0,n.jsx)(s.r,{showDialog:"idle"!==e,isLoading:!1,widget:"idle"!==e?(0,n.jsx)(p,{}):null,widgetHeight:78,protectedByText:"Protected by reCAPTCHA","data-sentry-element":"SecurityVerificationModal","data-sentry-component":"RecaptchaV2Widget","data-sentry-source-file":"get-recaptcha-token.tsx"})}function p(){let e=(0,l.Xr)(c);return(0,o.useEffect)(()=>{e("container-mounted")},[e]),(0,n.jsx)("div",{className:"recaptcha-v2-container",id:d,"data-sentry-component":"RecaptchaV2Container","data-sentry-source-file":"get-recaptcha-token.tsx"})}async function x(e){return new Promise((t,a)=>{try{var n,s,r;if(!(null==(r=window)||null==(s=r.grecaptcha)||null==(n=s.enterprise)?void 0:n.ready))return void a(Error("reCAPTCHA Enterprise not loaded"));window.grecaptcha.enterprise.ready(()=>{(async()=>{try{var n,s;if(!(null==(s=window)||null==(n=s.grecaptcha)?void 0:n.enterprise))return void a(Error("reCAPTCHA Enterprise not loaded"));let r=await window.grecaptcha.enterprise.execute("6Led_uYrAAAAAKjxDIF58fgFtX3t8loNAK85bW9I",{action:e});if(null==r)return void a(Error("Failed to get recaptcha token"));t(r)}catch(e){a()}})()})}catch(e){a()}})}},15359:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SWITCHING_PROTOCOLS=t.SERVICE_UNAVAILABLE=t.SEE_OTHER=t.RESET_CONTENT=t.REQUESTED_RANGE_NOT_SATISFIABLE=t.REQUEST_URI_TOO_LONG=t.REQUEST_TOO_LONG=t.REQUEST_TIMEOUT=t.REQUEST_HEADER_FIELDS_TOO_LARGE=t.PROXY_AUTHENTICATION_REQUIRED=t.UPGRADE_REQUIRED=t.EARLY_HINTS=t.PROCESSING=t.PRECONDITION_REQUIRED=t.PRECONDITION_FAILED=t.PERMANENT_REDIRECT=t.PAYMENT_REQUIRED=t.PARTIAL_CONTENT=t.OK=t.NOT_MODIFIED=t.NOT_IMPLEMENTED=t.NOT_FOUND=t.NOT_ACCEPTABLE=t.NON_AUTHORITATIVE_INFORMATION=t.NO_CONTENT=t.NETWORK_AUTHENTICATION_REQUIRED=t.MULTIPLE_CHOICES=t.MULTI_STATUS=t.MOVED_TEMPORARILY=t.MOVED_PERMANENTLY=t.METHOD_NOT_ALLOWED=t.METHOD_FAILURE=t.LOCKED=t.LENGTH_REQUIRED=t.INTERNAL_SERVER_ERROR=t.INSUFFICIENT_STORAGE=t.INSUFFICIENT_SPACE_ON_RESOURCE=t.IM_A_TEAPOT=t.HTTP_VERSION_NOT_SUPPORTED=t.GONE=t.GATEWAY_TIMEOUT=t.FORBIDDEN=t.FAILED_DEPENDENCY=t.EXPECTATION_FAILED=t.CREATED=t.CONTINUE=t.CONFLICT=t.BAD_REQUEST=t.BAD_GATEWAY=t.ACCEPTED=void 0,t.MISDIRECTED_REQUEST=t.USE_PROXY=t.UNSUPPORTED_MEDIA_TYPE=t.UNPROCESSABLE_ENTITY=t.UNAVAILABLE_FOR_LEGAL_REASONS=t.UNAUTHORIZED=t.TOO_MANY_REQUESTS=t.TEMPORARY_REDIRECT=void 0,t.ACCEPTED=202,t.BAD_GATEWAY=502,t.BAD_REQUEST=400,t.CONFLICT=409,t.CONTINUE=100,t.CREATED=201,t.EXPECTATION_FAILED=417,t.FAILED_DEPENDENCY=424,t.FORBIDDEN=403,t.GATEWAY_TIMEOUT=504,t.GONE=410,t.HTTP_VERSION_NOT_SUPPORTED=505,t.IM_A_TEAPOT=418,t.INSUFFICIENT_SPACE_ON_RESOURCE=419,t.INSUFFICIENT_STORAGE=507,t.INTERNAL_SERVER_ERROR=500,t.LENGTH_REQUIRED=411,t.LOCKED=423,t.METHOD_FAILURE=420,t.METHOD_NOT_ALLOWED=405,t.MOVED_PERMANENTLY=301,t.MOVED_TEMPORARILY=302,t.MULTI_STATUS=207,t.MULTIPLE_CHOICES=300,t.NETWORK_AUTHENTICATION_REQUIRED=511,t.NO_CONTENT=204,t.NON_AUTHORITATIVE_INFORMATION=203,t.NOT_ACCEPTABLE=406,t.NOT_FOUND=404,t.NOT_IMPLEMENTED=501,t.NOT_MODIFIED=304,t.OK=200,t.PARTIAL_CONTENT=206,t.PAYMENT_REQUIRED=402,t.PERMANENT_REDIRECT=308,t.PRECONDITION_FAILED=412,t.PRECONDITION_REQUIRED=428,t.PROCESSING=102,t.EARLY_HINTS=103,t.UPGRADE_REQUIRED=426,t.PROXY_AUTHENTICATION_REQUIRED=407,t.REQUEST_HEADER_FIELDS_TOO_LARGE=431,t.REQUEST_TIMEOUT=408,t.REQUEST_TOO_LONG=413,t.REQUEST_URI_TOO_LONG=414,t.REQUESTED_RANGE_NOT_SATISFIABLE=416,t.RESET_CONTENT=205,t.SEE_OTHER=303,t.SERVICE_UNAVAILABLE=503,t.SWITCHING_PROTOCOLS=101,t.TEMPORARY_REDIRECT=307,t.TOO_MANY_REQUESTS=429,t.UNAUTHORIZED=401,t.UNAVAILABLE_FOR_LEGAL_REASONS=451,t.UNPROCESSABLE_ENTITY=422,t.UNSUPPORTED_MEDIA_TYPE=415,t.USE_PROXY=305,t.MISDIRECTED_REQUEST=421},21203:(e,t,a)=>{"use strict";a.d(t,{eV:()=>s,sQ:()=>r});let n={js:"JavaScript",javascript:"JavaScript",ts:"TypeScript",typescript:"TypeScript",jsx:"React",tsx:"React",py:"Python",python:"Python",java:"Java",c:"C",cpp:"C++",cs:"C#",php:"PHP",rb:"Ruby",ruby:"Ruby",go:"Go",rs:"Rust",rust:"Rust",kt:"Kotlin",kotlin:"Kotlin",swift:"Swift",m:"Objective-C",objc:"Objective-C",scala:"Scala",shell:"Shell",bash:"Bash",sh:"Shell",powershell:"PowerShell",ps1:"PowerShell",yaml:"YAML",yml:"YAML",json:"JSON",xml:"XML",html:"HTML",css:"CSS",scss:"SCSS",sass:"Sass",less:"Less",sql:"SQL",graphql:"GraphQL",md:"Markdown",markdown:"Markdown",tex:"LaTeX",latex:"LaTeX",r:"R",matlab:"MATLAB",perl:"Perl",lua:"Lua",vim:"Vim",diff:"Diff",dockerfile:"Dockerfile",docker:"Docker",makefile:"Makefile",make:"Makefile"};function s(e){var t;return null!=(t=n[e.toLowerCase()])?t:e}function r(e){var t;switch(null==(t=e.split(".").pop())?void 0:t.toLowerCase()){case"js":case"jsx":return"javascript";case"ts":case"tsx":return"typescript";case"py":return"python";case"json":return"json";case"css":case"scss":case"sass":return"css";case"html":return"html";case"md":return"markdown";case"yml":case"yaml":return"yaml";case"sql":return"sql";case"java":return"java";case"cpp":case"cc":case"cxx":return"cpp";case"c":return"c";case"go":return"go";case"rs":return"rust";case"php":return"php";case"rb":return"ruby";case"swift":return"swift";case"kt":return"kotlin";case"scala":return"scala";case"sh":case"bash":return"bash";case"ps1":return"powershell";case"xml":return"xml";case"graphql":case"gql":return"graphql";case"tex":return"latex";case"r":return"r";case"lua":return"lua";case"perl":case"pl":return"perl";case"vim":return"vim";case"dockerfile":return"dockerfile";case"makefile":case"make":return"makefile";default:return"text"}}},31256:(e,t,a)=>{"use strict";a.d(t,{w:()=>s});var n=a(89016);let s=(0,n.createServerReference)("6056373b3d5e0d18491c01686078a60d4b38f12678",n.callServer,void 0,n.findSourceMapURL,"getProxyImage")},34963:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SWITCHING_PROTOCOLS=t.SERVICE_UNAVAILABLE=t.SEE_OTHER=t.RESET_CONTENT=t.REQUESTED_RANGE_NOT_SATISFIABLE=t.REQUEST_URI_TOO_LONG=t.REQUEST_TOO_LONG=t.REQUEST_TIMEOUT=t.REQUEST_HEADER_FIELDS_TOO_LARGE=t.PROXY_AUTHENTICATION_REQUIRED=t.UPGRADE_REQUIRED=t.EARLY_HINTS=t.PROCESSING=t.PRECONDITION_REQUIRED=t.PRECONDITION_FAILED=t.PERMANENT_REDIRECT=t.PAYMENT_REQUIRED=t.PARTIAL_CONTENT=t.OK=t.NOT_MODIFIED=t.NOT_IMPLEMENTED=t.NOT_FOUND=t.NOT_ACCEPTABLE=t.NON_AUTHORITATIVE_INFORMATION=t.NO_CONTENT=t.NETWORK_AUTHENTICATION_REQUIRED=t.MULTIPLE_CHOICES=t.MULTI_STATUS=t.MOVED_TEMPORARILY=t.MOVED_PERMANENTLY=t.METHOD_NOT_ALLOWED=t.METHOD_FAILURE=t.LOCKED=t.LENGTH_REQUIRED=t.INTERNAL_SERVER_ERROR=t.INSUFFICIENT_STORAGE=t.INSUFFICIENT_SPACE_ON_RESOURCE=t.IM_A_TEAPOT=t.HTTP_VERSION_NOT_SUPPORTED=t.GONE=t.GATEWAY_TIMEOUT=t.FORBIDDEN=t.FAILED_DEPENDENCY=t.EXPECTATION_FAILED=t.CREATED=t.CONTINUE=t.CONFLICT=t.BAD_REQUEST=t.BAD_GATEWAY=t.ACCEPTED=void 0,t.DATABASE_ERROR=t.VALIDATION_ERROR=t.MISDIRECTED_REQUEST=t.USE_PROXY=t.UNSUPPORTED_MEDIA_TYPE=t.UNPROCESSABLE_ENTITY=t.UNAVAILABLE_FOR_LEGAL_REASONS=t.UNAUTHORIZED=t.TOO_MANY_REQUESTS=t.TEMPORARY_REDIRECT=void 0,t.ACCEPTED="Accepted",t.BAD_GATEWAY="Bad Gateway",t.BAD_REQUEST="Bad Request",t.CONFLICT="Conflict",t.CONTINUE="Continue",t.CREATED="Created",t.EXPECTATION_FAILED="Expectation Failed",t.FAILED_DEPENDENCY="Failed Dependency",t.FORBIDDEN="Forbidden",t.GATEWAY_TIMEOUT="Gateway Timeout",t.GONE="Gone",t.HTTP_VERSION_NOT_SUPPORTED="HTTP Version Not Supported",t.IM_A_TEAPOT="I'm a teapot",t.INSUFFICIENT_SPACE_ON_RESOURCE="Insufficient Space on Resource",t.INSUFFICIENT_STORAGE="Insufficient Storage",t.INTERNAL_SERVER_ERROR="Internal Server Error",t.LENGTH_REQUIRED="Length Required",t.LOCKED="Locked",t.METHOD_FAILURE="Method Failure",t.METHOD_NOT_ALLOWED="Method Not Allowed",t.MOVED_PERMANENTLY="Moved Permanently",t.MOVED_TEMPORARILY="Moved Temporarily",t.MULTI_STATUS="Multi-Status",t.MULTIPLE_CHOICES="Multiple Choices",t.NETWORK_AUTHENTICATION_REQUIRED="Network Authentication Required",t.NO_CONTENT="No Content",t.NON_AUTHORITATIVE_INFORMATION="Non Authoritative Information",t.NOT_ACCEPTABLE="Not Acceptable",t.NOT_FOUND="Not Found",t.NOT_IMPLEMENTED="Not Implemented",t.NOT_MODIFIED="Not Modified",t.OK="OK",t.PARTIAL_CONTENT="Partial Content",t.PAYMENT_REQUIRED="Payment Required",t.PERMANENT_REDIRECT="Permanent Redirect",t.PRECONDITION_FAILED="Precondition Failed",t.PRECONDITION_REQUIRED="Precondition Required",t.PROCESSING="Processing",t.EARLY_HINTS="Early Hints",t.UPGRADE_REQUIRED="Upgrade Required",t.PROXY_AUTHENTICATION_REQUIRED="Proxy Authentication Required",t.REQUEST_HEADER_FIELDS_TOO_LARGE="Request Header Fields Too Large",t.REQUEST_TIMEOUT="Request Timeout",t.REQUEST_TOO_LONG="Request Entity Too Large",t.REQUEST_URI_TOO_LONG="Request-URI Too Long",t.REQUESTED_RANGE_NOT_SATISFIABLE="Requested Range Not Satisfiable",t.RESET_CONTENT="Reset Content",t.SEE_OTHER="See Other",t.SERVICE_UNAVAILABLE="Service Unavailable",t.SWITCHING_PROTOCOLS="Switching Protocols",t.TEMPORARY_REDIRECT="Temporary Redirect",t.TOO_MANY_REQUESTS="Too Many Requests",t.UNAUTHORIZED="Unauthorized",t.UNAVAILABLE_FOR_LEGAL_REASONS="Unavailable For Legal Reasons",t.UNPROCESSABLE_ENTITY="Unprocessable Entity",t.UNSUPPORTED_MEDIA_TYPE="Unsupported Media Type",t.USE_PROXY="Use Proxy",t.MISDIRECTED_REQUEST="Misdirected Request",t.VALIDATION_ERROR="Validation error",t.DATABASE_ERROR="Database error"},38490:(e,t,a)=>{"use strict";a.d(t,{NG:()=>f,sd:()=>h,Hd:()=>v});var n=a(68208),s=a(91508),r=a(57982),l=a(35388),i=a(21203),o=a(71341),d=a(65003),c=a(95042),u=a(87214),m=a(56880),p=a(76518),x=a.n(p);function f(e){let{children:t,className:a,...s}=e;return(0,n.jsx)("div",{className:(0,o.cn)("not-prose my-0 flex w-full flex-col overflow-clip border","border-border text-text-primary rounded-lg",a),...s,"data-sentry-component":"CodeBlock","data-sentry-source-file":"code-block.tsx",children:t})}let h=(0,l.memo)(function(e){let{code:t,language:a="tsx",className:i,...d}=e,{highlightedHtml:c}=function(e){let{code:t,language:a}=e,[n,i]=(0,l.useState)(""),[o,d]=(0,l.useState)(!1),{resolvedTheme:c}=(0,r.D)();return(0,l.useEffect)(()=>{let e=!1;return async function(){if(!t)return i("");d(!0);try{let n=await (0,s.wY)(t,a,"dark"===c?"github-dark":"github-light");e||i(n)}catch(a){if(console.error("Error highlighting code:",a),!e){let e=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");i('<pre class="shiki-code-block"><code>'.concat(e,"</code></pre>"))}}finally{e||d(!1)}}(),()=>{e=!0}},[t,a,c]),{highlightedHtml:n,isHighlighting:o}}({code:t,language:a}),u=(0,o.cn)(x().container,i);return c?(0,n.jsx)("div",{className:u,dangerouslySetInnerHTML:{__html:c},...d}):(0,n.jsx)("div",{className:u,...d,children:(0,n.jsx)("pre",{className:"m-0 whitespace-pre-wrap rounded-none px-4 py-3 font-mono text-[#24292e] dark:text-[#e1e4e8]",children:(0,n.jsx)("code",{className:"text-[11px] leading-normal sm:text-[13px]",children:t})})})});function g(e){let{children:t,className:a,...s}=e;return(0,n.jsx)("div",{className:(0,o.cn)("border-border flex items-center justify-between border-b px-4 py-2",a),...s,"data-sentry-component":"CodeBlockGroup","data-sentry-source-file":"code-block.tsx",children:t})}function v(e){var t;let{inline:a,className:s,children:r,...l}=e,[,p]=(0,c.A)(),x=String(r).includes("\n"),v=null==s?void 0:s.includes("language-");if(!1!==a&&!x&&!v)return(0,n.jsx)("code",{className:(0,o.cn)("rounded px-1.5 py-0.5","bg-surface-tertiary","font-mono text-[0.9em]","text-text-primary font-medium",s),...l,children:r});let y=/language-(\w+)/.exec(null!=s?s:""),b=null!=(t=null==y?void 0:y[1])?t:"text",w=String(r).replace(/\n$/,"");return"math"===b?(0,n.jsx)("pre",{children:(0,n.jsx)("code",{className:s,...l,children:r})}):(0,n.jsxs)(f,{className:"not-prose relative","data-code-block":"true","data-sentry-element":"CodeBlock","data-sentry-component":"CodeBlockComposition","data-sentry-source-file":"code-block.tsx",children:[(0,n.jsxs)(g,{"data-sentry-element":"CodeBlockGroup","data-sentry-source-file":"code-block.tsx",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(d.A,{size:14,className:"text-text-secondary","data-sentry-element":"FileCode","data-sentry-source-file":"code-block.tsx"}),(0,n.jsx)("span",{className:"text-text-secondary text-sm font-medium",children:(0,i.eV)(b)})]}),(0,n.jsx)(u.G,{content:"Copy code","data-sentry-element":"BasicTooltip","data-sentry-source-file":"code-block.tsx",children:(0,n.jsx)(m.i,{variant:"textLink",size:16,onClick:()=>{p(w)},"data-sentry-element":"CopyButton","data-sentry-source-file":"code-block.tsx"})})]}),(0,n.jsx)(h,{code:w,language:b,"data-sentry-element":"CodeBlockCode","data-sentry-source-file":"code-block.tsx"})]})}},47423:(e,t,a)=>{"use strict";a.d(t,{Evaluation:()=>lL});var n,s,r,l,i,o,d,c,u,m,p,x,f,h,g,v,y=a(68208),b=a(6872),w=a(89016);let j=(0,w.createServerReference)("40a5cc0eaebe7dee92f81d89da89194c49ddeba631",w.callServer,void 0,w.findSourceMapURL,"updateTouConsent");var N=a(19906),E=a(41517),C=a(65397),T=a(5652),A=a(3760),_=a(72797),k=a(82735),I=a(44563),R=a(34805),S=a(72552),D=a(35388),M=a(31979);let L=(0,k.eU)(!1),O=(0,k.eU)(null);function P(){let[e,t]=(0,I.fp)(L),[a,n]=(0,I.fp)(O);return{isOpen:e,setOpen:t,promiseHandlers:a,setPromiseHandlers:n}}function z(){let{isOpen:e,setOpen:t,promiseHandlers:a,setPromiseHandlers:n}=P(),{setTouConsentTimestamp:s,userCreationPromise:r}=(0,_.kH)(e=>e),[l,i]=(0,D.useState)(!1),o=async()=>{try{await r;let e=await j();if(!e.success||null==e.data)throw Error("Failed to update terms-of-use");let{touConsentTimestamp:l}=e.data;null==a||a.resolve(),n(null),t(!1),s(l)}catch(e){A.z.capture({action:"terms_of_service_modal_accept_failed"}),M.oR.error("Failed to accept terms-of-use"),null==a||a.reject(),n(null)}finally{i(!1)}};return(0,y.jsx)(C.lG,{open:e,onOpenChange:e=>{e||(i(!1),null==a||a.reject(),n(null),t(!1))},"data-sentry-element":"Dialog","data-sentry-component":"TermsOfUseModal","data-sentry-source-file":"terms-of-use-modal.tsx",children:(0,y.jsxs)(C.Cf,{className:"border-border-faint w-[calc(100%-2rem)] max-w-[610px] rounded-lg p-4 sm:p-6","data-sentry-element":"DialogContent","data-sentry-source-file":"terms-of-use-modal.tsx",children:[(0,y.jsxs)(C.c7,{className:"flex flex-col gap-3 sm:gap-4","data-sentry-element":"DialogHeader","data-sentry-source-file":"terms-of-use-modal.tsx",children:[(0,y.jsxs)(C.L3,{className:"flex items-center gap-2 text-base sm:text-lg","data-sentry-element":"DialogTitle","data-sentry-source-file":"terms-of-use-modal.tsx",children:[(0,y.jsx)(T.E,{size:20,className:"sm:hidden","data-sentry-element":"ArenaColosseum","data-sentry-source-file":"terms-of-use-modal.tsx"}),(0,y.jsx)(T.E,{size:24,className:"hidden sm:block","data-sentry-element":"ArenaColosseum","data-sentry-source-file":"terms-of-use-modal.tsx"}),(0,y.jsx)("span",{className:"leading-tight",children:"Terms of Use & Privacy Policy"})]}),(0,y.jsxs)(C.rr,{className:"text-xs leading-relaxed sm:text-sm","data-sentry-element":"DialogDescription","data-sentry-source-file":"terms-of-use-modal.tsx",children:['By clicking "Agree", you agree to be bound by our'," ",(0,y.jsx)(N.Link,{href:"/terms-of-use",target:"_blank",className:"underline","data-sentry-element":"Link","data-sentry-source-file":"terms-of-use-modal.tsx",children:"Terms of Use"})," ","and acknowledge receipt and understanding of our"," ",(0,y.jsx)(N.Link,{href:"/privacy-policy",target:"_blank",className:"underline","data-sentry-element":"Link","data-sentry-source-file":"terms-of-use-modal.tsx",children:"Privacy Policy"}),'. Our Services must not be used for any illegal, harmful, violent, racist, sexual, or other offensive purposes, or to upload sensitive information. Due to the nature of artificial intelligence ("AI") technologies, the Services may make mistakes and provide responses that are inaccurate or inappropriate for your input. LMArena is not responsible for any such mistakes, inaccuracies, or inappropriate responses and you should verify the responses\' accuracy. This site is protected by reCAPTCHA and the Google'," ",(0,y.jsx)(N.Link,{href:"https://policies.google.com/privacy","data-sentry-element":"Link","data-sentry-source-file":"terms-of-use-modal.tsx",children:"Privacy Policy"})," and"," ",(0,y.jsx)(N.Link,{href:"https://policies.google.com/terms","data-sentry-element":"Link","data-sentry-source-file":"terms-of-use-modal.tsx",children:"Terms of Service"})," apply."]}),(0,y.jsx)("div",{children:(0,y.jsxs)(N.Link,{href:"/how-it-works",className:"text-primary inline-flex items-center gap-1 hover:underline",target:"_blank","data-sentry-element":"Link","data-sentry-source-file":"terms-of-use-modal.tsx",children:[(0,y.jsx)("span",{className:"text-xs sm:text-sm",children:"Learn more about How it Works"}),(0,y.jsx)(R.A,{size:12,className:"sm:hidden","data-sentry-element":"ArrowRight","data-sentry-source-file":"terms-of-use-modal.tsx"}),(0,y.jsx)(R.A,{size:14,className:"hidden sm:block","data-sentry-element":"ArrowRight","data-sentry-source-file":"terms-of-use-modal.tsx"})]})})]}),(0,y.jsxs)(C.Es,{className:"w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-end sm:gap-2","data-sentry-element":"DialogFooter","data-sentry-source-file":"terms-of-use-modal.tsx",children:[(0,y.jsx)(E.$,{disabled:l,onClick:()=>{i(!0),o()},type:"submit",className:"w-full sm:order-2 sm:w-auto","data-sentry-element":"Button","data-sentry-source-file":"terms-of-use-modal.tsx",children:"Agree"}),(0,y.jsxs)("div",{className:"order-1 hidden items-center justify-start gap-1 sm:flex",children:[(0,y.jsx)(S.A,{size:16,className:"text-text-secondary","data-sentry-element":"CornerDownRight","data-sentry-source-file":"terms-of-use-modal.tsx"}),(0,y.jsxs)("span",{className:"text-text-tertiary text-xs",children:["Or hit ",(0,y.jsx)("span",{className:"text-text-secondary font-medium",children:"Enter"})," on your keyboard to agree"]})]})]})]})})}var B=a(71341),U=a(71076),F=a(78114),H=a(58717),G=a(13471),V=a(8796),W=a(42205),Y=a(80584),Q=a(40974),J=a(20136),q=a(47307),$=a(50779),K=a(74181),X=a(36227),Z=a(8498),ee=a(7226),et=a(57470),ea=a(17427),en=a(2281),es=a(50987),er=a(86756),el=a(70641),ei=a(25452),eo=a(96727),ed=a(64474),ec=a(10506);function eu(){let e=(0,ec.A)(),[t,a]=(0,U.g)((0,H.k)(e=>[e.mode,e.setMode])),n=(0,F.useRouter)(),s=(0,F.usePathname)(),r=(0,D.useMemo)(()=>{switch(t){case b.lY.BATTLE:return(0,y.jsx)(em,{title:"Battle",Icon:ei.A});case b.lY.SIDE_BY_SIDE:return(0,y.jsx)(em,{title:"Side by Side",Icon:eo.A});case b.lY.DIRECT:return(0,y.jsx)(em,{title:"Direct Chat",Icon:ed.A});default:throw Error("Invalid mode")}},[t]),l=(0,D.useCallback)(s=>{if(!e()||s===t)return;a(s);let r=new URLSearchParams(window.location.search);s===b.lY.BATTLE?r.delete("mode"):r.set("mode",s),n.push("/?".concat(r.toString()))},[e,n,a,t,s]);return(0,y.jsxs)(el.l6,{value:t,onValueChange:l,"data-sentry-element":"Select","data-sentry-component":"SelectMode","data-sentry-source-file":"mode-selector.tsx",children:[(0,y.jsx)(el.bq,{className:"w-[280px] max-w-max border-none","data-sentry-element":"SelectTrigger","data-sentry-source-file":"mode-selector.tsx",children:(0,y.jsx)(el.yv,{"data-sentry-element":"SelectValue","data-sentry-source-file":"mode-selector.tsx",children:r})}),(0,y.jsx)(el.gC,{align:"start","data-sentry-element":"SelectContent","data-sentry-source-file":"mode-selector.tsx",children:(0,y.jsxs)(el.s3,{"data-sentry-element":"SelectGroup","data-sentry-source-file":"mode-selector.tsx",children:[(0,y.jsx)(ep,{value:b.lY.BATTLE,headerText:"Battle",descriptionText:"Battle with 2 anonymous models",Icon:ei.A,"data-sentry-element":"ModeSelectItem","data-sentry-source-file":"mode-selector.tsx"}),(0,y.jsx)(ep,{value:b.lY.SIDE_BY_SIDE,headerText:"Side by Side",descriptionText:"Compare 2 models of your choice",Icon:eo.A,"data-sentry-element":"ModeSelectItem","data-sentry-source-file":"mode-selector.tsx"}),(0,y.jsx)(ep,{value:b.lY.DIRECT,headerText:"Direct Chat",descriptionText:"Chat with one model at a time",Icon:ed.A,"data-sentry-element":"ModeSelectItem","data-sentry-source-file":"mode-selector.tsx"})]})})]})}function em(e){let{title:t,Icon:a}=e;return(0,y.jsxs)("div",{className:"flex items-center gap-1","data-sentry-component":"ModeSelectedItem","data-sentry-source-file":"mode-selector.tsx",children:[(0,y.jsx)(a,{className:"h-[18px] w-[18px]","data-sentry-element":"Icon","data-sentry-source-file":"mode-selector.tsx"}),(0,y.jsx)("p",{className:"font-heading text-base font-medium",children:t})]})}function ep(e){let{value:t,headerText:a,descriptionText:n,Icon:s}=e,r=(0,F.useRouter)(),l=(0,F.usePathname)();return(0,D.useEffect)(()=>{let e=new URLSearchParams(window.location.search);"battle"===t?e.delete("mode"):e.set("mode",t);let a=e.toString(),n=a.length>0?"".concat(l,"?").concat(a):l;r.prefetch(n)},[r,t,l]),(0,y.jsxs)(el.eb,{value:t,showCheck:!1,className:"data-[state=checked]:text-text-tertiary data-[state=checked]:hover:text-header-primary group relative pr-10","data-sentry-element":"SelectItem","data-sentry-component":"ModeSelectItem","data-sentry-source-file":"mode-selector.tsx",children:[(0,y.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,y.jsx)("p",{className:"font-heading text-base font-medium",children:a}),(0,y.jsx)("span",{className:"text-text-secondary text-xs font-normal",children:n})]}),(0,y.jsx)(s,{className:"absolute right-2 top-1/2 h-4 w-4 -translate-y-1/2","data-sentry-element":"Icon","data-sentry-source-file":"mode-selector.tsx"})]})}var ex=a(43666),ef=a(38050);function eh(e,t){if(!e)return!1;let a=t.find(t=>t.id===e);return!!a&&((0,ef.S1)(a)||(0,ef.j4)(a))}function eg(e,t,a,n,s){if(s===b.Jg.WEBDEV)return!1;switch(e){case b.lY.BATTLE:if(s===b.Jg.SEARCH)return!1;return!0;case b.lY.SIDE_BY_SIDE:return eh(t,n)&&eh(a,n);case b.lY.DIRECT:default:return eh(t,n)}}function ev(e,t){var a,n;if(!e)return!1;let s=t.find(t=>t.id===e);if(!s)return!1;let r=null==(n=s.capabilities)||null==(a=n.inputCapabilities)?void 0:a.image;return"object"==typeof r&&!0===r.requiresUpload}var ey=a(61713),eb=a(67325);let ew=D.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,y.jsx)(ey.uB,{ref:t,className:(0,B.cn)("bg-surface-primary border-border-faint text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md border",a),...n})});ew.displayName=ey.uB.displayName;let ej=D.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,y.jsxs)("div",{className:"border-border-faint flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,y.jsx)(eb.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,y.jsx)(ey.uB.Input,{ref:t,className:(0,B.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-base outline-none disabled:cursor-not-allowed disabled:opacity-50 sm:text-sm",a),...n})]})});ej.displayName=ey.uB.Input.displayName;let eN=e=>{let{className:t,...a}=e;return(0,y.jsx)(ey.uB.List,{className:(0,B.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...a,"data-sentry-element":"unknown","data-sentry-component":"CommandList","data-sentry-source-file":"command.tsx"})};eN.displayName=ey.uB.List.displayName;let eE=D.forwardRef((e,t)=>(0,y.jsx)(ey.uB.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));eE.displayName=ey.uB.Empty.displayName;let eC=D.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,y.jsx)(ey.uB.Group,{ref:t,className:(0,B.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",a),...n})});eC.displayName=ey.uB.Group.displayName,D.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,y.jsx)(ey.uB.Separator,{ref:t,className:(0,B.cn)("bg-border -mx-1 h-px",a),...n})}).displayName=ey.uB.Separator.displayName;let eT=D.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,y.jsx)(ey.uB.Item,{ref:t,className:(0,B.cn)("hover:bg-surface-secondary data-[selected=true]:bg-surface-secondary data-[selected=true]:text-text-primary relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a),...n})});eT.displayName=ey.uB.Item.displayName;var eA=a(95244),e_=a(97919),ek=a(90519),eI=a(71035),eR=a(25062);function eS(e){var t;let{models:a,onChange:n,selectedModelId:s}=e,[r,l]=(0,D.useState)(!1),[i,o]=(0,D.useState)(""),[d,c]=(0,D.useState)(!0),[u,m]=(0,D.useState)(null),p=(0,D.useCallback)(e=>{m(e)},[]),x=a.find(e=>e.id===s);return(0,D.useEffect)(()=>{if(!r||!u)return;let e=()=>{let{scrollTop:e,scrollHeight:t,clientHeight:a}=u;c(!(e+a>=t-20))};return u.addEventListener("scroll",e),setTimeout(()=>{let{scrollHeight:e,clientHeight:t}=u;c(e>t+5)},100),()=>u.removeEventListener("scroll",e)},[r,a,i,u]),(0,y.jsxs)(eA.AM,{open:r,onOpenChange:e=>{l(e),e||(o(""),c(!0))},"data-sentry-element":"Popover","data-sentry-component":"ModelDropdown","data-sentry-source-file":"model-dropdown.tsx",children:[(0,y.jsx)(eA.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger","data-sentry-source-file":"model-dropdown.tsx",children:(0,y.jsxs)(E.$,{variant:"outline",role:"combobox","aria-expanded":r,className:"min-w-0 max-w-full flex-1 flex-shrink basis-[200px] justify-between gap-0.5 px-2 md:h-auto md:border-0 md:px-4","data-sentry-element":"Button","data-sentry-source-file":"model-dropdown.tsx",children:[(0,y.jsx)("div",{className:"flex min-w-0 items-center gap-2",children:null==x?(0,y.jsx)("span",{className:"truncate",children:"Select model..."}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(eR.D,{className:"size-[18px] flex-none",organization:x.organization}),(0,y.jsx)("span",{className:"min-w-0 truncate",children:x.publicName})]})}),(0,y.jsx)(e_.A,{className:(0,B.cn)("size-[18px] flex-none transition-transform",{"-rotate-180":r}),"data-sentry-element":"ChevronDown","data-sentry-source-file":"model-dropdown.tsx"})]})}),(0,y.jsx)(eA.hl,{className:"w-[400px] rounded-md",align:"center",sideOffset:12,"data-sentry-element":"PopoverContent","data-sentry-source-file":"model-dropdown.tsx",children:(0,y.jsxs)(ew,{value:null!=(t=null==x?void 0:x.publicName)?t:void 0,"data-sentry-element":"Command","data-sentry-source-file":"model-dropdown.tsx",children:[(0,y.jsxs)("div",{className:"relative p-2",children:[(0,y.jsx)(ej,{placeholder:"Search models",className:"mb-0",value:i,onValueChange:o,"data-sentry-element":"CommandInput","data-sentry-source-file":"model-dropdown.tsx"}),i&&(0,y.jsx)("button",{onClick:()=>o(""),className:"hover:bg-surface-secondary absolute right-3 top-1/2 -translate-y-1/2 rounded-md p-1 transition-colors",type:"button",children:(0,y.jsx)(ek.A,{className:"text-text-tertiary size-3"})})]}),(0,y.jsxs)("div",{className:"relative",children:[(0,y.jsxs)(eN,{ref:p,className:"max-h-[350px] overflow-y-auto","data-sentry-element":"CommandList","data-sentry-source-file":"model-dropdown.tsx",children:[(0,y.jsx)(eE,{"data-sentry-element":"CommandEmpty","data-sentry-source-file":"model-dropdown.tsx",children:(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center px-4 py-8 text-center",children:[(0,y.jsx)("div",{className:"text-text-tertiary mb-3",children:(0,y.jsx)(eb.A,{className:"mr-2 size-6 shrink-0 opacity-50","data-sentry-element":"Search","data-sentry-source-file":"model-dropdown.tsx"})}),(0,y.jsx)("p",{className:"text-text-secondary mb-1 text-sm",children:"No models found"}),(0,y.jsx)("p",{className:"text-text-tertiary text-xs",children:"Try adjusting your search term"})]})}),(0,y.jsx)(eC,{"data-sentry-element":"CommandGroup","data-sentry-source-file":"model-dropdown.tsx",children:a.map(e=>{let t=s===e.id;return(0,y.jsxs)(eT,{value:e.publicName,onSelect:e=>{let t=a.find(t=>t.publicName===e);null!=t&&(null==n||n(t.id)),o(""),l(!1)},className:"flex items-center gap-2 px-3 py-2",children:[(0,y.jsx)(eR.D,{className:"size-4 flex-none",organization:e.organization}),(0,y.jsx)("span",{className:"flex-1 truncate text-sm",children:e.publicName}),(0,y.jsx)(eI.A,{className:(0,B.cn)("ml-auto h-4 w-4 flex-none",t?"opacity-100":"opacity-0")})]},e.id)})})]}),(0,y.jsx)("div",{className:(0,B.cn)("from-surface-primary pointer-events-none absolute bottom-0 left-0 right-0 h-10 bg-gradient-to-t to-transparent","transition-opacity duration-200 ease-in-out",d?"opacity-100":"opacity-0")})]})]})})]})}function eD(){let{modelAId:e,modelBId:t,setModelAId:a,setModelBId:n,models:s}=(0,ex.g)(e=>e),{mode:r,messages:l,modality:i}=(0,U.g)(e=>e),o=(0,D.useMemo)(()=>(function(e,t,a){let n=e.filter(e=>null!=e.organization).filter(e=>t===b.Jg.IMAGE?(0,ef.hK)(e):t===b.Jg.SEARCH?(0,ef.cK)(e):t===b.Jg.WEBDEV?(0,ef.JQ)(e):(0,ef.oN)(e));return a.some(e=>{var t;return null==(t=e.experimental_attachments)?void 0:t.some(e=>{var t;return null==(t=e.contentType)?void 0:t.startsWith("image/")})})&&t===b.Jg.CHAT?n.filter(e=>(0,ef.S1)(e)):n})(s,i,l),[s,l,i]);return r===b.lY.BATTLE?null:r===b.lY.DIRECT?(0,y.jsx)(eS,{selectedModelId:e,onChange:a,models:o}):r===b.lY.SIDE_BY_SIDE?(0,y.jsx)(eM,{modelAId:e,modelBId:t,setModelAId:a,setModelBId:n,models:o}):null}function eM(e){let{modelAId:t,modelBId:a,setModelAId:n,setModelBId:s,models:r}=e;return(0,y.jsxs)("div",{className:"flex min-w-0 flex-row items-center justify-center gap-1 sm:gap-2 md:gap-3","data-sentry-component":"SideBySideSelector","data-sentry-source-file":"model-selector.tsx",children:[(0,y.jsx)("div",{className:"mt-1 min-w-0 flex-1 leading-[normal] sm:max-w-[280px] sm:flex-initial md:max-w-[250px] lg:max-w-[300px]",children:(0,y.jsx)(eS,{selectedModelId:t,onChange:n,models:r.filter(e=>e.id!==a),"data-sentry-element":"ModelDropdown","data-sentry-source-file":"model-selector.tsx"})}),(0,y.jsx)("span",{className:"text-interactive-normal mx-1 flex-shrink-0 text-sm font-medium",children:"vs"}),(0,y.jsx)("div",{className:"mt-1 min-w-0 flex-1 leading-[normal] sm:max-w-[280px] sm:flex-initial md:max-w-[250px] lg:max-w-[300px]",children:(0,y.jsx)(eS,{selectedModelId:a,onChange:s,models:r.filter(e=>e.id!==t),"data-sentry-element":"ModelDropdown","data-sentry-source-file":"model-selector.tsx"})})]})}var eL=a(44259),eO=a(49190);let eP=[{href:"/how-it-works",label:"How it Works"},{href:"/about",label:"About Us"},{href:Q.Rj.jobBoard,label:"Join the Team"}];function ez(){let e=(0,F.useRouter)(),t=(0,U.g)(e=>e.id),a=(0,U.g)(e=>{var t;return(null==(t=e.messages)?void 0:t.length)>0}),n=(0,U.g)(e=>e.mode),s=(0,U.g)(e=>e.modality),r="".concat(Q.Rj.newSiteBugReport,"?prefill_evaluation_id=").concat(t),l=(0,D.useContext)(U.P),{mutate:i,isPending:o}=(0,q.d$)(),{buildChatModeQueryString:d}=(0,W.z)(),c=(0,D.useCallback)(()=>{l&&l.setState((0,K.Oe)());let t=d(n,s);e.push("/c/new".concat(t))},[e,l,n,s,d]);return(0,y.jsxs)(eO.rI,{"data-sentry-element":"DropdownMenu","data-sentry-component":"EvaluationHeaderMenu","data-sentry-source-file":"evaluation-header.tsx",children:[(0,y.jsx)(eO.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"evaluation-header.tsx",children:(0,y.jsx)(E.$,{variant:"ghost",type:"button",size:"icon","data-sentry-element":"Button","data-sentry-source-file":"evaluation-header.tsx",children:(0,y.jsx)(Z.A,{"data-sentry-element":"Ellipsis","data-sentry-source-file":"evaluation-header.tsx"})})}),(0,y.jsxs)(eO.SQ,{align:"end",sideOffset:0,className:"bg-surface-primary w-[220px]","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"evaluation-header.tsx",children:[a&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(eO._2,{onClick:c,className:"text-interactive-normal hover:bg-surface-secondary hover:text-interactive-active gap-2 rounded-[4px]",children:[(0,y.jsx)(ee.A,{className:"size-4"}),"New Chat"]}),(0,y.jsxs)(eO._2,{disabled:o,onClick:()=>i(t),className:"text-interactive-normal hover:bg-surface-secondary hover:text-interactive-active gap-2 rounded-[4px]",children:[(0,y.jsx)(et.A,{className:"size-4"}),"Delete Chat"]})]}),(0,y.jsx)(eO._2,{asChild:!0,"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"evaluation-header.tsx",children:(0,y.jsxs)(N.Link,{href:Q.Rj.newSiteSurvey,target:"_blank",rel:"noopener noreferrer",className:"text-interactive-normal hover:bg-surface-secondary hover:text-interactive-active gap-2 rounded-[4px]","data-sentry-element":"Link","data-sentry-source-file":"evaluation-header.tsx",children:[(0,y.jsx)(ea.A,{className:"size-4","data-sentry-element":"ClipboardEditIcon","data-sentry-source-file":"evaluation-header.tsx"}),"Send Feedback"]})}),(0,y.jsx)(eO._2,{asChild:!0,"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"evaluation-header.tsx",children:(0,y.jsxs)(N.Link,{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-interactive-normal hover:bg-surface-secondary hover:text-interactive-active gap-2 rounded-[4px]","data-sentry-element":"Link","data-sentry-source-file":"evaluation-header.tsx",children:[(0,y.jsx)(en.A,{className:"size-4","data-sentry-element":"Bug","data-sentry-source-file":"evaluation-header.tsx"}),"Report Bug"]})})]})]})}function eB(){var e,t;let{showLoginButton:a=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,J._P)("3m-model-selector"),s=(0,U.g)(e=>e.mode),r=(0,U.g)(e=>e.title),l=s===b.lY.BATTLE,{toggleSidebar:i}=(0,V.cL)(),o=(0,F.usePathname)(),d=o.startsWith("/c/")&&"/c"!==o,c=d?(0,X.W)(o):null,{data:u}=(0,G.useInfiniteQuery)({...(0,$.B)(),select:(t=null!=c?c:"",e=>{var a;return null==(a=e.pages.flatMap(e=>e.history).find(e=>e.id===t))?void 0:a.title}),enabled:!!c}),m=null!=(e=null!=u?u:r)?e:"New Chat",p="treatment"===n||"treatment-2"===n;return(0,y.jsxs)("div",{className:"bg-surface-primary border-border-faint flex-shrink-0 border-b","data-sentry-component":"EvaluationHeader","data-sentry-source-file":"evaluation-header.tsx",children:[(0,y.jsx)("div",{className:"flex flex-col items-center justify-between md:hidden",children:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:(0,B.cn)("flex min-h-0 w-full flex-none items-center justify-between px-2 py-2",{"py-1":l}),children:[(0,y.jsx)(E.$,{variant:"textLink",size:"icon",onClick:i,"data-sentry-element":"Button","data-sentry-source-file":"evaluation-header.tsx",children:(0,y.jsx)(es.A,{size:18,"data-sentry-element":"PanelRightClose","data-sentry-source-file":"evaluation-header.tsx"})}),p?(0,y.jsxs)(y.Fragment,{children:[d?(0,y.jsx)("span",{className:"text-header-primary font-heading max-w-[60%] truncate text-base font-medium",title:m,children:m}):(0,y.jsx)(N.Link,{href:"/",disableLinkColor:!0,children:(0,y.jsx)(Y.E,{className:"size-6"})}),(0,y.jsx)(ez,{})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(eu,{}),(0,y.jsx)(E.$,{variant:"textLink",size:"icon",asChild:!0,children:(0,y.jsx)(N.Link,{href:"/",disableLinkColor:!0,children:(0,y.jsx)(er.A,{size:18})})})]})]}),!p&&!l&&(0,y.jsx)("div",{className:"flex min-h-0 max-w-full flex-none items-center justify-between px-6 pb-2",children:(0,y.jsx)(eD,{})})]})}),(0,y.jsxs)("div",{className:"hidden h-12 items-center justify-between px-4 md:flex",children:[(0,y.jsx)("div",{className:"flex-2 flex min-w-0 items-center justify-start gap-3 lg:gap-4",children:p?(0,y.jsx)("div",{className:"flex items-center gap-6",children:d?(0,y.jsx)("span",{className:"text-header-primary font-heading max-w-[400px] truncate text-base font-medium lg:max-w-[500px] xl:max-w-[600px]",title:m,children:m}):eP.map(e=>(0,y.jsx)(N.Link,{href:e.href,disableLinkColor:!0,className:"text-interactive-active text-sm font-medium",target:"_blank",rel:"noopener noreferrer",children:e.label},e.href))}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(eu,{}),(0,y.jsx)(eD,{})]})}),(0,y.jsxs)("div",{className:"flex items-center gap-4",children:[a&&(0,y.jsx)(eU,{}),(0,y.jsx)(ez,{"data-sentry-element":"EvaluationHeaderMenu","data-sentry-source-file":"evaluation-header.tsx"})]})]})]})}function eU(){let e=(0,_.kH)(_.Q_),{setLocation:t}=(0,eL.G)();return e?(0,y.jsx)(E.$,{variant:"tertiary",onClick:()=>t("top-right"),children:"Login"}):(0,y.jsx)("div",{"data-sentry-component":"LoginArea","data-sentry-source-file":"evaluation-header.tsx"})}let eF=(0,k.eU)(!1),eH=(0,k.eU)(null);function eG(){let[e,t]=(0,I.fp)(eF),[a,n]=(0,I.fp)(eH);return{isOpen:e,setOpen:t,promiseHandlers:a,setPromiseHandlers:n}}let eV=(0,D.memo)(function(){let{isOpen:e,setOpen:t,promiseHandlers:a,setPromiseHandlers:n}=eG(),s=(0,F.useRouter)();return e?(0,y.jsx)(C.lG,{open:!0,onOpenChange:e=>{e||(null==a||a.resolve(!1),n(null),t(!1))},"data-sentry-element":"Dialog","data-sentry-component":"ChangeModalityModalComponent","data-sentry-source-file":"change-modality-modal.tsx",children:(0,y.jsxs)(C.Cf,{className:"w-[calc(100%-2rem)] max-w-lg rounded-lg p-4 sm:p-6","data-sentry-element":"DialogContent","data-sentry-source-file":"change-modality-modal.tsx",children:[(0,y.jsxs)(C.c7,{className:"flex flex-col gap-2","data-sentry-element":"DialogHeader","data-sentry-source-file":"change-modality-modal.tsx",children:[(0,y.jsx)(C.L3,{className:"text-base leading-tight sm:text-lg","data-sentry-element":"DialogTitle","data-sentry-source-file":"change-modality-modal.tsx",children:"Start new chat session?"}),(0,y.jsx)(C.rr,{className:"text-xs leading-relaxed sm:text-sm","data-sentry-element":"DialogDescription","data-sentry-source-file":"change-modality-modal.tsx",children:"Changing modalities will start a new chat session. Your current session will be saved in your chat history."})]}),(0,y.jsxs)(C.Es,{className:"w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-end sm:gap-2","data-sentry-element":"DialogFooter","data-sentry-source-file":"change-modality-modal.tsx",children:[(0,y.jsx)(E.$,{onClick:()=>void(null==a||a.resolve(!0),n(null),t(!1),s.push("/")),type:"submit",className:"w-full sm:order-2 sm:w-auto","data-sentry-element":"Button","data-sentry-source-file":"change-modality-modal.tsx",children:"Continue"}),(0,y.jsxs)("div",{className:"order-1 hidden items-center justify-start gap-1 sm:flex",children:[(0,y.jsx)(S.A,{size:16,className:"text-text-secondary","data-sentry-element":"CornerDownRight","data-sentry-source-file":"change-modality-modal.tsx"}),(0,y.jsxs)("span",{className:"text-text-tertiary text-xs",children:["Or hit ",(0,y.jsx)("span",{className:"text-text-secondary font-medium",children:"Enter"})," on your keyboard to continue"]})]})]})]})}):null}),eW="chat-area",eY="100px",eQ=new Date("2025-09-05T00:00:00.000Z");var eJ=a(94975);let eq=(0,a(19219).A)(e=>t=>{e.current.scrollTop=t}),e$=D.useLayoutEffect;var eK=a(15414);let eX=eK.z.enum(["text/html","text/javascript","text/css","text/markdown","application/json","text/plain"]),eZ=eK.z.object({path:eK.z.string(),content:eK.z.string(),contentType:eX}),e0=eK.z.object({kind:eK.z.literal("vanilla")}),e1=eK.z.discriminatedUnion("kind",[e0]),e2=eK.z.object({status:eK.z.literal("success")}),e4=eK.z.object({status:eK.z.literal("error"),message:eK.z.string()}),e3=eK.z.discriminatedUnion("status",[e2,e4]);eK.z.object({v:eK.z.literal(1),template:e1,files:eK.z.array(eZ),buildResult:e3});let e5=eK.z.object({type:eK.z.literal("webdev"),event:eK.z.discriminatedUnion("type",[eK.z.object({type:eK.z.literal("init"),files:eK.z.array(eZ),templateFiles:eK.z.array(eZ)}),eK.z.object({type:eK.z.literal("title"),title:eK.z.string()})])}),e6=eK.z.object({op:eK.z.literal("create_file"),file:eZ}),e8=eK.z.object({op:eK.z.literal("edit_file"),file:eZ,context_block:eK.z.string(),replacement_block:eK.z.string()}),e9=eK.z.object({op:eK.z.literal("read_file"),file:eZ}),e7=eK.z.discriminatedUnion("op",[e6,e8,e9]),te=eK.z.object({status:eK.z.literal("error"),path:eK.z.string(),message:eK.z.string()});var tt=a(97398);async function ta(e,t){let{onTextChunk:a,onImageChunk:n,onSourceChunk:s,onVideoChunk:r,onWebDevChunk:l,onReasoningChunk:i,onToolCallChunk:o,onToolResultChunk:d,onFinish:c,onError:u}=t,m=new TextDecoder("utf-8"),p="";for(;;){var x,f,h,g;let{done:t,value:v}=await e.read();if(t)break;let y=(p+=m.decode(v)).split("\n");for(let e=0;e<y.length-1;e++){let t=y[e];if(null==t)continue;let[m,p]=0===t.length?["",""]:[t.charAt(0),t.slice(1)];if(null==p?void 0:p.includes(b.qe)){u(m);continue}let{type:g,value:v}=(0,tt.D9)(p);if("error"===g||"finish_message"===g&&(null==v?void 0:v.finishReason)==="error"){u(m);continue}if("finish_message"===g){c(m);continue}if("tool_call_delta"===g&&"citation-source"===v.toolCallId)try{let e=JSON.parse(v.argsTextDelta).source;e&&s(m,e)}catch(e){}if("text"===g&&a(m,v),"reasoning"===g&&i&&i(m,v),"tool_call"===g&&o&&o(m,v),"tool_result"===g&&d&&d(m,v),"data"===g){if(v.length>0&&(null==(x=v[0])?void 0:x.type)==="image"){let e=v[0];e.data&&!e.image&&(e.image="data:".concat(e.mimeType||"image/png",";base64,").concat(e.data)),n(m,e)}if(v.length>0&&(null==(f=v[0])?void 0:f.type)==="video"&&r(m,v[0]),v.length>0&&(null==(h=v[0])?void 0:h.type)==="webdev"){let e=e5.safeParse(v[0]);e.success?l(m,e.data.event):console.error("Invalid webdev part",e.error)}}"file"===g&&v.mimeType.startsWith("image")&&n(m,{type:"image",mimeType:v.mimeType,image:"data:".concat(v.mimeType||"image/png",";base64,").concat(v.data)})}p=null!=(g=y[y.length-1])?g:""}}var tn=a(15359),ts=a(47470),tr=a(19938);function tl(){return{selectedMode:(0,k.eU)("a"),selectedView:(0,k.eU)("preview"),activeUserMessage:(0,k.eU)(null),selectedFilePath:(0,k.eU)(null),mobileDrawerOpen:(0,k.eU)(!1),iframeRefreshVersion:(0,k.eU)(0)}}let ti=(0,D.createContext)(tl());function to(e){let{children:t}=e,[a]=(0,D.useState)(()=>tl());return(0,y.jsx)(ti,{value:a,"data-sentry-element":"WebDevStateContext","data-sentry-component":"WebDevStateProvider","data-sentry-source-file":"state.tsx",children:t})}function td(){let e=(0,D.useContext)(ti);if(!e)throw Error("useWebDevAtoms must be used within a WebDevStateProvider");return e}function tc(){let e=(0,_.kH)(e=>{var t;return null==(t=e.user)?void 0:t.id}),[t,a]=(0,U.g)((0,H.k)(e=>[e.id,e.mode])),n=tm(),[s,r]=(0,I.fp)(td().selectedMode);return[s,(0,D.useCallback)((s,l,i)=>{r(r=>(i&&n(i),s!==r&&A.z.capture({action:"webdev_model_selected",params:{selected_model:s,previous_model:r,source:l,user_id:e,evaluation_id:t,mode:a}}),s))},[t,a,r,e,n])]}function tu(){let e=(0,_.kH)(e=>{var t;return null==(t=e.user)?void 0:t.id}),[t,a]=(0,U.g)((0,H.k)(e=>[e.id,e.mode])),[n,s]=(0,I.fp)(td().selectedView);return[n,(0,D.useCallback)((n,r)=>{s(s=>(n!==s&&A.z.capture({action:"webdev_view_selected",params:{selected_view:n,previous_view:s,source:r,user_id:e,evaluation_id:t,mode:a}}),n))},[t,a,s,e])]}function tm(){return(0,I.Xr)(td().activeUserMessage)}function tp(e){let t=(0,I.md)(td().activeUserMessage),a=(0,U.g)(e=>e.messages),n=(0,U.g)(e=>e.lastMessageIds),s=a.find(a=>a.participantPosition===e&&(t?a.parentMessageIds.includes(t):n.includes(a.id)));return null!=s?s:null}function tx(){return(0,I.fp)(td().selectedFilePath)}function tf(){return(0,I.fp)(td().mobileDrawerOpen)}function th(){return(0,I.fp)(td().iframeRefreshVersion)}var tg=a(24741),tv=a(15428),ty=a(71556),tb=a(74108);let tw=(0,w.createServerReference)("40dc48aec6f8f2930fca863a3d8646bc76d05b0be7",w.callServer,void 0,w.findSourceMapURL,"getWebDevMetadata"),tj=e=>(0,tb.j)({queryKey:["webdev","metadata",e],queryFn:async()=>{let t=await tw(e);if(!t.success)throw Error(t.error||"Failed to fetch webdev metadata");return t.data}});function tN(){let e=(0,ty.useQueryClient)();return async t=>{await e.invalidateQueries(tj(t))}}function tE(){let e=(0,ty.useQueryClient)();return(0,D.useCallback)(async(t,a,n)=>{e.setQueryData(tj(t).queryKey,{status:"pending",files:a,templateFiles:n})},[e])}function tC(){let e=(0,ty.useQueryClient)();return(0,D.useCallback)((t,a)=>{e.setQueryData(tj(t).queryKey,e=>{if(e)switch(a.op){case"create_file":return{status:"pending",files:[...e.files,a.file],templateFiles:null==e?void 0:e.templateFiles};case"edit_file":return{status:"pending",files:e.files.map(e=>e.path===a.file.path?a.file:e),templateFiles:e.templateFiles};default:return e}})},[e])}var tT=a(88661),tA=a.n(tT),t_=a(11481);function tk(){let e=(0,U.g)(e=>e),t=(0,D.useContext)(U.P),{modelAId:a,modelBId:n,updateModel:s}=(0,ex.g)(e=>e),{userCreationPromise:r,setImageModalityRateLimitedUntil:l,user:i}=(0,_.kH)(e=>e),{setLocation:o}=(0,eL.G)(),{addHistory:d,updateHistory:c,invalidateHistory:u}=(0,tv.m)(),{getRecaptchaV2Token:m}=(0,t_.eN)(),p=(0,J._P)("edit-image-button-enabled"),x=tE(),f=tC(),h=tN(),g=tm();return{appendMultiStream:async(v,y)=>{var w,j,N,E,C;let T,_,k,I,R=performance.now();if(null==t)throw Error("Evaluation session store is not available");let S=t.getState().mode,D=S===b.lY.BATTLE,M=S===b.lY.DIRECT,L=S===b.lY.SIDE_BY_SIDE,O=t.getState().messages[t.getState().messages.length-1],P=0===e.messages.length;null!=O&&[b.nH.FAILED,b.nH.FLAGGED].includes(O.status)&&e.deleteMessage(O.id);let z=(0,tr.Nd)(),B=null==t?void 0:t.getState().lastMessageIds,U={id:z,role:b.PG.USER,content:v.content,experimental_attachments:v.experimental_attachments,parentMessageIds:null!=B?B:[],participantPosition:tg.BQ.a,modelId:null,evaluationSessionId:e.id,status:b.nH.PENDING,failureReason:null};e.addMessages([U]),e.modality===b.Jg.WEBDEV&&g(U.id);let F=[],H=(0,tr.Nd)(),G={id:H,role:b.PG.ASSISTANT,content:"",reasoning:"",experimental_attachments:[],parentMessageIds:[U.id],participantPosition:tg.BQ.a,modelId:D?null:a,evaluationSessionId:e.id,status:b.nH.PENDING,failureReason:null},V=!1;F.push(G);let W=!1;M||(_={id:T=(0,tr.Nd)(),role:b.PG.ASSISTANT,content:"",reasoning:"",experimental_attachments:[],parentMessageIds:[U.id],participantPosition:tg.BQ.b,modelId:D?null:n,evaluationSessionId:e.id,status:b.nH.PENDING,failureReason:null},F.push(_)),e.addMessages(F),e.setHasViewedLatestResponses(!1),null!=r&&await r;let Y=[...y].reverse().flatMap(e=>[e.get("a"),e.get("b")]).filter(e=>null!=e).map(e=>{var t;return e.role===b.PG.USER?e:""===e.content&&null!=e.experimental_attachments&&(null==(t=e.experimental_attachments)?void 0:t.length)>0?{...e,content:e.experimental_attachments.map(e=>{var t,a,n,s,r,l,i;let o=URL.parse(e.url);if(null!=o&&"data:"!==o.protocol)return{type:"file",data:e.url,mimeType:null!=(a=e.contentType)?a:"image/png",filename:null!=(n=e.name)?n:e.url.split("/").pop()};let d=e.url.split(","),c=null!=(s=d[0])?s:"";return{type:"file",data:null!=(r=d[1])?r:"",mimeType:null!=(i=null!=(l=null==(t=c.match(/data:(.*?);base64/))?void 0:t[1])?l:e.contentType)?i:"image/png",filename:e.name}})}:e}),Q=v.metadata?{...U,metadata:v.metadata}:U;Y.push(...[Q,G,_].filter(e=>null!=e));let J=null;try{J=await (0,t_.ic)("chat_submit")}catch(e){}let q={id:e.id,mode:S,modelAId:D?void 0:null!=a?a:void 0,modelBId:L&&null!=n?n:void 0,userMessageId:z,modelAMessageId:H,modelBMessageId:T,messages:Y,modality:e.modality,recaptchaV3Token:J,...e.modality===b.Jg.IMAGE&&p?{featureFlags:{editImageButtonEnabled:p}}:{}},$=0===e.messages.length||1===e.messages.length&&e.messages[0]&&[b.nH.FAILED].includes(e.messages[0].status);try{if($){let s=e.modality===b.Jg.WEBDEV?"New Chat":tS(U).substring(0,100);d({id:e.id,createdAt:e.createdAt,updatedAt:e.updatedAt,mode:S,modality:e.modality,modelAId:a,modelBId:n,title:s}),null==t||t.setState(e=>({...e,title:s})),k=e=>fetch("/nextjs-api/stream/create-evaluation",{method:"POST",body:JSON.stringify({...q,...e?{recaptchaV2Token:e,recaptchaV3Token:void 0}:{}})})}else k=t=>fetch("/nextjs-api/stream/post-to-evaluation/".concat(e.id),{method:"POST",body:JSON.stringify({...q,...t?{recaptchaV2Token:t,recaptchaV3Token:void 0}:{}})});if(!(I=await k()).ok){let{error:e}=await tO(I);if(e===ts.EV){let e=await m();if(!(I=await k(e)).ok){let{error:e}=await tO(I);e===ts.EV&&(null==i?void 0:i.emailProvider)==null&&o("low-recaptcha-score-modal")}}}}catch(e){console.error("Error creating evaluation session:",e),I=void 0}if($&&u(),null==I||!I.ok){if(e.deleteMessage(H),null!=T&&e.deleteMessage(T),(null==I?void 0:I.status)===tn.TOO_MANY_REQUESTS){let e=tM(I.headers);if(null!=e)o("image-modality-rate-limit-modal"),l(e);else{let e=await (null==I?void 0:I.clone().json()),t=null==e?void 0:e.modelId,a=function(e){var t,a;let n=null==(a=e.get("ratelimit"))||null==(t=a.split(",").find(e=>"remaining"===e.trim().split("=")[0]))?void 0:t.split("=")[1];if(null==n)return null;let s=Number(n);return Number.isNaN(s)?null:1e3*s}(I.headers);null!=t&&null!=a&&s({id:t,rateLimitedUntil:new Date(new Date().getTime()+a).toISOString()})}}e.updateMessage({id:U.id,status:(null==I?void 0:I.status)===tn.UNPROCESSABLE_ENTITY?b.nH.FLAGGED:b.nH.FAILED});return}A.z.capture({action:"chat_submit_success",params:{is_first_message:P,mode:e.mode,user_id:e.userId,modality:e.modality,evaluation_session_id:e.id,model_a_id:a,model_b_id:n,has_attachments:(null!=(E=null==v||null==(w=v.experimental_attachments)?void 0:w.length)?E:0)>0,attachments_count:null!=(C=null==v||null==(j=v.experimental_attachments)?void 0:j.length)?C:0,input_length:v.content.length}});let K=null==(N=I.body)?void 0:N.getReader();if(!K)return;let X=!1,Z=!1;return ta(K,{onTextChunk:(t,a)=>{let n=F[0],s=F[1];if("a"===t&&null!=n&&!X||"b"===t&&null!=s&&!Z){var r,l;"a"===t?X=!0:Z=!0;let a=Number((performance.now()-R).toFixed(0));A.z.capture({action:"first_content_token_received",params:{time_to_first_content_token_ms:a,model_id:t===tg.BQ.a?null!=(r=null==n?void 0:n.modelId)?r:null:null!=(l=null==s?void 0:s.modelId)?l:null,modality:e.modality,evaluation_session_id:e.id,message_id:"b"===t&&null!=T?T:H}})}let i=t=>{if(e.modality===b.Jg.WEBDEV){if("string"==typeof t.content){let e=t.content;t.content=e?[{type:"text",text:e}]:[]}if(Array.isArray(t.content)){let e=t.content[t.content.length-1];e&&"text"===e.type?e.text+=a:t.content.push({type:"text",text:a})}}else t.content+=a};t===tg.BQ.a&&null!=n?(i(n),e.updateMessage({id:n.id,content:n.content,reasoning:n.reasoning})):t===tg.BQ.b&&null!=s&&(i(s),e.updateMessage({id:s.id,content:s.content,reasoning:s.reasoning}))},onReasoningChunk:(t,a)=>{let n=F[0],s=F[1];t===tg.BQ.a&&null!=n?(null!=n.reasoning||(n.reasoning=""),n.reasoning+=a,e.updateMessage({id:n.id,reasoning:n.reasoning,content:n.content})):t===tg.BQ.b&&null!=s&&(null!=s.reasoning||(s.reasoning=""),s.reasoning+=a,e.updateMessage({id:s.id,reasoning:s.reasoning,content:s.content}))},onSourceChunk:(t,a)=>{var n,s;let r=F[0],l=F[1];if(t===tg.BQ.a&&null!=r){let t=Array.isArray(a)?a:tD(null!=(n=r.sources)?n:[],a);r.sources=t,e.updateMessage({id:r.id,sources:t})}else if(t===tg.BQ.b&&null!=l){let t=Array.isArray(a)?a:tD(null!=(s=l.sources)?s:[],a);l.sources=t,e.updateMessage({id:l.id,sources:t})}},onImageChunk:(t,a)=>{var n,s,r,l;let i=F[0],o=F[1];t===tg.BQ.a&&null!=i?(null==(n=i.experimental_attachments)||n.push({url:a.image,contentType:null!=(s=a.mimeType)?s:"image/png"}),e.updateMessage({id:i.id,experimental_attachments:i.experimental_attachments})):t===tg.BQ.b&&null!=o&&(null==(r=o.experimental_attachments)||r.push({url:a.image,contentType:null!=(l=a.mimeType)?l:"image/png"}),e.updateMessage({id:o.id,experimental_attachments:o.experimental_attachments}))},onVideoChunk:()=>{},onWebDevChunk:(a,n)=>{let s=tI(a,F);if(s)switch(n.type){case"init":x(s.id,n.files,n.templateFiles);break;case"title":null==t||t.setState(e=>({...e,title:n.title})),c({id:e.id,title:n.title})}},onToolCallChunk:(t,a)=>{let n=tI(t,F);if(!n)return;n.content=tR(n.content);let s=n.content.findIndex(e=>"tool-call"===e.type&&e.toolCallId===a.toolCallId);-1!==s?n.content[s]={...a,type:"tool-call"}:n.content.push({...a,type:"tool-call"}),e.updateMessage({id:n.id,content:n.content})},onToolResultChunk:(t,a)=>{let n=tI(t,F);if(!n)return;let s=e7.safeParse(a.result);s.success&&f(n.id,s.data),n.content=tR(n.content);let r=n.content.find(e=>"tool-call"===e.type&&e.toolCallId===a.toolCallId);r&&n.content.push({...a,type:"tool-result",toolName:r.toolName}),e.updateMessage({id:n.id,content:n.content})},onFinish:t=>{var a,n,s,r;let l=t===tg.BQ.a?H:T,i=e.messages.find(e=>e.id===l);t===tg.BQ.a?V=!0:W=!0;let o=e.mode===b.lY.DIRECT||(t===tg.BQ.b?V:W);e.updateMessage({id:l,status:b.nH.SUCCESS}),A.z.capture({action:"chat_response_success",params:{response_type:"submit",mode:e.mode,user_id:e.userId,modality:e.modality,evaluation_session_id:e.id,model_id:null==i?void 0:i.modelId,has_attachments:(null!=(r=null==i||null==(a=i.experimental_attachments)?void 0:a.length)?r:0)>0,attachments_count:null==i||null==(n=i.experimental_attachments)?void 0:n.length,response_length:null==i||null==(s=i.content)?void 0:s.length}}),o&&A.z.capture({action:"chat_responses_success",params:{response_type:"submit",mode:e.mode,user_id:e.userId,modality:e.modality}}),e.modality===b.Jg.WEBDEV&&l&&h(l)},onError:t=>{e.updateMessage({id:t===tg.BQ.a?H:T,status:b.nH.FAILED})}})}}}function tI(e,t){let[a,n]=t;return e===tg.BQ.a&&null!=a?a:e===tg.BQ.b&&null!=n?n:null}function tR(e){return"string"==typeof e?e.length>0?[{type:"text",text:e}]:[]:e}let tS=tA()(e=>Array.isArray(e.content)?e.content.filter(e=>"text"===e.type).map(e=>e.text||"").join(""):e.content);function tD(e,t){var a,n;let s=e.findIndex(e=>e.id===t.id);if(-1===s)return[...e,t];let r=e[s];if(!r)return[...e,t];let l={...r,...t,charLocation:[...null!=(a=r.charLocation)?a:[],...null!=(n=t.charLocation)?n:[]].filter((e,t,a)=>a.indexOf(e)===t).sort((e,t)=>e-t)};return[...e.slice(0,s),l,...e.slice(s+1)]}function tM(e){let t=e.get("Ratelimit-Modality");if(null!=t&&t===b.Jg.IMAGE){let t=Number(e.get("ratelimit-remaining"));if(null!=t&&!Number.isNaN(t))return new Date(new Date().getTime()+1e3*t)}return null}let tL=eK.z.object({error:eK.z.string()});async function tO(e){try{let t=await e.clone().json();return tL.parse(t)}catch(e){return{error:null}}}function tP(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Assistant";if("user"===e.role)return"User";if("assistant"===e.role){let n=t.find(t=>t.id===e.modelId);return null==n?"".concat(a," ").concat(e.participantPosition.toUpperCase()):n.publicName}return e.role}function tz(){let e=Math.floor(5*Math.random())+2;return Array.from({length:e},(t,a)=>({id:a,className:"h-8 ".concat(a==e-1?"w-1/2":"w-full")}))}function tB(e){return(0,D.useMemo)(()=>{var t;return t=e,[b.nH.FAILED,b.nH.FLAGGED].includes(t.status)},[e])}function tU(e){var t;let a=tB(e),n=(0,D.useMemo)(()=>{var t,a,n;return""!==(t=e).content||(null!=(n=null==(a=t.experimental_attachments)?void 0:a.length)?n:0)>0},[e]),s=(0,D.useMemo)(()=>tS(e),[e]),r=null!=(t=e.reasoning)?t:"";return(0,D.useMemo)(()=>({hasError:a,hasContent:n,contentString:s,reasoningText:r,shouldShowErrorOnly:a&&!n}),[a,n,s,r])}function tF(){let e=(0,U.g)(e=>e.lastMessageIds),t=(0,U.g)(e=>e.messages),a=(0,D.useMemo)(()=>{let a=[];if(0===e.length)return a;let n=new Map;return e.forEach(e=>{let a=t.find(t=>t.id===e);if(null==a)throw Error("Message not found");n.set(a.participantPosition,a)}),a.push(n),!function e(t,a,n){let s=new Set;a.forEach(e=>{e.parentMessageIds.forEach(e=>{s.add(e)})});let r=new Map;return(t.forEach(e=>{s.has(e.id)&&r.set(e.participantPosition,e)}),0===r.size)?null:(n.push(r),e(t,r,n))}(t,n,a),a},[e,t]),n=(0,D.useMemo)(()=>{var e,t;return Array.from(null!=(t=null==a||null==(e=a[0])?void 0:e.values())?t:[])},[a]);return(0,D.useMemo)(()=>({messageThreads:a,latestMessages:n}),[a,n])}var tH=a(33709),tG=a(25321);let tV=(0,D.memo)(function(e){let{children:t,as:a="p",className:n,duration:s=2,spread:r=2}=e,l=tG.P.create(a),i=(0,D.useMemo)(()=>t.length*r,[t,r]);return(0,y.jsx)(l,{className:(0,B.cn)("relative inline-block bg-[length:250%_100%,auto] bg-clip-text","text-transparent [--base-color:#a1a1aa] [--base-gradient-color:#000]","[--bg:linear-gradient(90deg,#0000_calc(50%-var(--spread)),var(--base-gradient-color),#0000_calc(50%+var(--spread)))] [background-repeat:no-repeat,padding-box]","dark:[--base-color:#71717a] dark:[--base-gradient-color:#ffffff] dark:[--bg:linear-gradient(90deg,#0000_calc(50%-var(--spread)),var(--base-gradient-color),#0000_calc(50%+var(--spread)))]",n),initial:{backgroundPosition:"100% center"},animate:{backgroundPosition:"0% center"},transition:{repeat:1/0,duration:s,ease:"linear"},style:{"--spread":"".concat(i,"px"),backgroundImage:"var(--bg), linear-gradient(var(--base-color), var(--base-color))"},"data-sentry-element":"MotionComponent","data-sentry-component":"TextShimmerComponent","data-sentry-source-file":"text-shimmer.tsx",children:t})}),tW=(0,D.createContext)(null);function tY(e){let{children:t,messageLayoutMode:a}=e,n=(0,D.useMemo)(()=>({messageLayoutMode:a}),[a]);return(0,y.jsx)(tW.Provider,{value:n,"data-sentry-element":"unknown","data-sentry-component":"MessageContextProvider","data-sentry-source-file":"message-context.tsx",children:t})}function tQ(){let e=(0,D.useContext)(tW);if(!e)throw Error("The MessageContext was not set. If using message components outside of <AssistantMessage /> please use <MessageContextProvider /> ");return e}function tJ(e){let{imageUrl:t,imageName:a,onClose:n}=e;return(0,D.useEffect)(()=>{let e=e=>{"Escape"===e.key&&n()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]),(0,y.jsx)(C.lG,{open:!0,onOpenChange:e=>!e&&n(),"data-sentry-element":"Dialog","data-sentry-component":"ImageLightbox","data-sentry-source-file":"image-lightbox.tsx",children:(0,y.jsxs)(C.Cf,{"aria-describedby":void 0,showCloseButton:!1,className:"max-h-[90vh] max-w-fit border-none bg-transparent p-0 shadow-none",onClick:n,"data-sentry-element":"DialogContent","data-sentry-source-file":"image-lightbox.tsx",children:[(0,y.jsx)(C.L3,{className:"sr-only","data-sentry-element":"DialogTitle","data-sentry-source-file":"image-lightbox.tsx",children:"Image Lightbox"}),(0,y.jsx)("button",{onClick:n,className:"absolute right-4 top-4 z-10 flex h-8 w-8 items-center justify-center rounded-full bg-black/50 p-2 text-white hover:bg-black/70 md:hidden","aria-label":"Close image",children:(0,y.jsx)(ek.A,{className:"h-4 w-4","data-sentry-element":"X","data-sentry-source-file":"image-lightbox.tsx"})}),(0,y.jsx)("div",{className:"relative",children:(0,y.jsx)("img",{src:t,alt:a,className:"h-auto max-h-[90vh] w-auto max-w-[90vw] rounded-lg object-contain shadow-lg",onClick:e=>e.stopPropagation()})})]})})}var tq=a(31256);function t$(e,t){try{let a=new URL(e);return a.searchParams.set("retry",t.toString()),a.toString()}catch(t){return e}}async function tK(e,t,a,n){if(t>3)return void n();if(!function(e){try{return new URL(e).hostname.endsWith("cloudflarestorage.com")}catch(t){return e.endsWith("cloudflarestorage.com")}}(e))return void a(t$(e,t));try{let t=await (0,tq.w)(e);if(t.success)a(t.data);else throw Error("Failed to fetch image through proxy")}catch(s){console.error("Retry failed for Cloudflare image:",s,"Attempt:",t),t>=3?n():a(t$(e,t))}}var tX=a(31858),tZ=a(36566);function t0(e){let{src:t,alt:a,className:n,fallback:s,onLoad:r,onError:l,onRetry:i,showLoadingState:o=!0,...d}=e,[c,u]=(0,D.useState)("loading"),m=(0,D.useRef)(0),p=(0,D.useRef)(null);(0,D.useEffect)(()=>{t&&(u("loading"),m.current=0)},[t]),(0,D.useEffect)(()=>{let e=p.current;e&&e.complete&&e.naturalWidth>0&&u("loaded")},[t]);let x=(0,D.useCallback)(e=>{u("loaded"),m.current=0,null==r||r(e)},[r]),f=(0,D.useCallback)(e=>{u("error"),m.current+=1,null==i||i(m.current),null==l||l(e)},[l,i]);return"error"===c&&s?(0,y.jsx)(y.Fragment,{children:s}):"error"!==c||s?(0,y.jsxs)("div",{className:"relative","data-sentry-component":"DynamicImage","data-sentry-source-file":"dynamic-image.tsx",children:["loading"===c&&o&&(0,y.jsx)(t1,{}),(0,y.jsx)("img",{ref:p,src:t,alt:a,className:(0,B.cn)("transition-opacity duration-500","loading"===c&&o?"opacity-0":"opacity-100",n),onLoad:x,onError:f,...d})]}):(0,y.jsx)(t2,{className:n})}function t1(){return(0,y.jsx)("div",{className:"bg-surface-secondary absolute inset-0 flex items-center justify-center overflow-hidden rounded-md","data-sentry-component":"LoadingState","data-sentry-source-file":"dynamic-image.tsx",children:(0,y.jsx)(tX.A,{className:"text-text-primary size-4 animate-spin","data-sentry-element":"Loader","data-sentry-source-file":"dynamic-image.tsx"})})}function t2(e){let{className:t}=e;return(0,y.jsx)("div",{className:(0,B.cn)("bg-surface-secondary flex flex-col items-center justify-center overflow-hidden rounded-lg",t),"data-sentry-component":"ErrorState","data-sentry-source-file":"dynamic-image.tsx",children:(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 p-3",children:[(0,y.jsx)(tZ.A,{size:24,className:"text-interactive-negative","data-sentry-element":"AlertTriangle","data-sentry-source-file":"dynamic-image.tsx"}),(0,y.jsxs)("div",{className:"text-center",children:[(0,y.jsx)("div",{className:"text-text-primary text-sm font-medium",children:"Image unavailable"}),(0,y.jsx)("div",{className:"text-text-secondary mt-1 text-xs",children:"Failed to load"})]})]})})}function t4(e){var t,a,n,s;let{attachment:r,role:l,onOpenLightbox:i}=e,[o,d]=(0,D.useState)(r.url),c=(0,eJ.d)("md"),u="treatment-1"===(0,J._P)("webapp_chat_battle_side_by_side_mobile_carousel"),m=c&&u,p=(0,D.useRef)(0),x=(0,D.useCallback)(()=>{p.current+=1,tK(r.url,p.current,e=>d(e),()=>{})},[r.url]);return(null==r?void 0:r.contentType)&&(null==(t=r.contentType)?void 0:t.length)>0&&!(null==(a=r.contentType)?void 0:a.startsWith("image"))?(0,y.jsx)(N.Link,{href:r.url,className:"break-all",children:r.name}):l===b.PG.USER?(0,y.jsx)("div",{className:"w-fit",children:(0,y.jsx)(t0,{src:o,alt:null!=(n=r.name)?n:"",className:"aspect-square w-32 cursor-pointer overflow-hidden rounded-lg object-cover object-center opacity-100 transition-opacity duration-300",onClick:i,onError:x,onRetry:e=>{p.current=e},showLoadingState:!0})}):(0,y.jsx)("div",{className:m?"h-[50vh] flex justify-center items-center":"w-fit","data-sentry-component":"MessageAttachment","data-sentry-source-file":"message-attachment.tsx",children:(0,y.jsx)(t0,{src:o,alt:null!=(s=r.name)?s:"",className:m?"max-h-[50vh] cursor-pointer overflow-hidden rounded-lg opacity-100 transition-opacity duration-300":"aspect-square h-[50vh] w-[50vh] max-w-full cursor-pointer overflow-hidden rounded-lg object-cover object-center opacity-100 transition-opacity duration-300",loading:"lazy",onClick:i,onError:x,onRetry:e=>{p.current=e},showLoadingState:!0,"data-sentry-element":"DynamicImage","data-sentry-source-file":"message-attachment.tsx"})})}function t3(e){let{isActive:t,className:a,interval:n=100}=e,[s,r]=(0,D.useState)(0),l=(0,D.useRef)(null);return(0,D.useEffect)(()=>{if(!t){r(0),l.current=null;return}l.current=Date.now();let e=setInterval(()=>{l.current&&r(Date.now()-l.current)},n);return()=>clearInterval(e)},[t,n]),(0,y.jsxs)("span",{className:"text-base font-normal ".concat(a||""),"data-sentry-component":"LoadingTimer","data-sentry-source-file":"loading-timer.tsx",children:[(s/1e3).toFixed(1),"s"]})}function t5(e){let{className:t}=e;return(0,y.jsx)("div",{className:(0,B.cn)("bg-surface-skeleton/60 relative flex aspect-square max-h-full max-w-full animate-pulse items-center justify-center overflow-hidden rounded-lg object-cover object-center",t),"data-sentry-component":"PendingImageAttachment","data-sentry-source-file":"pending-image-attachment.tsx",children:(0,y.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,y.jsx)(tX.A,{className:"text-text-primary size-4 animate-spin","data-sentry-element":"Loader","data-sentry-source-file":"pending-image-attachment.tsx"}),(0,y.jsx)(t3,{isActive:!0,className:"text-text-primary","data-sentry-element":"LoadingTimer","data-sentry-source-file":"pending-image-attachment.tsx"})]})})}function t6(e){let{message:t}=e,{messageLayoutMode:a}=tQ(),{experimental_attachments:n=[],role:s,status:r}=t,l=(0,U.g)(e=>e.modality),[i,o]=(0,D.useState)(null);if(s===b.PG.ASSISTANT&&(null==n?void 0:n.length)===0&&l===b.Jg.IMAGE&&r===b.nH.PENDING)return(0,y.jsx)("div",{className:(0,B.cn)("flex w-full flex-row items-center","page"===a?"justify-start":"justify-center"),children:(0,y.jsx)(t5,{className:"h-[50vh] w-[50vh] max-w-[calc(100vw-4rem)]"})});if((null==n?void 0:n.length)===0)return null;let d=s===b.PG.USER;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:(0,B.cn)("flex w-full flex-row items-center gap-2",d&&"ml-auto max-w-2xl flex-wrap",d?"justify-end":"page"===a?"justify-start":"justify-center"),children:n.map(e=>(0,y.jsx)(t4,{attachment:e,role:s,onOpenLightbox:()=>o(e)},e.url))}),i&&(0,y.jsx)(tJ,{imageUrl:i.url,imageName:i.name,onClose:()=>o(null)})]})}var t8=a(34171),t9=a.n(t8),t7=a(37842),ae=a(8673),at=a(57982);function aa(e){let{className:t}=e,{resolvedTheme:a}=(0,at.D)(),{RiveComponent:n}=(0,ae.useRive)({src:"dark"===a?"/rive/searching-lg-dark.riv":"/rive/searching-lg-light.riv",autoplay:!0});return(0,y.jsx)(n,{className:t,"data-sentry-element":"RiveComponent","data-sentry-component":"LoadingSearch","data-sentry-source-file":"loading-search.tsx"},a)}var an=a(89185);let as=new Set;function ar(e){var t;let{source:a,tabIndex:n}=e,s=(0,D.useRef)(null),[r,l]=(0,D.useState)(()=>!!a.favicon&&as.has(a.favicon)),[i,o]=(0,D.useState)(()=>!!a.thumbnail&&as.has(a.thumbnail));return(0,y.jsxs)(N.Link,{ref:s,href:a.url,className:"hover:bg-surface-secondary focus-visible:ring-ring group flex min-h-[80px] w-full items-center justify-start gap-2 self-stretch overflow-hidden rounded-xl p-2 no-underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-inset sm:min-h-[96px] sm:gap-4 [&::after]:content-none",tabIndex:n,"data-sentry-element":"Link","data-sentry-component":"CitationSourceCard","data-sentry-source-file":"citation-source-card.tsx",children:[(0,y.jsx)("div",{className:"flex min-w-0 flex-1 flex-col items-start justify-center gap-2 overflow-hidden",children:(0,y.jsxs)("div",{className:"flex w-full min-w-0 items-center justify-start gap-2",children:[a.favicon&&!r?(0,y.jsx)("div",{className:"border-border-faint/30 relative h-8 w-8 flex-shrink-0 overflow-hidden rounded-lg border",children:(0,y.jsx)(an.default,{src:a.favicon,alt:"favicon",width:32,height:32,className:"object-cover",referrerPolicy:"no-referrer",onError:()=>{a.favicon&&as.add(a.favicon),l(!0)}})}):(0,y.jsx)("div",{className:"bg-surface-secondary border-border-faint/30 relative flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg border",children:(0,y.jsx)(t7.A,{className:"text-interactive-normal h-4 w-4"})}),(0,y.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start justify-start gap-0.5",children:[(0,y.jsxs)("div",{className:"flex w-full min-w-0 items-start justify-start gap-1",children:[(0,y.jsx)("div",{className:"bg-surface-raised mt-0.5 inline-flex w-4 flex-shrink-0 items-center justify-center rounded p-0.5",children:(0,y.jsx)("p",{className:"text-interactive-link text-center text-[10px] leading-3",children:a.id})}),(0,y.jsx)("p",{className:"text-text-primary min-w-0 flex-1 truncate text-sm font-medium leading-tight",children:null!=(t=a.title)?t:"Untitled"})]}),(0,y.jsx)("p",{className:"text-interactive-link w-full truncate text-xs leading-normal",children:a.url||""})]})]})}),a.thumbnail&&!i&&(0,y.jsx)("div",{className:"bg-surface-secondary relative hidden aspect-video w-1/4 max-w-[220px] overflow-hidden rounded-lg min-[425px]:block",children:(0,y.jsx)(an.default,{src:a.thumbnail,alt:"preview",fill:!0,sizes:"(max-width: 425px) 0vw, (max-width: 768px) 25vw, 220px",className:"object-cover",quality:85,onError:()=>{a.thumbnail&&as.add(a.thumbnail),o(!0)}})})]})}function al(e){let{sources:t,isComplete:a}=e,[n,s]=(0,D.useState)(!1),[r,l]=(0,D.useState)(0),i=(0,D.useRef)(null),[o,d]=(0,D.useState)(!1);(0,D.useEffect)(()=>{let e=i.current;if(!e)return;let t=()=>{l(n?e.scrollHeight:0)};if(t(),n){let a=new ResizeObserver(t);return a.observe(e),()=>a.disconnect()}},[n,t]),(0,D.useEffect)(()=>{if(a){let e=setTimeout(()=>d(!0),10);return()=>clearTimeout(e)}d(!1),s(!1)},[a]);let c=(null==t?void 0:t.length)&&t.every(e=>e&&e.url&&e.title&&e.favicon);return o&&(!t||0===t.length)?(0,y.jsx)("div",{className:"border-border-faint flex w-full flex-col rounded-md border p-3",children:(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)(t7.A,{className:"text-interactive-normal h-4 w-4"}),(0,y.jsx)("div",{className:"text-interactive-normal text-sm",children:"No Sources"})]})}):a&&c?(0,y.jsxs)("div",{className:(0,B.cn)("border-border-faint flex w-full flex-col border",n?"rounded-xl":"rounded-md"),"data-sentry-component":"SourcesAccordion","data-sentry-source-file":"sources-accordion.tsx",children:[(0,y.jsxs)("button",{onClick:e=>{var t;e.preventDefault();let a=null==(t=i.current)?void 0:t.closest(".overflow-y-auto");if(a){let e=a.scrollTop,t=()=>{a.scrollTop=e};a.addEventListener("scroll",t),setTimeout(()=>a.removeEventListener("scroll",t),250)}s(!n)},className:"focus-visible:ring-ring focus-visible:ring-offset-surface-primary group relative z-10 flex w-full items-center justify-between rounded-md p-3 text-left hover:no-underline focus-visible:rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","aria-expanded":n,children:[(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)(t7.A,{className:"text-interactive-link h-4 w-4","data-sentry-element":"Globe","data-sentry-source-file":"sources-accordion.tsx"}),(0,y.jsx)("div",{className:"text-interactive-active text-sm leading-none",children:"Sources"})]}),(0,y.jsx)(e_.A,{className:(0,B.cn)("text-interactive-normal h-5 w-5 shrink-0 transition-transform duration-200",n&&"rotate-180"),"data-sentry-element":"ChevronDown","data-sentry-source-file":"sources-accordion.tsx"})]}),(0,y.jsx)("div",{className:"relative z-0 w-full overflow-hidden transition-all duration-200 ease-out",style:{height:"".concat(r,"px"),opacity:+!!n},children:(0,y.jsx)("div",{ref:i,children:(0,y.jsx)("div",{className:"relative z-0 flex flex-col px-3 pb-3",children:null==t?void 0:t.map(e=>(0,y.jsx)(ar,{source:e,tabIndex:n?0:-1},e.id))})})})]}):(0,y.jsx)("div",{className:"border-border-faint flex w-full flex-col rounded-md border p-3",children:(0,y.jsxs)("div",{className:"jsx-d200430162549f6e flex items-center gap-2",children:[(0,y.jsx)(aa,{className:"h-4 w-4"}),(0,y.jsx)(tV,{className:"text-sm",duration:2,children:"Searching..."}),(0,y.jsx)(t9(),{id:"d200430162549f6e",children:".light [data-shimmer].jsx-d200430162549f6e{--base-gradient-color:rgba(0, 0, 0, 0.15)}.dark [data-shimmer].jsx-d200430162549f6e{--base-gradient-color:rgba(255, 255, 255, 0.3)}"})]})})}var ai=a(63252),ao=a(37705),ad=a(52370),ac=a(83502),au=a(99857);a(3536);var am=a(30707);let ap=am.bL,ax=am.l9,af=D.forwardRef((e,t)=>{let{className:a,align:n="center",sideOffset:s=4,...r}=e;return(0,y.jsx)(am.UC,{ref:t,align:n,sideOffset:s,className:(0,B.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-[--radix-hover-card-content-transform-origin] rounded-md border p-4 shadow-md outline-none",a),...r})});af.displayName=am.UC.displayName;let ah=new Set;function ag(e){var t;let{citation:a,children:n}=e,[s,r]=(0,D.useState)(!1),[l,i]=(0,D.useState)(()=>!!a.favicon&&ah.has(a.favicon)),[o,d]=(0,D.useState)(()=>!!a.thumbnail&&ah.has(a.thumbnail)),c=()=>{s&&r(!1)},u=(0,y.jsxs)("div",{className:"bg-surface-primary outline-border-faint/30 inline-flex w-[14rem] flex-col items-start justify-center gap-2 rounded-lg p-2 shadow-[2px_4px_24px_0px_rgba(0,0,0,0.12)] outline outline-1 outline-offset-[-1px]",children:[a.thumbnail&&!o&&(0,y.jsx)("div",{className:"border-border-faint/10 relative h-28 self-stretch overflow-hidden rounded border",children:(0,y.jsx)(an.default,{src:a.thumbnail,alt:"preview",fill:!0,className:"object-cover",quality:65,loading:"eager",priority:!0,sizes:"224px",onError:()=>{a.thumbnail&&ah.add(a.thumbnail),d(!0)}})}),(0,y.jsxs)("div",{className:"flex flex-col items-start justify-center gap-1.5 self-stretch",children:[(0,y.jsx)("div",{className:"w-full",children:(0,y.jsx)("div",{className:"text-text-primary line-clamp-2 font-['Inter'] text-sm font-medium leading-tight",children:null!=(t=a.title)?t:"Untitled"})}),(0,y.jsxs)("div",{className:"flex w-full min-w-0 items-center gap-1",children:[a.favicon&&!l?(0,y.jsx)("div",{className:"border-border-faint/30 h-5 w-5 flex-shrink-0 overflow-hidden rounded-sm border",children:(0,y.jsx)(an.default,{src:a.favicon,alt:"favicon",width:20,height:20,className:"object-cover",loading:"eager",priority:!0,onError:()=>{a.favicon&&ah.add(a.favicon),i(!0)}})}):(0,y.jsx)("div",{className:"bg-surface-secondary border-border-faint/30 flex h-5 w-5 flex-shrink-0 items-center justify-center rounded-sm border",children:(0,y.jsx)(t7.A,{className:"text-interactive-normal h-3 w-3"})}),(0,y.jsx)("a",{className:"text-interactive-normal hover:text-interactive-link min-w-0 flex-1 truncate font-['Inter'] text-xs font-normal leading-normal no-underline transition-colors",target:"_blank",href:a.url,rel:"noopener noreferrer",children:(e=>{try{let t=new URL(e);return t.hostname.replace(/^www\./,"")+t.pathname+t.search+t.hash}catch(t){return e}})(a.url)})]})]})]});return(0,y.jsxs)(ap,{openDelay:150,"data-sentry-element":"HoverCard","data-sentry-component":"CitationHoverCard","data-sentry-source-file":"citation-hover-card.tsx",children:[(0,y.jsx)(ax,{asChild:!0,"data-sentry-element":"HoverCardTrigger","data-sentry-source-file":"citation-hover-card.tsx",children:(0,y.jsx)("span",{className:"inline-flex p-0.5",onClick:()=>{r(!0)},onMouseEnter:c,onKeyDown:c,children:n})}),!s&&(0,y.jsx)(af,{className:"not-prose z-50 border-none bg-transparent p-0 shadow-none",side:"top",align:"center",sideOffset:8,avoidCollisions:!0,collisionPadding:10,children:u})]})}function av(e){let{citation:t,isComplete:a=!0}=e,n=(0,y.jsx)("span",{className:(0,B.cn)("bg-surface-raised inline-flex h-4 w-4 items-center justify-center rounded-sm p-0.5",a?"cursor-pointer":"cursor-default"),children:(0,y.jsx)("span",{className:(0,B.cn)("text-center font-['Inter'] text-[10px] font-normal leading-3",a?"text-interactive-link":"text-interactive-normal"),children:t.id})});return a?(0,y.jsx)(ag,{citation:t,"data-sentry-element":"CitationHoverCard","data-sentry-component":"InlineCitation","data-sentry-source-file":"inline-citation.tsx",children:(0,y.jsx)(N.Link,{href:t.url,className:"focus-visible:ring-ring inline-flex rounded-sm no-underline focus-visible:outline-none focus-visible:ring-2",disableLinkColor:!0,"data-sentry-element":"Link","data-sentry-source-file":"inline-citation.tsx",children:n})}):(0,y.jsx)("span",{className:"inline-flex cursor-default rounded-sm p-0.5",children:n})}var ay=a(38490);let ab="\x3c!--citation:";function aw(){return e=>{let t=(e,a,n)=>{var s;let r="html"===e.type,l="text"===e.type&&(null==(s=e.value)?void 0:s.includes(ab));if((r||l)&&e.value){let t,s=RegExp("".concat(ab,"([^-]+?)").concat("--\x3e"),"g"),r=[],l=0;for(;null!==(t=s.exec(e.value));){if(t.index>l){let a=e.value.slice(l,t.index);a&&r.push({type:e.type,value:a})}r.push({type:"inlineCode",value:"citation:".concat(t[1]),data:{hProperties:{className:"citation-marker"}}}),l=t.index+t[0].length}if(l<e.value.length&&r.push({type:e.type,value:e.value.slice(l)}),r.length>0&&n&&null!==a)return n.children.splice(a,1,...r),a+r.length-1}if(e.children){let a=0;for(;a<e.children.length;){let n=t(e.children[a],a,e);a="number"==typeof n?n+1:a+1}}};t(e,null,null)}}let aj=(0,D.createContext)(new Map),aN=(0,D.memo)(e=>{let{content:t,sources:a,className:n,isComplete:s}=e,r=(0,D.useMemo)(()=>new Map((null==a?void 0:a.map(e=>[e.id,e]))||[]),[a]),l=(0,D.useMemo)(()=>(function(e,t){if(!e||!t.length)return e||"";let a=new Map;t.forEach(e=>{var t;null==(t=e.charLocation)||t.forEach(t=>{var n;let s=null!=(n=a.get(t))?n:[];s.push(e.id),a.set(t,s)})});let n=e;return Array.from(a.keys()).sort((e,t)=>t-e).forEach(e=>{var t;let s=(null!=(t=a.get(e))?t:[]).map(e=>"".concat(ab).concat(e).concat("--\x3e")).join("");e<=n.length&&(n=n.slice(0,e)+s+n.slice(e))}),n})(t||"",a||[]),[t,a]);return l?(0,y.jsx)(aj.Provider,{value:r,children:(0,y.jsx)("div",{className:(0,B.cn)("prose prose-sm prose-pre:bg-transparent prose-pre:p-0 text-wrap break-words",n),children:(0,y.jsx)(ao.oz,{remarkPlugins:[ac.A,[au.A,{singleDollarTextMath:!0}],aw],rehypePlugins:[[ad.A,{displayMode:!0,throwOnError:!1,errorColor:"#cc0000"}]],components:{code(e){let{children:t,className:a,...n}=e;if("citation-marker"===a&&"string"==typeof t){let e=t.replace("citation:",""),a=r.get(e);return a?(0,y.jsx)(av,{citation:a,isComplete:s}):null}return(0,y.jsx)(ay.Hd,{className:a,...n,children:t})}},children:l})})}):null},(e,t)=>e.content===t.content&&e.id===t.id&&JSON.stringify(e.sources)===JSON.stringify(t.sources)&&e.className===t.className&&e.isComplete===t.isComplete);aN.displayName="CitationAwareMarkdown";var aE=a(19463),aC=a(63551);let aT=aC.bL,aA=aC.R6,a_=aC.Ke;var ak=a(5197);let aI=(0,D.memo)(e=>{let{className:t,...a}=e;return(0,y.jsx)(ak.jH,{className:(0,B.cn)("size-full [&>*:first-child]:mt-0 [&>*:last-child]:mb-0",t),...a})});aI.displayName="Response";let aR=(0,D.createContext)(null),aS=(0,D.memo)(e=>{let{className:t,isStreaming:a=!1,isReasoningComplete:n=!1,open:s,defaultOpen:r=!0,onOpenChange:l,duration:i,reasoningText:o,children:d,...c}=e,[u,m]=(0,aE.i)({prop:s,defaultProp:r,onChange:l}),p=!o||a||i?0:Math.max(1,Math.ceil(o.length/500)),[x,f]=(0,aE.i)({prop:i,defaultProp:p}),[h,g]=(0,D.useState)(!1),[v,b]=(0,D.useState)(null),[w,j]=(0,D.useState)(!1);return(0,D.useEffect)(()=>{a&&!w?(b(Date.now()),j(!0)):w&&n&&null!==v&&(f(Math.ceil((Date.now()-v)/1e3)),b(null))},[a,n,v,w,f]),(0,D.useEffect)(()=>{if(r&&n&&u&&!h&&x>0){let e=setTimeout(()=>{m(!1),g(!0)},1500);return()=>clearTimeout(e)}},[n,u,r,m,h,x]),(0,y.jsx)(aR.Provider,{value:{isStreaming:a,isOpen:u,setIsOpen:m,duration:x},children:(0,y.jsx)(aT,{className:(0,B.cn)("not-prose mb-4",t),onOpenChange:e=>{m(e)},open:u,...c,children:d})})}),aD=(0,D.memo)(e=>{let{className:t,children:a,...n}=e,{isStreaming:s,isOpen:r,duration:l}=(()=>{let e=(0,D.useContext)(aR);if(!e)throw Error("Reasoning components must be used within Reasoning");return e})();return(0,y.jsx)(aA,{className:(0,B.cn)("text-text-secondary hover:text-text-tertiary flex w-full items-center gap-1.5 text-sm transition-colors",t),...n,children:null!=a?a:(0,y.jsxs)(y.Fragment,{children:[((e,t)=>e?(0,y.jsx)(tV,{className:"text-sm",children:"Thinking..."}):void 0===t||0===t?(0,y.jsx)("p",{children:"Thought for a few seconds"}):(0,y.jsxs)("p",{className:"leading-[normal]","data-sentry-component":"getThinkingMessage","data-sentry-source-file":"reasoning.tsx",children:["Thought for ",(e=>{if(e<60)return"".concat(e," second").concat(1===e?"":"s");let t=Math.floor(e/60),a=e%60;return 0===a?"".concat(t," minute").concat(1===t?"":"s"):"".concat(t," minute").concat(1===t?"":"s"," and ").concat(a," second").concat(1===a?"":"s")})(t)]}))(s,l),(0,y.jsx)(e_.A,{className:(0,B.cn)("size-4 transition-transform",r?"rotate-180":"rotate-0")})]})})}),aM=e=>{let{className:t,children:a,...n}=e;return(0,y.jsx)(a_,{className:(0,B.cn)("mt-4 text-sm","data-[state=closed]:fade-out-0 data-[state=closed]:slide-out-to-top-2 data-[state=open]:slide-in-from-top-2","data-[state=closed]:animate-out data-[state=open]:animate-in","data-[state=closed]:duration-150 data-[state=open]:duration-150","text-text-secondary outline-none",t),...n,"data-sentry-element":"CollapsibleContent","data-sentry-component":"ReasoningContent","data-sentry-source-file":"reasoning.tsx",children:(0,y.jsxs)("div",{className:"relative pl-6 pr-2",children:[(0,y.jsx)("div",{className:"absolute bottom-0 left-1 top-0 w-px bg-gray-200 dark:bg-gray-800"}),(0,y.jsx)(aI,{className:"font-mono text-xs leading-relaxed","data-sentry-element":"Response","data-sentry-source-file":"reasoning.tsx",children:a})]})})};function aL(e){let{errorMessage:t}=e;return(0,y.jsx)("p",{className:"text-interactive-negative text-sm font-normal","data-sentry-component":"ErrorMessage","data-sentry-source-file":"error-message.tsx",children:null!=t?t:"Something went wrong with this response, please try again."})}aS.displayName="Reasoning",aD.displayName="ReasoningTrigger",aM.displayName="ReasoningContent";var aO=a(45232),aP=a(80974),az=a(21439),aB=a(56417);function aU(e){let{toolCall:t,className:a}=e;return(0,y.jsxs)("div",{className:(0,B.cn)("flex w-full items-center gap-2 py-1",a),"data-sentry-component":"ToolCall","data-sentry-source-file":"tool-call.tsx",children:[(0,y.jsx)("div",{children:(()=>{let e=t.toolName,a="h-4 w-4 text-text-secondary";switch(e){case"create_file":return(0,y.jsx)(ee.A,{className:a});case"edit_file":return(0,y.jsx)(aO.A,{className:a});case"read_file":return(0,y.jsx)(aP.A,{className:a});default:return(0,y.jsx)(az.A,{className:a})}})()}),(0,y.jsx)(tV,{duration:1,spread:2,className:"text-sm","data-sentry-element":"TextShimmer","data-sentry-source-file":"tool-call.tsx",children:(()=>{var e,a,n;let s=t.toolName,r=t.args;switch(s){case"create_file":return"Creating ".concat(null!=(e=null==r?void 0:r.path)?e:"file");case"edit_file":return"Editing ".concat(null!=(a=null==r?void 0:r.path)?a:"file");case"read_file":return"Reading ".concat(null!=(n=null==r?void 0:r.path)?n:"file");default:return"Executing ".concat(s.replace(/_/g," "))}})()}),(0,y.jsx)(aB.A,{className:"text-text-secondary h-3 w-3 animate-spin","data-sentry-element":"Loader2","data-sentry-source-file":"tool-call.tsx"})]})}function aF(e){return null!==e&&"object"==typeof e&&"type"in e&&"text"===e.type}function aH(e){return null!==e&&"object"==typeof e&&"type"in e&&"tool-call"===e.type}function aG(e){return null!==e&&"object"==typeof e&&"type"in e&&"tool-result"===e.type}function aV(e){let t=[],a=[],n=[];return e.forEach(e=>{"string"==typeof e?n.push(e):aH(e)?t.push(e):aG(e)?a.push(e):aF(e)&&n.push(e.text||"")}),{toolCalls:t,toolResults:a,textContent:n}}var aW=a(21203),aY=a(15423),aQ=a(87812),aJ=a(76518),aq=a.n(aJ),a$=a(91508);let aK=(0,D.memo)(function(e){let{oldCode:t,newCode:a,language:n,className:s}=e,{highlightedHtml:r,isHighlighting:l}=function(e){let{code:t,language:a,operation:n}=e,[s,r]=(0,D.useState)(""),[l,i]=(0,D.useState)(!1),{resolvedTheme:o}=(0,at.D)();return(0,D.useEffect)(()=>{let e=!1;return async function(){if(!t)return r("");i(!0);try{let s=await (0,a$.pY)(t,a,"dark"===o?"github-dark":"github-light",n);e||r(s)}catch(a){if(console.error("Error highlighting diff code:",a),!e){let e=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),a="create"===n?"add":"delete"===n?"remove":"add",s=e.split("\n").map(e=>'<span class="line diff '.concat(a,'">').concat(e,"</span>")).join("\n");r('<pre class="shiki-code-block has-diff"><code>'.concat(s,"</code></pre>"))}}finally{e||i(!1)}}(),()=>{e=!0}},[t,a,n,o]),{highlightedHtml:s,isHighlighting:l}}({code:[...t.length>0?t.split("\n").map(e=>"-".concat(e)):[],...a.length>0?a.split("\n").map(e=>"+".concat(e)):[]].join("\n"),language:n,operation:"update"});return l?(0,y.jsx)("div",{className:(0,B.cn)("max-h-96 overflow-y-auto font-mono text-[11px]",s),children:(0,y.jsx)("div",{className:"text-muted-foreground flex items-center justify-center p-4",children:"Loading..."})}):r?(0,y.jsx)("div",{className:(0,B.cn)(aq().container,"max-h-96 overflow-y-auto font-mono text-[11px]",s),dangerouslySetInnerHTML:{__html:r}}):(0,y.jsx)("div",{className:(0,B.cn)("max-h-96 overflow-y-auto font-mono text-[11px]",s),children:(0,y.jsx)("div",{className:"text-muted-foreground flex items-center justify-center p-4",children:"No content available"})})});function aX(e){let{result:t}=e;return(0,y.jsx)("div",{className:"rounded-md border p-3","data-sentry-component":"ErrorContent","data-sentry-source-file":"tool-result.tsx",children:(0,y.jsx)("div",{className:"text-sm text-red-600",children:"string"==typeof t?t:JSON.stringify(t)})})}function aZ(e){let{result:t}=e,a=e7.safeParse(t);if(!a.success||"edit_file"!==a.data.op&&"create_file"!==a.data.op)return null;let n="edit_file"===a.data.op?a.data.replacement_block:a.data.file.content,s="edit_file"===a.data.op?a.data.context_block:"";return(0,y.jsx)("div",{className:"border-border-faint overflow-hidden rounded-md border","data-sentry-component":"FileOperationContent","data-sentry-source-file":"tool-result.tsx",children:(0,y.jsx)(aK,{newCode:n,oldCode:s,language:(0,aW.sQ)(a.data.file.path),"data-sentry-element":"FileOperationPreview","data-sentry-source-file":"tool-result.tsx"})})}function a0(e){let{toolResult:t,className:a,onOpenChange:n}=e,[s,r]=(0,D.useState)(!1),{result:l,toolName:i}=t,o=te.safeParse(l),d=o.success,c=e7.safeParse(l),u=!d&&!!c.success&&("edit_file"===c.data.op?c.data.replacement_block.length+c.data.context_block.length>0:"create_file"===c.data.op&&c.data.file.content.length>0),m={success:{icon:(0,y.jsx)(aY.A,{className:"h-3 w-3"}),color:"text-green-500",label:"Success"},error:{icon:(0,y.jsx)(aQ.A,{className:"h-3 w-3"}),color:"text-red-500",label:"Error"}},p=d?m.error:m.success,x=()=>{if(!i)return(0,y.jsx)(az.A,{className:"text-text-secondary h-4 w-4"});let e="h-4 w-4 text-text-secondary group-hover:text-text-primary transition-colors duration-200";switch(i){case"create_file":return(0,y.jsx)(ee.A,{className:e});case"edit_file":return(0,y.jsx)(aO.A,{className:e});case"read_file":return(0,y.jsx)(aP.A,{className:e});default:return(0,y.jsx)(az.A,{className:e})}},f=()=>{if(o.success){let e=o.data.path;switch(i){case"create_file":return"Creating ".concat(e," failed");case"edit_file":return"Editing ".concat(e," failed");case"read_file":return"Reading ".concat(e," failed");default:return"Tool call failed"}}if(!c.success)return"".concat(i," executed");switch(c.data.op){case"create_file":return"Created ".concat(c.data.file.path);case"edit_file":return"Edited ".concat(c.data.file.path);case"read_file":return"Read ".concat(c.data.file.path);default:return"Executed ".concat(i?i.replace(/_/g," "):"tool")}};return u?(0,y.jsxs)(aT,{open:s,onOpenChange:e=>{r(e),null==n||n(e)},className:(0,B.cn)("leading-[1]",a),"data-sentry-element":"Collapsible","data-sentry-component":"ToolResult","data-sentry-source-file":"tool-result.tsx",children:[(0,y.jsx)(aA,{asChild:!0,"data-sentry-element":"CollapsibleTrigger","data-sentry-source-file":"tool-result.tsx",children:(0,y.jsx)("button",{className:"group h-auto w-full justify-start px-0",children:(0,y.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)("div",{className:(0,B.cn)("transition-opacity duration-200",s?"hidden":"group-hover:hidden"),children:x()}),(0,y.jsx)("div",{className:(0,B.cn)("transition-opacity duration-200",s?"block":"hidden group-hover:block"),children:(0,y.jsx)(az.A,{className:(0,B.cn)("text-text-secondary group-hover:text-text-primary h-4 w-4 transition-transform duration-200",s?"rotate-90":"rotate-0"),"data-sentry-element":"ChevronRight","data-sentry-source-file":"tool-result.tsx"})}),(0,y.jsx)("span",{className:"text-text-secondary group-hover:text-text-primary text-sm transition-colors duration-200",children:f()}),(0,y.jsx)("div",{className:(0,B.cn)("flex items-center gap-1 text-xs",p.color),children:p.icon})]}),(0,y.jsx)("div",{className:"flex-1"})]})})}),(0,y.jsx)(a_,{"data-sentry-element":"CollapsibleContent","data-sentry-source-file":"tool-result.tsx",children:(0,y.jsx)("div",{className:"space-y-3",children:d?(0,y.jsx)(aX,{result:l}):i&&["create_file","edit_file","read_file"].includes(i)?(0,y.jsx)(aZ,{result:l}):null})})]}):(0,y.jsx)("div",{className:(0,B.cn)("pointer-events-none leading-[1]",a),children:(0,y.jsx)("div",{className:"flex w-full items-center gap-2",children:(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[x(),(0,y.jsx)("span",{className:"text-text-secondary text-sm",children:f()}),(0,y.jsx)("div",{className:(0,B.cn)("flex items-center gap-1 text-xs",p.color),children:p.icon})]})})})}function a1(e){var t;let{message:a,onToolResultOpenChange:n,isCollapsed:s=!1,contentHeight:r=null}=e,{hasError:l,contentString:i,reasoningText:o,shouldShowErrorOnly:d}=tU(a),c=a.role===b.PG.USER,u=(0,U.g)(e=>e.modality),m=null!=(t=null==a?void 0:a.sources)?t:[],p=Array.isArray(a.content)&&aV(a.content).toolCalls.length>0,x=i.length>0||p,f=a.status===b.nH.PENDING&&!x;if(d)return(0,y.jsx)(aL,{});if(u===b.Jg.SEARCH&&!c)return(0,y.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,y.jsx)(al,{sources:m,isComplete:a.status!==b.nH.PENDING}),(0,y.jsx)(aN,{id:a.id,content:i,sources:m,isComplete:a.status!==b.nH.PENDING}),(0,y.jsx)(t6,{message:a}),l&&(0,y.jsx)(aL,{})]});if(u===b.Jg.WEBDEV&&Array.isArray(a.content)&&!c){let{toolResults:e}=aV(a.content),t=new Map;e.forEach(e=>{t.set(e.toolCallId,e)});let i=new Set,d=[],c=a.content,u=c.findIndex(e=>aG(e)||aH(e)&&t.has(e.toolCallId)),m=(e,t,a)=>(0,y.jsx)("div",{className:(0,B.cn)("overflow-hidden transition-all duration-300 ease-in-out"),style:a?{maxHeight:"0px",marginTop:"-0.75rem"}:{maxHeight:r?"".concat(r+800,"px"):"9999px"},"data-sentry-component":"renderAnimatedWrapper","data-sentry-source-file":"message-content.tsx",children:t},e);return c.forEach((e,r)=>{var o;let c=aH(e)||aG(e)?e.toolCallId:"string"==typeof e?"string-".concat(r):aF(e)?"text-".concat(r):"unknown-".concat(r),p=s&&-1!==u&&r>u;if("string"==typeof e&&e.trim())d.push(m(c,(0,y.jsx)(ai.A,{id:"".concat(a.id,"-").concat(c),content:e}),p));else if(aF(e)&&(null==(o=e.text)?void 0:o.trim()))d.push(m(c,(0,y.jsx)(ai.A,{id:"".concat(a.id,"-").concat(c),content:e.text}),p));else if(aH(e)){let a=t.get(e.toolCallId);i.add(e.toolCallId),a?d.push(m(c,(0,y.jsx)(a0,{toolResult:a,onOpenChange:n}),p)):l||d.push(m(c,(0,y.jsx)(aU,{toolCall:e}),p))}else aG(e)&&!i.has(e.toolCallId)&&(d.push(m(c,(0,y.jsx)(a0,{toolResult:e,onOpenChange:n}),p)),i.add(e.toolCallId))}),(0,y.jsxs)("div",{className:(0,B.cn)("flex flex-col","gap-3"),children:[o&&(0,y.jsxs)(aS,{isStreaming:f,defaultOpen:a.status===b.nH.PENDING,isReasoningComplete:x,reasoningText:o,children:[(0,y.jsx)(aD,{}),(0,y.jsx)(aM,{children:o})]}),d,(0,y.jsx)(t6,{message:a}),l&&(0,y.jsx)(aL,{})]})}return(0,y.jsxs)(y.Fragment,{children:[!c&&o&&(0,y.jsxs)(aS,{isStreaming:f,defaultOpen:a.status===b.nH.PENDING,isReasoningComplete:x,reasoningText:o,children:[(0,y.jsx)(aD,{}),(0,y.jsx)(aM,{children:o})]}),(0,y.jsx)(ai.A,{id:a.id,content:i,"data-sentry-element":"MemoizedMarkdown","data-sentry-source-file":"message-content.tsx"}),(0,y.jsx)(t6,{message:a,"data-sentry-element":"MessageAttachments","data-sentry-source-file":"message-content.tsx"}),l&&!c&&(0,y.jsx)(aL,{})]})}function a2(e){let{message:t,messageLayoutMode:a,shouldShowGeneratingText:n,onToolResultOpenChange:s,messageRef:r,contentRef:l,isScrollable:i,checkOverflow:o,hasOverflow:d,scrollToBottom:c}=e,u=(0,eJ.d)("md"),m="treatment-1"===(0,J._P)("webapp_chat_battle_side_by_side_mobile_carousel")&&u;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:(0,B.cn)("no-scrollbar relative flex w-full flex-1 flex-col overflow-x-auto transition-[max-height] duration-300",{"max-h-[max(50svh,350px)] overflow-y-auto":i,"border-border-faint border-t":"container"===a}),ref:r,onScroll:o,children:(0,y.jsx)("div",{className:(0,B.cn)("min-w-0",{"p-3":"container"===a}),ref:l,children:n?(0,y.jsx)(tV,{className:"text-sm",children:"Generating..."}):(0,y.jsx)(a1,{message:t,onToolResultOpenChange:s})})}),d&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:m?"from-surface-primary via-surface-primary/90 pointer-events-none absolute bottom-0 left-0 h-20 w-full rounded-b-2xl bg-gradient-to-t to-transparent":"from-surface-primary via-surface-primary/80 pointer-events-none absolute bottom-0 left-0 h-16 w-full rounded-b-2xl bg-gradient-to-t to-transparent"}),(0,y.jsx)("div",{className:"pointer-events-none absolute bottom-3 left-0 flex w-full justify-center",children:(0,y.jsx)(E.$,{className:m?"pointer-events-auto size-8 transition-all duration-200 hover:scale-105":"bg-surface-secondary/90 hover:bg-surface-secondary border-border-faint/50 pointer-events-auto size-8 rounded-lg border shadow-lg backdrop-blur-sm transition-all duration-200 hover:scale-105 hover:shadow-xl",size:"icon",variant:"ghost",onClick:c,children:(0,y.jsx)(tH.A,{size:m?18:16})})})]})]})}var a4=a(13830);let a3=(0,w.createServerReference)("60af633c709daafec9096f7b7529848c358837c259",w.callServer,void 0,w.findSourceMapURL,"createPointwiseFeedback");function a5(e){let{className:t}=e,{resolvedTheme:a}=(0,at.D)(),{RiveComponent:n}=(0,ae.useRive)({src:"dark"===a?"/rive/thinking-dark.riv":"/rive/thinking-light.riv",autoplay:!0});return(0,y.jsx)(n,{className:t,"data-sentry-element":"RiveComponent","data-sentry-component":"Loading","data-sentry-source-file":"loading.tsx"},a)}var a6=a(87214),a8=a(56880),a9=a(72152),a7=a(68385);function ne(){return"undefined"!=typeof navigator&&"share"in navigator&&"canShare"in navigator}async function nt(e,t,a,n,s){let r;try{let d=function(e,t,a,n){var s,r,l;let i=(n?tS(n):"").substr(0,20).replace(/\s+/g,"_"),o=null!=(l=null==(r=e.contentType)||null==(s=r.split("/")[1])?void 0:s.split(";")[0])?l:"png",d=t.participantPosition,c="".concat(d,"_").concat(i,".").concat(o);return a&&(c="".concat(a,"_").concat(c)),c}(e,t,a,n);if(r=e.url.startsWith("data:image/")?"base64":"url",a7.un&&ne()){var l;let t=await na(e.url,d,null!=(l=e.contentType)?l:"image/png");await ns(t,e.url)}else{var i=await nn(e.url),o=d;let t=document.createElement("a");t.href=i,t.download=o,document.body.appendChild(t),t.click(),document.body.removeChild(t)}A.z.capture({action:"image_download",params:{message_id:t.id,user_id:s,status:"success",image_type:r}})}catch(a){if(a7.un&&a instanceof Error&&"AbortError"===a.name)return void console.info("User cancelled share sheet - no action taken");console.error("Error downloading image:",a),window.open(e.url,"_blank"),A.z.capture({action:"image_download",params:{status:"error",image_type:r,message_id:t.id,user_id:s}})}}async function na(e,t,a){var n,s,r,l;let i=(await nn(e)).split(","),o=null!=(r=null==(s=i[0])||null==(n=s.match(/:(.*?);/))?void 0:n[1])?r:a,d=atob(null!=(l=i[1])?l:""),c=new Uint8Array(d.length);for(let e=0;e<d.length;e++)c[e]=d.charCodeAt(e);return new File([new Blob([c],{type:o})],t,{type:o,lastModified:Date.now()})}async function nn(e){if(e.startsWith("data:image/"))return e;let{getProxyImage:t}=await a.e(4278).then(a.bind(a,24278)),n=await t(e);if(!n.success)throw Error("Failed to fetch image through proxy");return n.data}async function ns(e,t){navigator.canShare&&navigator.canShare({files:[e]})?await navigator.share({files:[e]}):await navigator.share({url:t})}var nr=a(50501),nl=a(4145),ni=a(73088),no=a(95042);let nd=(0,k.eU)([]),nc=(0,k.eU)(!1);function nu(){let[e,t]=(0,I.fp)(nc),a=(0,D.useCallback)(()=>{t(!0)},[t]);return{shown:e,show:a,dismiss:(0,D.useCallback)(()=>{t(!1)},[t]),reset:(0,D.useCallback)(()=>{t(!1)},[t])}}function nm(){let[e]=(0,I.fp)(nd),{show:t}=nu(),a=(0,D.useRef)(e.length);return(0,D.useEffect)(()=>{10===e.length&&a.current<10&&t(),a.current=e.length},[e.length,t]),e.length>=10}function np(e){let{message:t}=e,[a,n]=(0,I.fp)(nd),[s,r]=(0,D.useState)(!1),l=nm(),i=(0,U.g)(e=>e.userId),{mode:o,modality:d}=(0,U.g)((0,H.k)(e=>({mode:e.mode,modality:e.modality}))),[c,u,m]=(0,ex.g)((0,H.k)(e=>[e.modelAId,e.modelBId,e.models])),p=(0,D.useMemo)(()=>eg(o,c,u,m,d),[o,c,u,m,d]);(0,D.useEffect)(()=>{var e,n;if(!s)return;let l=null==(n=t.experimental_attachments)||null==(e=n[0])?void 0:e.url;a.some(e=>(e.uploadedUrl||e.preview)===l)||r(!1)},[a,s,t.experimental_attachments]);let x=(0,D.useCallback)(()=>{var e,o;if(!s&&(null==(e=t.experimental_attachments)?void 0:e.length)&&!l){A.z.capture({action:"edit_image_button_clicked",params:{user_id:i,message_id:t.id,current_attachments_count:a.length}});try{let e=t.experimental_attachments[0];if(!e)throw Error("Invalid attachment: missing attachment");let a=new Blob([],{type:e.contentType}),s=new File([a],null!=(o=e.name)?o:"",{type:e.contentType});n(t=>[...t,{file:s,preview:e.url,isAlreadyUploaded:!0,uploadedUrl:e.url}]),r(!0)}catch(e){M.oR.error("Failed to add image to chat")}}},[t,n,s,l,i,a.length]);return s?(0,y.jsxs)(E.$,{variant:"outline",size:"sm",className:"border-interactive-positive h-6 cursor-not-allowed gap-1 bg-green-500/10 px-1.5 py-0",disabled:!0,children:[(0,y.jsx)(eI.A,{size:12,className:"text-interactive-positive"}),(0,y.jsx)("span",{className:"text-interactive-positive text-xs font-medium leading-none",children:"Added"})]}):!p||l?(0,y.jsxs)(E.$,{variant:"outline",size:"sm",className:"h-6 cursor-not-allowed gap-1 px-1.5 py-0 opacity-50",disabled:!0,children:[(0,y.jsx)(aO.A,{size:12}),(0,y.jsx)("span",{className:"text-xs font-medium leading-none",children:"Edit"})]}):(0,y.jsxs)(E.$,{variant:"outline",size:"sm",className:"h-6 gap-1 px-1.5 py-0",onClick:x,"data-sentry-element":"Button","data-sentry-component":"EditImageButton","data-sentry-source-file":"edit-image-button.tsx",children:[(0,y.jsx)(aO.A,{size:12,"data-sentry-element":"Pencil","data-sentry-source-file":"edit-image-button.tsx"}),(0,y.jsx)("span",{className:"text-interactive-normal text-xs font-medium leading-none",children:"Edit"})]})}var nx=a(22294),nf=a(99455);let nh=e=>{let{initialValue:t=null,onChange:a,className:n}=e,s=t===b.ut.UPVOTE,r=t===b.ut.DOWNVOTE,l=null!==t,i=e=>{l||null==a||a(e)},o="size-3 rounded-md p-3 transition-all";return(0,y.jsxs)(y.Fragment,{children:[!r&&(0,y.jsx)(a6.G,{content:s?"Liked":"Like",children:(0,y.jsx)(E.$,{variant:"ghost","aria-label":s?"Liked":"Like this response",className:(0,B.cn)(o,s&&"bg-green-500/10 hover:bg-green-500/10",!l&&"hover:bg-accent",l&&"cursor-default",n),onClick:()=>i(b.ut.UPVOTE),children:(0,y.jsx)(nx.A,{size:14,className:(0,B.cn)("transition-colors",s&&"text-interactive-positive")})})}),!s&&(0,y.jsx)(a6.G,{content:r?"Disliked":"Dislike",children:(0,y.jsx)(E.$,{variant:"ghost","aria-label":r?"Disliked":"Dislike this response",className:(0,B.cn)(o,r&&"bg-red-500/10 hover:bg-red-500/10",!l&&"hover:bg-accent",l&&"cursor-default",n),onClick:()=>i(b.ut.DOWNVOTE),children:(0,y.jsx)(nf.A,{size:14,className:(0,B.cn)("transition-colors",r&&"text-interactive-negative")})})})]})};var ng=a(11534),nv=a(89347);function ny(e,t){let a=t.find(t=>t.id===e.pairwiseFeedbackId);return null==a?null:a.value===b.sb.TIE?"tie":a.value===b.sb.BOTH_BAD?"bothbad":e.participantPosition===tg.BQ.a?a.value===b.sb.MODEL_A?"win":"lose":a.value===b.sb.MODEL_B?"win":"lose"}function nb(e){let{message:t,participantPosition:a}=e,n=ny(t,(0,U.g)(e=>e.pairwiseFeedbacks)),s=(0,U.g)(e=>"a"===a?e.leftVoteHoverState:e.rightVoteHoverState);return null!=n?null:(0,y.jsxs)("div",{className:"pointer-events-none absolute right-2 top-2 flex size-6 items-center justify-center","data-sentry-component":"VoteHoverIcon","data-sentry-source-file":"vote-hover-icon.tsx",children:[(0,y.jsx)(ng.A,{size:16,className:(0,B.cn)("absolute opacity-0 transition-opacity duration-300",{"opacity-100":"tie"===s}),"data-sentry-element":"Handshake","data-sentry-source-file":"vote-hover-icon.tsx"}),(0,y.jsx)(nv.A,{size:16,className:(0,B.cn)("absolute opacity-0 transition-opacity duration-300",{"opacity-100":"win"===s}),"data-sentry-element":"Trophy","data-sentry-source-file":"vote-hover-icon.tsx"}),(0,y.jsx)(nf.A,{size:16,className:(0,B.cn)("absolute opacity-0 transition-opacity duration-300",{"opacity-100":"bothbad"===s}),"data-sentry-element":"ThumbsDown","data-sentry-source-file":"vote-hover-icon.tsx"})]})}var nw=a(86699);let nj=Error("Message failed to build");function nN(e){var t;let{data:a,error:n}=(0,nw.useQuery)({...tj(null!=(t=null==e?void 0:e.id)?t:""),retry:!1,enabled:(null==e?void 0:e.status)===b.nH.SUCCESS});return(null==e?void 0:e.status)===b.nH.FAILED?{data:void 0,error:nj}:{data:a,error:n}}function nE(e){var t;let{data:a=!1}=(0,nw.useQuery)({...tj(null!=(t=null==e?void 0:e.id)?t:""),select:e=>{switch(e.status){case"success":case"pending":return!1;case"build-error":return 0===e.files.length}},retry:!1,enabled:(null==e?void 0:e.status)===b.nH.SUCCESS});return a||(null==e?void 0:e.status)===b.nH.FAILED}function nC(e){let[t,a,n,s]=(0,U.g)((0,H.k)(e=>[e.viewedWebDevPreviews,e.pairwiseFeedbacks,e.mode,e.lastMessageIds])),r=nE(e);return(0,D.useMemo)(()=>!(n!==b.lY.BATTLE||r||null==e||e.status!==b.nH.SUCCESS||t.includes(e.id))&&!!s.includes(e.id)&&a.every(t=>t.id!==e.pairwiseFeedbackId),[n,e,t,a,r,s])}function nT(e){let[,t]=tc(),[,a]=tu(),[,n]=tf(),s=(0,eJ.d)("md"),r=e.parentMessageIds[0];return(0,D.useCallback)(()=>{t(e.participantPosition,"message",r),a("preview","message"),s&&n(!0)},[s,e.participantPosition,r,n,t,a])}let nA=(0,D.forwardRef)((e,t)=>{let{message:a,model:n,className:s,setRenderExpandedMessage:r}=e,{messageLayoutMode:l}=tQ(),i=(0,U.g)(e=>e.isVoteSubmitting),o=(0,U.g)(e=>e.modality),d=(0,ex.g)(e=>e.models),c=null!==(0,U.g)(e=>"a"===a.participantPosition?e.leftVoteHoverState:e.rightVoteHoverState);return(0,y.jsxs)("div",{ref:t,className:(0,B.cn)("bg-surface-primary sticky top-0 flex w-full flex-none items-center justify-between gap-2",{"h-[76px] cursor-grab rounded-t-3xl border pt-8 active:cursor-grabbing md:h-[40px] md:rounded-t-xl md:pt-2":"drawer"===l,"h-[40px]":"container"===l,"py-2 pl-3 pr-3":"container"===l||"drawer"===l},s),children:[(0,y.jsx)(nb,{message:a,participantPosition:a.participantPosition}),(0,y.jsx)("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:null==a.modelId&&i?(0,y.jsx)(a9.E,{className:"h-5 w-[100px]"}):(0,y.jsxs)(y.Fragment,{children:[a.status===b.nH.PENDING&&(0,y.jsx)(a5,{className:"h-5 w-5 flex-shrink-0 animate-spin"}),(0,y.jsxs)("span",{className:(0,B.cn)("xs:max-w-full flex min-w-0 max-w-[250px] items-center gap-1 font-mono","page"===l?"text-sm font-normal":"text-xs font-medium"),children:[(null==n?void 0:n.organization)==null?null:(0,y.jsx)(eR.D,{variant:"colored",className:(0,B.cn)("mr-2 flex-shrink-0","page"===l?"size-4":"size-3.5"),organization:n.organization}),o===b.Jg.WEBDEV?(0,y.jsx)(n_,{message:a,models:d}):(0,y.jsx)("span",{className:"truncate",children:tP(a,d)})]})]})}),"page"!==l&&(0,y.jsx)(nk,{className:(0,B.cn)({"pointer-events-none opacity-0":c,"opacity-100":!c}),message:a,setRenderExpandedMessage:r})]})});function n_(e){let{message:t,models:a}=e,n=nC(t),s=tP(t,a,"Option");return n?(0,y.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,y.jsx)("span",{children:s}),(0,y.jsx)("span",{className:"h-2 w-2 rounded-full bg-red-500"})]}):(0,y.jsx)("span",{className:"truncate","data-sentry-component":"WebDevModelName","data-sentry-source-file":"message-header.tsx",children:s})}function nk(e){let{className:t,message:a,setRenderExpandedMessage:n}=e,{messageLayoutMode:s}=tQ(),r=(0,U.g)(e=>e.modality),l=(0,U.g)(e=>e.mode),i=(0,U.g)(e=>e.userId),[,o]=(0,no.A)(),d=(0,U.g)(e=>e.messages),c=(0,U.g)(e=>e.lastMessageIds),{appendStream:u}=function(){let e=(0,U.g)((0,H.k)(e=>({id:e.id,mode:e.mode,userId:e.userId,modality:e.modality,messages:e.messages,updateMessage:e.updateMessage}))),t=(0,_.kH)(e=>e.setImageModalityRateLimitedUntil),{setLocation:a}=(0,eL.G)(),{getRecaptchaV2Token:n}=(0,t_.eN)(),s=(0,J._P)("edit-image-button-enabled"),[,r]=th(),l=tE(),i=tC(),o=tN(),d=function(){let e=(0,ty.useQueryClient)();return(0,D.useCallback)(t=>{e.removeQueries(tj(t))},[e])}();return{appendStream:async c=>{var u;let m=e.messages.find(e=>e.id===c);if(null==m)throw Error("Model message not found");e.updateMessage({id:m.id,content:[],reasoning:"",experimental_attachments:[],sources:[],status:b.nH.PENDING}),e.modality===b.Jg.WEBDEV&&(d(c),r(e=>e+1));let p=e.messages.slice(0,e.messages.findIndex(e=>m.parentMessageIds.includes(e.id))+1);A.z.capture({action:"chat_retry",params:{mode:e.mode,user_id:e.userId,modality:e.modality,evaluation_session_id:e.id}});let x=null;try{x=await (0,t_.ic)("chat_retry")}catch(e){}let f=t=>fetch("/nextjs-api/stream/retry-evaluation-session-message/".concat(e.id,"/messages/").concat(c),{method:"PUT",body:JSON.stringify({messages:p,modelId:m.modelId,recaptchaV3Token:x,...e.modality===b.Jg.IMAGE&&s?{featureFlags:{editImageButtonEnabled:s}}:{},...t?{recaptchaV2Token:t,recaptchaV3Token:void 0}:{}})}),h=await f();if(!h.ok){let{error:e}=await h.clone().json();if(e===ts.EV){let e=await n();h=await f(e)}}if(!h.ok){if(h.status===tn.TOO_MANY_REQUESTS){let e=tM(h.headers);null!=e&&(a("image-modality-rate-limit-modal"),t(e))}e.updateMessage({id:m.id,content:m.content,reasoning:m.reasoning,status:m.status,experimental_attachments:m.experimental_attachments});return}A.z.capture({action:"chat_retry_success",params:{mode:e.mode,user_id:e.userId,modality:e.modality,evaluation_session_id:e.id}});let g="",v=[],y=[],w=[],j=null==(u=h.body)?void 0:u.getReader();if(j)return ta(j,{onTextChunk:(t,a)=>{let n=v.at(-1);(null==n?void 0:n.type)==="text"?n.text+=a:v=[...v,{type:"text",text:a}],e.updateMessage({id:c,content:v})},onReasoningChunk:(t,a)=>{g+=a,e.updateMessage({id:c,reasoning:g,content:v})},onSourceChunk:(t,a)=>{y=Array.isArray(a)?a:tD(y,a),e.updateMessage({id:c,sources:y})},onImageChunk:(t,a)=>{var n;w.push({url:a.image,contentType:null!=(n=a.mimeType)?n:"image/png"}),e.updateMessage({id:c,experimental_attachments:w})},onVideoChunk:()=>{},onWebDevChunk:(e,t)=>{"init"===t.type&&l(m.id,t.files,t.templateFiles)},onToolCallChunk:(t,a)=>{let n=v.findIndex(e=>"tool-call"===e.type&&e.toolCallId===a.toolCallId);-1!==n?(v=[...v])[n]={...a,type:"tool-call"}:v=[...v,{...a,type:"tool-call"}],e.updateMessage({id:c,content:v})},onToolResultChunk:(t,a)=>{let n=e7.safeParse(a.result);n.success&&i(m.id,n.data);let s=v.find(e=>"tool-call"===e.type&&e.toolCallId===a.toolCallId);s&&(v=[...v,{...a,type:"tool-result",toolName:s.toolName}]),e.updateMessage({id:c,content:v})},onFinish:()=>{e.updateMessage({id:c,status:b.nH.SUCCESS}),A.z.capture({action:"chat_response_success",params:{response_type:"retry",mode:e.mode,user_id:e.userId,modality:e.modality,evaluation_session_id:e.id,model_id:m.modelId,has_attachments:w.length>0,attachments_count:w.length,response_length:v.length}}),A.z.capture({action:"chat_responses_success",params:{response_type:"retry",mode:e.mode,user_id:e.userId,modality:e.modality}}),e.modality===b.Jg.WEBDEV&&o(c)},onError:()=>{e.updateMessage({id:c,status:b.nH.FAILED})}})}}}(),m=(0,U.g)(e=>e.addPointwiseFeedback),p=(0,U.g)(e=>e.deletePointwiseFeedback),x=(0,U.g)(e=>e.getPointwiseFeedbackById),f=(0,J._P)("pointwise-feedback-enabled"),h=(0,J._P)("edit-image-button-enabled"),g=nT(a),v=(0,eJ.d)("md"),w=null!=a.pairwiseFeedbackId,[j]=tc(),N=tp(j),C=(null==N?void 0:N.id)===a.id,T=a.status===b.nH.PENDING,k=a.status===b.nH.FAILED,I=T||k,R=(0,D.useMemo)(()=>Array.isArray(a.content)?a.content.map(e=>"text"===e.type?e.text:"").join(""):a.content,[a.content]),S="drawer"!==s,L="drawer"===s,O=r!==b.Jg.IMAGE,P=(0,D.useMemo)(()=>{let e=c.some(e=>{let t=d.find(t=>t.id===e);return(null==t?void 0:t.pairwiseFeedbackId)!=null});return c.includes(a.id)&&!e&&!T&&S},[T,c,a.id,d,S]),z=(0,D.useMemo)(()=>f&&l===b.lY.DIRECT&&!I,[f,l,I]),F=(0,D.useMemo)(()=>{var e,t;return a.pointwiseFeedbackId&&null!=(t=null==(e=x(a.pointwiseFeedbackId))?void 0:e.value)?t:null},[a.pointwiseFeedbackId,x]),G=(0,D.useMemo)(()=>{var e,t;return null!=(t=a.role===b.PG.ASSISTANT&&(null==(e=a.experimental_attachments)?void 0:e.some(e=>{var t;return null==(t=e.contentType)?void 0:t.startsWith("image")})))&&t},[a]),V=(0,D.useCallback)(()=>{null!=a.id&&u(a.id)},[u,a.id]),{downloadImages:W,shouldShowImageDownloadButton:Y}=function(e){let{userId:t,messages:a}=(0,U.g)(e=>e),n=(0,ex.g)(t=>t.models.find(t=>t.id===e.modelId)),s=a.find(t=>t.id===e.parentMessageIds[0]),r=!a7.un||ne();return{downloadImages:(0,D.useCallback)(async()=>{e.experimental_attachments&&await Promise.all(e.experimental_attachments.map(async a=>{var r;(null==(r=a.contentType)?void 0:r.startsWith("image"))&&await nt(a,e,null==n?void 0:n.publicName,s,t)}))},[e,null==n?void 0:n.publicName,s,t]),shouldShowImageDownloadButton:r}}(a),Q=(0,D.useCallback)(async e=>{if(null==e||null==a.modelId||a.pointwiseFeedbackId)return;A.z.capture({action:"pointwise_feedback",params:{mode:l,user_id:i,modality:r,value:e,evaluation_session_id:a.evaluationSessionId}});let t=m({messageId:a.id,modelId:a.modelId,value:e}),n=null;try{n=await (0,t_.ic)("pointwise_feedback")}catch(e){}try{let t=await a3({messageId:a.id,value:e,recaptchaV3Token:n});if(!t.success)throw Error("Failed to submit pointwise feedback: ".concat(t.error));A.z.capture({action:"pointwise_feedback_success",params:{mode:l,user_id:i,modality:r,value:e,evaluation_session_id:a.evaluationSessionId}})}catch(e){p(t.id),M.oR.error("Error submitting feedback")}},[a.id,a.modelId,a.pointwiseFeedbackId,a.evaluationSessionId,m,p,l,i,r]),q=(0,D.useMemo)(()=>{let e=[];return!I&&G&&r===b.Jg.IMAGE&&l===b.lY.DIRECT&&"treatment-1"===h&&e.push((0,y.jsx)(np,{message:a},"edit")),P&&!a.pointwiseFeedbackId&&e.push((0,y.jsx)(a6.G,{content:"Retry",children:(0,y.jsx)(E.$,{variant:"ghost",className:"size-3 rounded-md p-3",onClick:V,children:(0,y.jsx)(nr.A,{size:14})})},"retry")),S&&r===b.Jg.WEBDEV&&!v&&e.push((0,y.jsx)(a6.G,{content:"View Preview",children:(0,y.jsx)(E.$,{variant:"ghost",disabled:C,className:(0,B.cn)("rounded-md px-3 py-1 text-sm font-medium",C&&!T&&"!opacity-30",T||w?"bg-surface-primary text-interactive-normal border-border-faint hover:bg-surface-secondary hover:text-interactive-active border":"bg-header-primary text-primary-foreground hover:bg-header-secondary hover:text-primary-foreground"),onClick:g,children:C?"Viewing":"View"})},"view-preview")),!I&&r!==b.Jg.WEBDEV&&(G&&Y?(e.push((0,y.jsx)(a6.G,{content:"Download",children:(0,y.jsx)(E.$,{variant:"ghost",className:"size-3 rounded-md p-3",onClick:()=>void W(),children:(0,y.jsx)(nl.A,{size:14})})},"download")),r===b.Jg.IMAGE&&l!==b.lY.DIRECT&&"treatment-1"===h&&e.push((0,y.jsx)(np,{message:a},"edit"))):G||e.push((0,y.jsx)(a6.G,{content:"Copy",children:(0,y.jsx)(a8.i,{variant:"ghost",className:"size-3 rounded-md p-3",size:14,onClick:()=>o(R)})},"copy")),S&&null!=n&&O&&e.push((0,y.jsx)(a6.G,{content:"Expand",children:(0,y.jsx)(E.$,{variant:"ghost",className:"size-3 rounded-md p-3",onClick:()=>n(!0),children:(0,y.jsx)(ni.A,{size:14})})},"expand"))),S&&null!=n&&T&&O&&r!==b.Jg.WEBDEV&&e.push((0,y.jsx)(a6.G,{content:"Expand",children:(0,y.jsx)(E.$,{variant:"ghost",className:"size-3 rounded-md p-3",onClick:()=>n(!0),children:(0,y.jsx)(ni.A,{size:14})})},"expand")),L&&null!=n&&e.push((0,y.jsx)(a6.G,{content:"Close",children:(0,y.jsx)(E.$,{variant:"ghost",className:"size-3 rounded-md p-3",onClick:()=>n(!1),children:(0,y.jsx)(ek.A,{size:14})})},"close")),z&&e.push((0,y.jsx)(nh,{initialValue:F,onChange:Q},"pointwise-feedback")),e},[P,I,T,G,Y,S,L,O,V,W,o,R,n,a.pointwiseFeedbackId,r,z,F,Q,h,l,g,v,C]);return(0,y.jsx)("div",{className:(0,B.cn)("text-text-primary flex items-center gap-2 transition-opacity duration-300",t),"data-sentry-component":"MessageActions","data-sentry-source-file":"message-header.tsx",children:q})}function nI(e){let{renderExpandedMessage:t,setRenderExpandedMessage:a,message:n}=e,s=(0,ex.g)(e=>e.models),r=(0,D.useMemo)(()=>s.find(e=>n.modelId===e.id),[s,n.modelId]);return(0,y.jsxs)(a4._s,{open:t,onClose:()=>a(!1),"data-sentry-element":"Drawer","data-sentry-component":"MessageDrawer","data-sentry-source-file":"message-drawer.tsx",children:[(0,y.jsxs)(a4.gk,{className:"hidden","data-sentry-element":"DrawerTitle","data-sentry-source-file":"message-drawer.tsx",children:["Message from ",tP(n,s)]}),(0,y.jsx)(a4.zj,{className:"h-[calc(100%-4rem)] rounded-t-3xl md:absolute md:h-full md:rounded-t-3xl md:p-2 md:pb-0",container:"undefined"==typeof document?void 0:document.getElementById(eW),hideOverlay:!0,"data-sentry-element":"DrawerContent","data-sentry-source-file":"message-drawer.tsx",children:(0,y.jsxs)(tY,{messageLayoutMode:"drawer","data-sentry-element":"MessageContextProvider","data-sentry-source-file":"message-drawer.tsx",children:[(0,y.jsx)(nA,{message:n,model:r,setRenderExpandedMessage:a,selectedMessage:null,"data-sentry-element":"MessageHeader","data-sentry-source-file":"message-drawer.tsx"}),(0,y.jsx)("div",{className:"bg-surface-primary md:border-border-faint h-full !select-text overflow-y-auto md:border-x",onPointerDownCapture:e=>{e.nativeEvent.stopImmediatePropagation()},children:(0,y.jsx)("div",{className:"grid w-full gap-4 p-2 md:mx-auto md:max-w-[640px]",children:(0,y.jsx)("div",{className:"overflow-x-auto",children:(0,y.jsx)(a1,{message:n,"data-sentry-element":"MessageContent","data-sentry-source-file":"message-drawer.tsx"})})})})]})})]})}nA.displayName="MessageHeader";var nR=a(3574);function nS(e){let{message:t,messageLayoutMode:a,shouldShowGeneratingText:n,onToolResultOpenChange:s,messageRef:r}=e,[l,i]=(0,D.useState)(!1),o=t.status!==b.nH.PENDING&&r.current?r.current.scrollHeight:null,d=t.status!==b.nH.PENDING&&function(e){let t=Array.isArray(e.content)?aV(e.content):null;return!!t&&t.toolCalls.length>0}(t),c=d&&!l,u=d&&l,m=()=>{i(e=>!e)};return(0,y.jsx)("div",{className:(0,B.cn)("relative flex w-full flex-1 flex-col overflow-x-auto",{"border-border-faint border-t":"container"===a}),ref:r,"data-sentry-component":"WebDevMessageContentContainer","data-sentry-source-file":"webdev-message-content-container.tsx",children:(0,y.jsx)("div",{className:(0,B.cn)("min-w-0",{"p-3":"container"===a}),children:n?(0,y.jsx)(tV,{className:"text-sm",children:"Generating..."}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(a1,{message:t,onToolResultOpenChange:s,isCollapsed:c,contentHeight:o}),c&&(0,y.jsx)("div",{className:"flex justify-start pt-2",children:(0,y.jsxs)(E.$,{variant:"ghost",size:"sm",className:"text-text-tertiary flex items-center gap-1 p-0 text-sm hover:bg-transparent hover:opacity-100",onClick:m,children:["Show More ",(0,y.jsx)(e_.A,{size:16,className:"ml-1"})]})}),u&&(0,y.jsx)("div",{className:"flex justify-start pt-2",children:(0,y.jsxs)(E.$,{variant:"ghost",size:"sm",className:"text-text-tertiary flex items-center gap-1 px-0 py-1 text-sm hover:bg-transparent hover:opacity-100",onClick:m,children:["Show Less ",(0,y.jsx)(nR.A,{size:16,className:"ml-1"})]})})]})})})}var nD=a(11183),nM=a(76158);let nL="index.html",nO={PENDING:{statusText:"Building...",actionText:"Preview will be available soon"},ERROR:{statusText:"Something went wrong",actionText:"No preview available"},WINNER:{statusText:"",actionText:"Click to view"},LOSER:{statusText:"",actionText:"Click to view"},DONE:{statusText:"",actionText:"Click to view"}};function nP(e){let{message:t,onClick:a,voteStatus:n}=e,[s]=tc(),r=tp(s),{data:l}=nN(null!=r?r:null),{RiveComponent:i}=(0,ae.useRive)({src:"/rive/building-loop.riv",autoplay:!0}),o=function(e,t,a){if(e.status===b.nH.PENDING)return{status:"pending",...nO.PENDING,tileClassName:"bg-surface-secondary border-border-faint",iconColor:"text-interactive-normal",icon:nD.A,useRiveAnimation:!0};if(e.status===b.nH.FAILED||e.status===b.nH.FLAGGED)return{status:"error",...nO.ERROR,tileClassName:"bg-surface-secondary border-border-faint",iconColor:"text-interactive-normal",icon:nM.A};if(null!==t&&null!=e.pairwiseFeedbackId)return"win"===t||"tie"===t?{status:"winner",statusText:a,actionText:nO.WINNER.actionText,tileClassName:"bg-interactive-positive/10 border-interactive-positive",iconColor:"text-interactive-positive",icon:nD.A}:"bothbad"===t?{status:"bothbad",statusText:a,actionText:nO.LOSER.actionText,tileClassName:"bg-interactive-negative/10 border-interactive-negative",iconColor:"text-interactive-negative",icon:nD.A}:{status:"done",statusText:a,actionText:nO.DONE.actionText,tileClassName:"bg-interactive-link/10 border-interactive-link/30",iconColor:"text-interactive-link",icon:nD.A};return{status:"done",statusText:a,actionText:nO.DONE.actionText,tileClassName:"bg-interactive-link/10 border-interactive-link/30",iconColor:"text-interactive-link",icon:nD.A}}(t,n,(()=>{var e,t,a,n;let s=(null!=(t=null==l?void 0:l.files)?t:[]).concat(null!=(a=null==l?void 0:l.templateFiles)?a:[]);return 0===s.length?nL:null!=(n=null==(e=s[0])?void 0:e.path)?n:nL})()),d=o.icon,c=t.status===b.nH.FAILED||t.status===b.nH.FLAGGED;return(0,y.jsx)("div",{className:"mx-3 my-2","data-sentry-component":"WebDevTile","data-sentry-source-file":"webdev-tile.tsx",children:(0,y.jsx)(E.$,{variant:"ghost",className:"h-auto w-full p-0 hover:bg-transparent",onClick:()=>{c||null==a||a()},"data-sentry-element":"Button","data-sentry-source-file":"webdev-tile.tsx",children:(0,y.jsx)("div",{className:(0,B.cn)("w-full rounded-lg border p-4 transition-colors",c?"cursor-not-allowed":"cursor-pointer",o.tileClassName),children:(0,y.jsxs)("div",{className:"flex items-center gap-3",children:[(0,y.jsx)("div",{className:"flex-shrink-0",children:(0,y.jsx)("div",{className:"bg-surface-primary flex h-10 w-10 items-center justify-center rounded-lg",children:o.useRiveAnimation?(0,y.jsx)(i,{className:"h-5 w-5"}):(0,y.jsx)(d,{className:(0,B.cn)("h-5 w-5",o.iconColor)})})}),(0,y.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start justify-center",children:[(0,y.jsx)("div",{className:(0,B.cn)("mb-1 text-sm font-medium","error"===o.status?"text-text-tertiary":"text-text-primary"),children:o.statusText}),(0,y.jsx)("div",{className:"text-text-tertiary text-xs",children:o.actionText})]})]})})})})}var nz=a(75319);let nB=(0,w.createServerReference)("600a64364f9e46ef6cff3b407b7916bee36bd5cec9",w.callServer,void 0,w.findSourceMapURL,"createPairwiseFeedback");function nU(){let e=(0,U.g)(e=>e),{modelAId:t,modelBId:a}=(0,ex.g)(e=>e);return{handlePairwiseFeedbackSubmit:async(n,s,r,l,i)=>{if(null!=r&&null!=l)try{e.setIsVoteSubmitting(!0);let c={evaluationSessionId:e.id,messageAId:r,messageBId:l,modelAId:e.mode===b.lY.BATTLE?void 0:null!=t?t:void 0,modelBId:e.mode===b.lY.BATTLE?void 0:null!=a?a:void 0,value:n,didInspectBothMobileHorizontalResponses:i};if(A.z.capture({action:"chat_vote",params:{mode:e.mode,user_id:e.userId,modality:e.modality}}),e.mode===b.lY.BATTLE){var o,d;null==(d=window)||null==(o=d.gtag)||o.call(d,"event","conversion_event_default")}let{id:u}=e.addPairwiseFeedback(c),m=null;try{m=await s.challenge(),null==m&&console.error("Failed to get turnstile token")}catch(e){console.error("Turnstile challenge failed")}let p=null;try{p=await (0,t_.ic)("pairwise_feedback")}catch(e){console.error("Failed to get recaptcha v3 token")}A.z.capture({action:"chat_vote_turnstile_success",params:{mode:e.mode,user_id:e.userId,modality:e.modality}});let x=await nB({...c,turnstileToken:m,recaptchaV3Token:p});if(!x.success)throw e.deletePairwiseFeedback(u),M.oR.error("Failed to submit feedback"),Error("Failed to submit pairwise feedback");e.updatePairwiseFeedbackModels({pairwiseFeedbackId:u,modelAId:x.data.modelAId,modelBId:x.data.modelBId}),A.z.capture({action:"chat_vote_success",params:{mode:e.mode,user_id:e.userId,modality:e.modality,arenaId:x.data.arenaId}})}finally{e.resetViewedWebDevPreviews(),e.setIsVoteSubmitting(!1)}}}}function nF(){let{handlePairwiseFeedbackSubmit:e}=nU(),t=(0,U.g)(e=>e.setLeftVoteHoverState),a=(0,U.g)(e=>e.setRightVoteHoverState),n=(0,nz.bj)(e=>e),[s,r]=(0,U.g)(e=>e.lastMessageIds),l=()=>{t(null),a(null)};return{handleVote:t=>{e(t,n,s,r),l()},createIndividualVoteHandlers:e=>({handleMouseEnter:()=>{e===tg.BQ.a?t("win"):a("win")},handleMouseLeave:l}),createTieVoteHandlers:()=>{let e="bothbad";return{handleTieMouseEnter:()=>{t("tie"),a("tie")},handleBothBadMouseEnter:()=>{t(e),a(e)},handleMouseLeave:l}}}}function nH(){let{messageThreads:e}=tF(),t=e[0],a=null==t?void 0:t.get("a"),n=null==t?void 0:t.get("b"),s=nE(null!=a?a:null),r=nE(null!=n?n:null),[l,i]=(0,U.g)((0,H.k)(e=>[e.isVoteSubmitting,e.viewedWebDevPreviews]));return(0,D.useMemo)(()=>{if(l)return!1;let e=s||(null==a?void 0:a.id)!=null&&i.includes(a.id),t=r||(null==n?void 0:n.id)!=null&&i.includes(n.id);return e&&t},[l,i,null==a?void 0:a.id,null==n?void 0:n.id,s,r])}function nG(e){let{participantPosition:t}=e,{handleVote:a,createIndividualVoteHandlers:n}=nF(),s=nH(),r=t===tg.BQ.a?b.sb.MODEL_A:b.sb.MODEL_B,{handleMouseEnter:l,handleMouseLeave:i}=n(t);return(0,y.jsx)("div",{className:"p-2","data-sentry-component":"WebDevVoteButton","data-sentry-source-file":"webdev-vote-button.tsx",children:(0,y.jsx)(a6.G,{content:"View both previews to vote",wrapDisabled:!s,open:!s&&void 0,"data-sentry-element":"BasicTooltip","data-sentry-source-file":"webdev-vote-button.tsx",children:(0,y.jsx)(E.$,{onClick:()=>{a(r)},disabled:!s,variant:"outline",className:"hover:bg-interactive-positive/12 hover:text-interactive-positive hover:border-interactive-positive rounded-lg",onMouseEnter:l,onMouseLeave:i,"data-sentry-element":"Button","data-sentry-source-file":"webdev-vote-button.tsx",children:"".concat(t.toUpperCase()," is Better")})})})}function nV(e){let{message:t,selectedMessage:a,messageLayoutMode:n,className:s}=e,[r,l]=(0,D.useState)(!1),i=(0,D.useRef)(null),o=(0,D.useRef)(null),[d,c]=(0,D.useState)(!1),u=(0,D.useRef)(0),m=(0,ex.g)(e=>e.models.find(e=>t.modelId===e.id)),p=(0,U.g)(e=>e.modality),x=(0,U.g)(e=>e.mode),f=(0,U.g)(e=>e.pairwiseFeedbacks),h=(0,U.g)(e=>e.lastMessageIds.includes(t.id)),{latestMessages:g}=tF(),v=(0,eJ.d)("md"),w=nT(t),{hasError:j,contentString:N,reasoningText:E}=tU(t),C=Array.isArray(t.content)&&aV(t.content).toolCalls.length>0,T=null==a&&p!==b.Jg.IMAGE,A=T&&p!==b.Jg.WEBDEV,_=ny(t,f),k=(0,U.g)(e=>(0,K.au)(e).includes(t.id)?t.participantPosition===tg.BQ.a?e.leftVoteHoverState:e.rightVoteHoverState:null),I=(p===b.Jg.CHAT||p===b.Jg.WEBDEV)&&""===N&&!j&&!E&&!C,R=function(e){let{voteStatus:t,isSelected:a=!1,voteHoverState:n=null,isInDrawer:s=!1}=e;return["win","tie"].includes(null!=t?t:"")?a?"border-border-faint text-interactive-positive":s?"border-transparent text-interactive-positive":"border-interactive-positive text-interactive-positive":"bothbad"===t?s?"border-transparent text-interactive-negative":"border-interactive-negative text-interactive-negative":"win"===n||"tie"===n?"border-interactive-positive text-interactive-positive":"bothbad"===n?"border-interactive-negative text-interactive-negative":"lose"===t?"border-border-faint text-interactive-normal":null===t?"border-border-faint":null}({voteStatus:_,voteHoverState:k,isSelected:a===t.participantPosition}),S=(0,D.useCallback)(()=>{if(!i.current||!A)return;let{scrollTop:e,scrollHeight:t,clientHeight:a}=i.current;c(e+a<t-1)},[A]);(0,D.useEffect)(()=>{S()},[S]),(0,D.useEffect)(()=>{if(!o.current||!A)return;let e=new ResizeObserver(()=>{S()});return e.observe(o.current),()=>{e.disconnect()}},[S,A]);let{stayScrolled:M}=function(e){let{initialScroll:t=null,margin:a=0,runScroll:n=eq(e)}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,D.useRef)(null),r=(0,D.useCallback)(()=>{let t;return null!==e.current&&Math.ceil(e.current.scrollTop)>=(t=e.current).scrollHeight-t.clientHeight-a},[e,a]);(0,D.useEffect)(()=>{let t=()=>{s.current=r()},a=e.current;if(null!==a)return a.addEventListener("scroll",t),()=>a.removeEventListener("scroll",t)},[e,r]);let l=(0,D.useCallback)(t=>{let a;null!=e.current&&n(Math.min((a=e.current).scrollHeight-a.clientHeight,t))},[e,n]),i=(0,D.useCallback)(()=>{l(1/0)},[l]),o=(0,D.useCallback)(()=>(s.current&&i(),s.current),[i]);return e$(()=>{null!==t&&l(t),s.current=r()},[]),{scroll:l,stayScrolled:o,scrollBottom:i,isScrolled:r}}(i,{margin:20});(0,D.useLayoutEffect)(()=>{h&&M()},[M,t.content.length,h]);let L=(0,D.useCallback)(()=>{null!=i.current&&i.current.scrollTo({top:i.current.scrollHeight,behavior:"smooth"})},[]),O=(0,D.useCallback)(e=>{e?u.current+=1:u.current=Math.max(0,u.current-1)},[]);return(0,y.jsxs)(tY,{messageLayoutMode:n,"data-sentry-element":"MessageContextProvider","data-sentry-component":"AssistantMessage","data-sentry-source-file":"assistant-message.tsx",children:[(0,y.jsxs)("div",{className:(0,B.cn)("bg-surface-primary relative flex w-full min-w-0 flex-1 flex-col overflow-hidden transition-all duration-300",{"rounded-2xl border":"container"===n,"gap-2":"page"===n},R,s),children:[(0,y.jsx)(nA,{message:t,model:m,setRenderExpandedMessage:l,selectedMessage:a,"data-sentry-element":"MessageHeader","data-sentry-source-file":"assistant-message.tsx"}),p===b.Jg.WEBDEV&&v&&(0,y.jsx)(nP,{message:t,onClick:w,voteStatus:_}),p===b.Jg.WEBDEV?(0,y.jsx)(nS,{message:t,messageLayoutMode:n,shouldShowGeneratingText:I,onToolResultOpenChange:O,messageRef:i}):(0,y.jsx)(a2,{message:t,messageLayoutMode:n,shouldShowGeneratingText:I,onToolResultOpenChange:O,messageRef:i,contentRef:o,isScrollable:T,checkOverflow:S,hasOverflow:d,scrollToBottom:L}),(()=>{let e=g.every(e=>(null==e?void 0:e.status)===b.nH.SUCCESS||(null==e?void 0:e.status)===b.nH.FAILED);return p===b.Jg.WEBDEV&&null==_&&t.status!==b.nH.PENDING&&e&&x!==b.lY.DIRECT&&h})()&&(0,y.jsx)(nG,{participantPosition:t.participantPosition}),"page"===n&&(0,y.jsx)(nk,{message:t})]}),(0,y.jsx)(nI,{renderExpandedMessage:r,setRenderExpandedMessage:l,message:t,"data-sentry-element":"MessageDrawer","data-sentry-source-file":"assistant-message.tsx"})]})}function nW(e){let{message:t}=e,[,a]=(0,no.A)(),{contentString:n}=tU(t),s=tB(t),r=(0,D.useRef)(null),[l,i]=(0,D.useState)(null);return(0,D.useEffect)(()=>{let e=r.current;if(!e)return;let t=new ResizeObserver(e=>{for(let t of e)i(t.contentRect.height)});return t.observe(e),()=>{t.disconnect()}},[]),(0,y.jsx)(tY,{messageLayoutMode:"container","data-sentry-element":"MessageContextProvider","data-sentry-component":"UserMessage","data-sentry-source-file":"user-message.tsx",children:(0,y.jsx)("div",{className:"group flex max-w-[min(768px,100%)] flex-col gap-1 self-end",children:(0,y.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,y.jsx)(t6,{message:t,"data-sentry-element":"MessageAttachments","data-sentry-source-file":"user-message.tsx"}),(0,y.jsxs)("div",{className:"flex min-w-0 flex-1 items-center justify-end gap-2",children:[(0,y.jsx)(a8.i,{variant:"ghost",size:12,className:"text-text-secondary hover:text-text-primary size-6 flex-shrink-0 rounded-md p-0 opacity-0 transition-opacity duration-200 group-hover:opacity-100",onClick:()=>a(n),"data-sentry-element":"CopyButton","data-sentry-source-file":"user-message.tsx"}),(0,y.jsx)("div",{ref:r,className:(0,B.cn)("bg-surface-secondary w-fit min-w-0 max-w-prose flex-1 rounded-lg px-3 py-2 transition-[border-radius] duration-150",{"rounded-3xl":(null!=l?l:40)<=40}),children:(0,y.jsx)(ai.A,{id:t.id,content:n,className:(0,B.cn)({"text-interactive-negative":s}),"data-sentry-element":"MemoizedMarkdown","data-sentry-source-file":"user-message.tsx"})})]})]})})})}var nY=a(66965),nQ=a(75646),nJ=a(52378),nq=a(90574),n$=a(31924),nK=a(34828);let nX=D.createContext({scrollLeftOnCarouselId:()=>{},scrollRightOnCarouselId:()=>{},registerCarousel:()=>{}}),nZ=e=>{let{children:t}=e,[a,n]=D.useState({}),s=D.useCallback(e=>{var t;a[e]&&(null==(t=a[e])||t.left())},[a]),r=D.useCallback(e=>{var t;a[e]&&(null==(t=a[e])||t.right())},[a]);return(0,y.jsx)(nX.Provider,{value:{scrollLeftOnCarouselId:s,scrollRightOnCarouselId:r,registerCarousel:(e,t,a)=>{n(n=>({...n,[e]:{left:t,right:a}}))}},"data-sentry-element":"unknown","data-sentry-component":"CarouselTouchAreaContextProvider","data-sentry-source-file":"carousel.tsx",children:t})},n0=D.createContext(null);function n1(){let e=D.useContext(n0);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}function n2(){let e=D.useContext(nX);if(!e)throw Error("useCarouselTouchArea must be used within a <CarouselTouchArea />");return e}let n4=e=>{let{className:t,latestMessages:a,...n}=e,s=D.useRef(null),{scrollLeftOnCarouselId:r,scrollRightOnCarouselId:l}=n2(),i=(0,nJ.J)(...a.map(e=>e.id)),o=D.useCallback(e=>{let t=e.touches[0];t&&(s.current={x:t.clientX,y:t.clientY})},[]),d=D.useCallback(e=>{if(!s.current)return;let t=e.changedTouches[0];if(!t)return;let a=t.clientX-s.current.x;Math.abs(a)>Math.abs(t.clientY-s.current.y)&&Math.abs(a)>50&&(a>0?r(i):l(i)),s.current=null},[s,r,l]);return(0,y.jsx)("div",{className:(0,B.cn)("h-full min-h-12 w-full flex-grow",t),onTouchStart:o,onTouchEnd:d,...n,"data-sentry-component":"CarouselTouchArea","data-sentry-source-file":"carousel.tsx"})},n3=e=>{let{orientation:t="horizontal",opts:a,setApi:n,plugins:s,edgeToEdgePadding:r,className:l,children:i,messageA:o,messageB:d,...c}=e,[u,m]=(0,n$.A)({...a,axis:"horizontal"===t?"x":"y"},s),[p,x]=D.useState(!1),[f,h]=D.useState(!1),[g,v]=D.useState(!1),{registerCarousel:b}=n2(),w=D.useCallback(e=>{x(e.canScrollPrev()),h(e.canScrollNext())},[]),j=D.useCallback(()=>{null==m||m.scrollPrev()},[m]),N=D.useCallback(()=>{null==m||m.scrollNext()},[m]),E=D.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),j()):"ArrowRight"===e.key&&(e.preventDefault(),N())},[j,N]);return D.useEffect(()=>{b((0,nJ.J)(null==o?void 0:o.id,null==d?void 0:d.id),j,N)},[j,N]),D.useEffect(()=>{m&&n&&n(m)},[m,n]),D.useEffect(()=>{if(m)return w(m),m.on("reInit",w),m.on("select",w),()=>{null==m||m.off("select",w)}},[m]),(0,y.jsx)(n0.Provider,{value:{carouselRef:u,api:m,opts:a,orientation:t||((null==a?void 0:a.axis)==="y"?"vertical":"horizontal"),scrollPrev:j,scrollNext:N,canScrollPrev:p,canScrollNext:f,edgeToEdgePadding:r,hasInteracted:g,setHasInteracted:v},"data-sentry-element":"unknown","data-sentry-component":"Carousel","data-sentry-source-file":"carousel.tsx",children:(0,y.jsx)("div",{onKeyDownCapture:E,className:(0,B.cn)("relative h-full",l,{"-mx-[--e2e-padding]":"horizontal"===t,"-my-[--e2e-padding]":"vertical"===t}),style:{"--e2e-padding":r},role:"region","aria-roledescription":"carousel",...c,children:i})})};n3.displayName="Carousel";let n5=e=>{let{className:t,ref:a,...n}=e,{carouselRef:s,orientation:r}=n1();return(0,y.jsx)("div",{ref:s,className:(0,B.cn)("overflow-hidden",{"px-[--e2e-padding]":"horizontal"===r,"py-[--e2e-padding]":"vertical"===r}),"data-sentry-component":"CarouselContent","data-sentry-source-file":"carousel.tsx",children:(0,y.jsx)("div",{ref:a,className:(0,B.cn)("flex","horizontal"===r?"-ml-4":"-mt-4 flex-col",t),...n})})},n6=e=>{let{className:t,ref:a,...n}=e,{orientation:s}=n1();return(0,y.jsx)("div",{ref:a,role:"group","aria-roledescription":"slide",className:(0,B.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===s?"pl-4":"pt-4",t),...n,"data-sentry-component":"CarouselItem","data-sentry-source-file":"carousel.tsx"})},n8=D.forwardRef((e,t)=>{let{className:a,variant:n="outline",size:s="icon",hideOnDisable:r=!1,...l}=e,{orientation:i,scrollPrev:o,canScrollPrev:d}=n1();return(0,y.jsxs)(E.$,{ref:t,variant:n,size:s,className:(0,B.cn)("absolute h-8 w-8 rounded-full","horizontal"===i?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",{hidden:r&&!d},a),disabled:!d,onClick:o,...l,children:[(0,y.jsx)(nK.A,{className:"h-4 w-4"}),(0,y.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});n8.displayName="CarouselPrevious";let n9=D.forwardRef((e,t)=>{let{className:a,variant:n="outline",size:s="icon",hideOnDisable:r=!1,...l}=e,{orientation:i,scrollNext:o,canScrollNext:d,hasInteracted:c}=n1(),u=(0,B.cn)("absolute h-8 w-8 rounded-full","horizontal"===i?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",{hidden:r&&!d});return(0,y.jsxs)(E.$,{ref:t,variant:c?n:"tertiary",size:s,className:(0,B.cn)(u,a),disabled:!d,onClick:()=>o(),...l,children:[(0,y.jsx)(R.A,{className:(0,B.cn)("h-4 w-4",c?"text-interactive":"text-interactive-inverted")}),(0,y.jsx)("span",{className:"sr-only",children:"Next slide"})]})});n9.displayName="CarouselNext";let n7=e=>{let{className:t,messageA:a,messageB:n,ref:s,...r}=e,{api:l,setHasInteracted:i}=n1(),[o,d]=D.useState(0),[c,u]=D.useState(0),[m,p]=D.useState(new Set),x=(e=>{let[t,a]=e;return(0,U.g)((e=>{let[t,a]=e,n="string"==typeof t?t:null==t?void 0:t.id,s="string"==typeof a?a:null==a?void 0:a.id;return(0,nq.Mz)([e=>e.pairwiseFeedbacks],e=>{var t;return null==(t=e.find(e=>e.messageAId===n||e.messageBId===s))?void 0:t.value})})([t,a]))})([a,n]),f=(0,U.g)(e=>e.setDidInspectBothMobileHorizontalResponses),h=null==a?void 0:a.status,g=null==n?void 0:n.status;D.useEffect(()=>{x===b.sb.MODEL_A?null==l||l.scrollTo(0):x===b.sb.MODEL_B&&(null==l||l.scrollTo(1))},[x,l]);let v=D.useCallback(e=>{u(e.scrollSnapList().length),d(e.selectedScrollSnap())},[]);D.useEffect(()=>{if(l)return l.on("reInit",v),l.on("select",v),l.on("slidesChanged",v),()=>{null==l||l.off("reInit",v),null==l||l.off("select",v),null==l||l.off("slidesChanged",v)}},[l]),D.useEffect(()=>{0!==o&&i(!0),(0!==o||h!==b.nH.PENDING)&&(1!==o||g!==b.nH.PENDING)&&p(e=>{let t=new Set(e);return t.add(o),t})},[o,h,g]),D.useEffect(()=>{a&&n&&f(2===m.size,a.id,n.id)},[m,f]);let w=D.useMemo(()=>Array.from({length:c}).map((e,t)=>(0,y.jsx)(se,{isSelected:t===o,onSelected:()=>null==l?void 0:l.scrollTo(t)},t)),[c,o]);return c<=1?null:(0,y.jsx)("div",{ref:s,className:(0,B.cn)("flex w-full justify-center",t),...r,"data-sentry-component":"CarouselControls","data-sentry-source-file":"carousel.tsx",children:w})};n7.displayName="CarouselControls";let se=e=>{let{className:t,isSelected:a,onSelected:n,ref:s,...r}=e;return(0,y.jsx)("button",{ref:s,className:(0,B.cn)("cursor-pointer px-1 py-2",t),onClick:n,...r,"data-sentry-component":"CarouselControlChip","data-sentry-source-file":"carousel.tsx",children:(0,y.jsx)("div",{className:(0,B.cn)("bg-interactive-normal hover:bg-interactive-active h-2 rounded-lg transition-all",a?"w-6":"w-2 opacity-[24%]")})})};se.displayName="CarouselControlChip";var st=a(62364);let sa=D.forwardRef((e,t)=>{let{className:a,children:n,...s}=e;return(0,y.jsxs)(st.bL,{ref:t,className:(0,B.cn)("relative overflow-hidden",a),...s,children:[(0,y.jsx)(st.LM,{className:"h-full w-full rounded-[inherit] [&>div]:!block [&>div]:!h-full",children:n}),(0,y.jsx)(sn,{}),(0,y.jsx)(st.OK,{})]})});sa.displayName=st.bL.displayName;let sn=D.forwardRef((e,t)=>{let{className:a,orientation:n="vertical",...s}=e;return(0,y.jsx)(st.VM,{ref:t,orientation:n,className:(0,B.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...s,children:(0,y.jsx)(st.lr,{className:"bg-border relative flex-1 rounded-full"})})});sn.displayName=st.VM.displayName;var ss=a(54302);let sr="l-mvo",sl=(0,k.eU)(function(){try{let e=localStorage.getItem(sr);return"true"===e}catch(e){return!1}}());function si(){let[e,t]=(0,I.fp)(sl);return{hasBeenShown:e,markAsShown:()=>{try{localStorage.setItem(sr,"true")}catch(e){console.error("Failed to save shown state:",e)}t(!0)}}}function so(e){let{open:t,onOpenChange:a}=e,{hasBeenShown:n,markAsShown:s}=si(),{resolvedTheme:r}=(0,at.D)(),l=()=>{s(),null==a||a(!1)};return(0,y.jsx)(a4._s,{open:null!=t?t:!n,onOpenChange:e=>{e||l(),null==a||a(e)},"data-sentry-element":"Drawer","data-sentry-component":"MobileVoteOnboarding","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:(0,y.jsxs)(a4.zj,{"data-sentry-element":"DrawerContent","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:[(0,y.jsxs)(a4.BE,{className:"flex flex-col items-center gap-3","data-sentry-element":"DrawerHeader","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:[(0,y.jsx)("div",{className:"h-2"}),(0,y.jsx)(ei.A,{size:32,"data-sentry-element":"Swords","data-sentry-source-file":"mobile-vote-onboarding.tsx"}),(0,y.jsx)(a4.gk,{"data-sentry-element":"DrawerTitle","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:"How voting works"}),(0,y.jsx)(a4.I6,{"data-sentry-element":"DrawerDescription","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:'We\'ll show you 2 responses from 2 anonymous models. Please vote on the response you think is best. We will reveal the models afterwards. If you like both responses, use "It\'s a tie" button. If you do not like either, please use the "Both are bad" button.'}),(0,y.jsx)("div",{children:(0,y.jsxs)(N.Link,{href:"/how-it-works",className:"flex items-center gap-1",target:"_blank","data-sentry-element":"Link","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:[(0,y.jsx)("span",{className:"text-sm font-normal",children:"Learn more about How it Works"}),(0,y.jsx)(R.A,{size:14,"data-sentry-element":"ArrowRight","data-sentry-source-file":"mobile-vote-onboarding.tsx"})]})}),(0,y.jsx)("img",{src:"dark"===r?"/images/mobile-vote-onboarding-dark.png":"/images/mobile-vote-onboarding-light.png",alt:"Mobile Voting Onboarding Experience",className:"mt-3 w-full"})]}),(0,y.jsx)(a4.tb,{"data-sentry-element":"DrawerFooter","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:(0,y.jsx)(a4.cp,{asChild:!0,"data-sentry-element":"DrawerClose","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:(0,y.jsx)(E.$,{size:"lg",variant:"primary",onClick:l,"data-sentry-element":"Button","data-sentry-source-file":"mobile-vote-onboarding.tsx",children:"Got it"})})})]})})}var sd=a(58466),sc=a(41936),su=a(14475),sm=a(31425),sp=a(98587),sx=a(66516),sf=a(96379);function sh(e,t){let a=(0,D.useRef)(e),n=(0,D.useRef)(null);(0,D.useEffect)(()=>{a.current=e},[e]);let s=(0,D.useCallback)(function(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{a.current(...s)},t)},[t]);return(0,D.useEffect)(()=>()=>{n.current&&clearTimeout(n.current)},[]),s}var sg=a(8876);function sv(e){let{model:t,onRemove:a,disabled:n=!1}=e;return(0,y.jsxs)("div",{className:"text-text-tertiary bg-surface-secondary flex items-center gap-2 rounded-[4px] py-2.5 pl-3 text-sm","data-sentry-component":"ModelSelected","data-sentry-source-file":"model-selected.tsx",children:[(0,y.jsx)(eR.D,{className:"size-4 flex-none",organization:t.organization,"data-sentry-element":"ModelIcon","data-sentry-source-file":"model-selected.tsx"}),(0,y.jsx)("span",{className:"text-interactive-normal flex-1 truncate font-mono text-sm",children:t.publicName}),(0,y.jsx)("div",{className:"flex gap-2 pr-3",children:(0,y.jsx)(a6.G,{content:n?"Model count is locked for this conversation":"Remove model",wrapDisabled:n,"data-sentry-element":"BasicTooltip","data-sentry-source-file":"model-selected.tsx",children:(0,y.jsx)(E.$,{type:"button",variant:"ghost",size:"icon",onClick:a,disabled:n,className:"text-interactive-negative hover:text-interactive-negative disabled:cursor-not-allowed disabled:opacity-60","data-sentry-element":"Button","data-sentry-source-file":"model-selected.tsx",children:(0,y.jsx)(sg.A,{className:"size-4","data-sentry-element":"CircleMinus","data-sentry-source-file":"model-selected.tsx"})})})})]})}var sy=a(15049);function sb(e){let{modelA:t,modelB:a,onAddModel:n,onRemoveA:s,onRemoveB:r,disabledFlags:l,isAddMandatory:i}=e;return(0,y.jsxs)("div",{className:"flex flex-col gap-2 pb-4","data-sentry-component":"ModelSelectorSelected","data-sentry-source-file":"model-selector-selected.tsx",children:[t&&(0,y.jsx)(sv,{model:t,onRemove:s,disabled:null==l?void 0:l.isRemoveADisabled}),a&&(0,y.jsx)(sv,{model:a,onRemove:r,disabled:null==l?void 0:l.isRemoveBDisabled}),!a&&t&&(0,y.jsxs)("button",{type:"button",className:(0,B.cn)("text-text-tertiary border-border-strong hover:bg-surface-secondary flex items-center gap-2 rounded-[4px] border-[1px] border-dashed py-2.5 pl-3 text-base transition-colors disabled:cursor-not-allowed disabled:opacity-60",i&&"text-interactive-negative border-interactive-negative/[0.24] bg-interactive-negative/[0.12] hover:bg-interactive-negative/[0.12]"),onClick:n,disabled:null==l?void 0:l.isAddDisabled,children:[(0,y.jsx)(sy.A,{className:"size-5"}),"Add Model"]})]})}var sw=a(39768),sj=a(38442);function sN(e){var t,a,n,s,r;let{capabilities:l}=e,i="object"==typeof(null==l||null==(t=l.inputCapabilities)?void 0:t.image)&&(null==l||null==(n=l.inputCapabilities)||null==(a=n.image)?void 0:a.requiresUpload)===!0;return(0,y.jsxs)("div",{className:"flex gap-3","data-sentry-component":"ModelsCapabilities","data-sentry-source-file":"models-capabilities.tsx",children:[(null==l||null==(s=l.outputCapabilities)?void 0:s.search)&&(0,y.jsx)(t7.A,{className:"text-text-tertiary size-4"}),i&&(0,y.jsx)(sw.A,{className:"text-text-tertiary size-4"}),(null==l||null==(r=l.outputCapabilities)?void 0:r.image)&&(0,y.jsx)(sj.A,{className:"text-text-tertiary size-4"})]})}var sE=a(42549),sC=a(10536);let sT=[{icon:(0,y.jsx)(sE.A,{className:"size-4"}),label:"Text",id:"text"},{icon:(0,y.jsx)(sC.A,{className:"size-4"}),label:"WebDev",id:"webdev"},{icon:(0,y.jsx)(sj.A,{className:"size-4"}),label:"Image",id:"text-to-image"},{icon:(0,y.jsx)(t7.A,{className:"size-4"}),label:"Search",id:"search"}];function sA(e){let{searchValue:t,setSearchValue:a,models:n,onPicked:s,onSelectModel:r,excludeModelsIds:l,currentArena:i,onArenaChange:o,anchorRequiresImageUpload:d,selectedArenaOptionId:c,disabledArenaOptionIds:u}=e,m=(0,D.useRef)(null),[p,x]=(0,D.useState)(!1),f=(0,D.useMemo)(()=>n.filter(e=>!(null==l?void 0:l.includes(e.id))).filter(e=>{var a;return!(null!=t?t:"").trim()||(null==(a=e.publicName)?void 0:a.toLowerCase().includes(t.toLowerCase()))}),[n,l,t]),h=f.length>=3&&!p,g=sh((e,t,a)=>{A.z.capture({action:"model_search_completed",params:{query:e,results_count:t,arena:null!=a?a:void 0}})},500),v=e=>{if(e===t)return;a(e);let s=(null!=e?e:"").trim();if(!s)return;let r=n.filter(e=>!(null==l?void 0:l.includes(e.id))).filter(e=>{var t;return!s||(null==(t=e.publicName)?void 0:t.toLowerCase().includes(s.toLowerCase()))}).length;g(s,r,i)};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"relative",children:[(0,y.jsx)(sf.p,{placeholder:"Search models",value:t,onChange:e=>v(e.target.value),className:"rounded-[4px] pr-8","data-sentry-element":"Input","data-sentry-source-file":"model-selector-drawer-content.tsx"}),t&&(0,y.jsx)("button",{onClick:()=>v(""),className:"hover:bg-surface-secondary absolute right-2 top-1/2 -translate-y-1/2 rounded-md p-1 transition-colors",type:"button",children:(0,y.jsx)(ek.A,{className:"text-text-tertiary size-3"})})]}),(0,y.jsx)("div",{className:"flex gap-2 overflow-x-auto py-2",children:sT.map(e=>(0,y.jsxs)(E.$,{variant:"outline",disabled:null==u?void 0:u.includes(e.id),onClick:()=>{c===e.id?o("text"):o(e.id)},className:(0,B.cn)("flex-1 rounded-[4px]",c===e.id&&"text-text-tertiary bg-surface-secondary border-border-faint hover:text-text-tertiary"),children:[e.icon,e.label]},e.id))}),(0,y.jsx)("div",{className:"text-text-secondary py-2 text-sm font-medium",children:c?(()=>{var e;let t=null==(e=sT.find(e=>e.id===c))?void 0:e.label;return t?"Top ".concat(t," Models"):"Select an Arena"})():"Select an Arena"}),(0,y.jsx)("div",{className:"no-scrollbar max-h-[400px] overflow-y-auto",ref:m,onScroll:e=>{let t=e.currentTarget;x(t.scrollTop+t.clientHeight>=t.scrollHeight-1)},children:0===f.length?(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center px-4 py-8 text-center",children:[(0,y.jsx)("div",{className:"text-text-tertiary mb-3",children:(0,y.jsx)(eb.A,{className:"mr-2 size-6 shrink-0 opacity-50"})}),(0,y.jsx)("p",{className:"text-text-secondary mb-1 text-sm",children:"No models found"}),(0,y.jsx)("p",{className:"text-text-tertiary text-xs",children:"Try adjusting your search term"})]}):(0,y.jsx)("div",{className:"divide-border-faint no-scrollbar divide-y divide-solid",children:f.map(e=>{var t,a;let n=null==(a=e.capabilities)||null==(t=a.inputCapabilities)?void 0:t.image,l="object"==typeof n&&(null==n?void 0:n.requiresUpload)===!0,i=null!=d&&l!==d;return(0,y.jsxs)("button",{type:"button",disabled:i,onClick:()=>{r(e.id),v(""),s()},className:(0,B.cn)("hover:bg-surface-secondary flex w-full items-center gap-2 px-3 py-3.5 text-left transition-colors disabled:cursor-not-allowed",i&&"opacity-20"),children:[(0,y.jsx)("span",{className:"text-text-tertiary text-sm font-medium",children:null!=e.rank?"".concat(e.rank,"."):""}),(0,y.jsx)(eR.D,{className:"size-4 flex-none",organization:e.organization}),(0,y.jsx)("span",{className:"text-interactive-normal flex-1 truncate font-mono text-sm",children:e.publicName}),(0,y.jsx)(sN,{capabilities:e.capabilities})]},e.id)})})}),(0,y.jsx)("div",{className:(0,B.cn)("pointer-events-none absolute bottom-0 left-0 right-0 h-[60px] rounded-b-3xl bg-[linear-gradient(0deg,rgba(253,253,254,1)_0%,rgba(253,253,254,0)_100%)] transition-opacity duration-150 ease-out dark:bg-[linear-gradient(0deg,rgba(29,29,32,1)_0%,rgba(29,29,32,0)_100%)]",h?"opacity-100":"opacity-0")})]})}function s_(e){let{mode:t,modelA:a,modelB:n,searchValue:s,setSearchValue:r,models:l,handleRemoveA:i,handleRemoveB:o,handleSelectModel:d,handleAddModel:c,handleModelPicked:u,getExcludedModelIds:m,currentArena:p,onArenaChange:x,anchorRequiresImageUpload:f,selectedArenaOptionId:h,disabledArenaOptionIds:g,disabledFlags:v,isAddMandatory:b}=e;return(0,y.jsx)("div",{className:"px-4 pb-4 pt-6","data-sentry-component":"ModelSelectorDrawerContent","data-sentry-source-file":"model-selector-drawer-content.tsx",children:"selected"===t&&null!=a?(0,y.jsx)(sb,{modelA:a,modelB:n,onAddModel:c,onRemoveA:i,onRemoveB:o,disabledFlags:v,isAddMandatory:b}):(0,y.jsxs)(y.Fragment,{children:[(null!=a?a:n)&&(0,y.jsxs)("div",{className:"flex flex-col gap-2 pb-4",children:[a&&(0,y.jsx)(sv,{model:a,onRemove:i,disabled:!!(null==v?void 0:v.isRemoveADisabled)}),n&&(0,y.jsx)(sv,{model:n,onRemove:o,disabled:!!(null==v?void 0:v.isRemoveBDisabled)})]}),(0,y.jsx)(sA,{searchValue:s,setSearchValue:r,models:l,onPicked:u,onSelectModel:d,excludeModelsIds:m(),currentArena:p,onArenaChange:x,anchorRequiresImageUpload:f,selectedArenaOptionId:h,disabledArenaOptionIds:g})]})})}function sk(e){let{classNameContainer:t,className:a,size:n=60,transition:s,onAnimationComplete:r,style:l}=e;return(0,y.jsx)("div",{className:(0,B.cn)("pointer-events-none absolute inset-[-1px] rounded-[inherit] border border-transparent [mask-clip:padding-box,border-box] [mask-composite:intersect] [mask-image:linear-gradient(transparent,transparent),linear-gradient(#000,#000)]",t),"data-sentry-component":"BorderTrail","data-sentry-source-file":"border-trail.tsx",children:(0,y.jsx)(tG.P.div,{className:(0,B.cn)("absolute aspect-square bg-zinc-500",a),style:{width:n,offsetPath:"rect(0 auto auto 0 round ".concat(n,"px)"),...l},animate:{offsetDistance:["0%","100%"]},transition:s||{repeat:1/0,duration:5,ease:"linear"},onAnimationComplete:r,"data-sentry-element":"unknown","data-sentry-source-file":"border-trail.tsx"})})}sj.A,t7.A;var sI=a(53695),sR=a(42900),sS=a(97165);let sD=(0,sS.KU)(()=>localStorage),sM=(0,sS.tG)("model-settings-menu-education-dismissed",!1,sD);function sL(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,J._P)("3m-model-selector"),[a,n]=(0,I.fp)(sM),s=(0,sR.R)(),r=(0,D.useCallback)(()=>{n(!0)},[n]),l=!a&&"treatment-2"===t&&s,i=(0,D.useMemo)(()=>l&&e,[l,e]);return{shouldHighlight:l,shouldShowEducation:i,dismissEducation:r}}function sO(e){let{modelA:t,modelB:a,className:n,onClick:s,onAnchorChange:r,ref:l,...i}=e,{shouldHighlight:o}=sL(),d=(0,D.useCallback)(e=>{"function"==typeof l?l(e):l&&"object"==typeof l&&(l.current=e),null==r||r(e)},[l,r]);return(0,y.jsx)(a6.G,{content:"Settings","data-sentry-element":"BasicTooltip","data-sentry-component":"ModelSelectorTrigger","data-sentry-source-file":"model-selector-trigger.tsx",children:(0,y.jsxs)(E.$,{ref:d,type:"button",variant:"outline",size:t||a?"xs":"icon","aria-label":"Open model selector",className:(0,B.cn)("relative z-10 gap-1.5",t&&a?"w-auto":"max-w-8",o&&"border-border-faint dark:border-border-faint",n),onClick:e=>{A.z.capture({action:"model_settings_menu_clicked",params:{has_model_a:!!t,has_model_b:!!a}}),null==s||s(e)},...i,"data-sentry-element":"Button","data-sentry-source-file":"model-selector-trigger.tsx",children:[o&&(0,y.jsx)(sk,{size:28,transition:{repeat:1/0,duration:3,ease:"linear"},classNameContainer:"inset-[-1px]",className:"from-border-faint to-border-faint dark:from-border-faint dark:to-border-faint h-[12px] rounded-full bg-gradient-to-r via-indigo-400 dark:via-indigo-400"}),t&&(0,y.jsx)(eR.D,{className:"size-4 min-w-4",organization:t.organization}),t&&a&&(0,y.jsx)("div",{className:"bg-border-faint h-4 w-[0.5px]"}),a&&(0,y.jsx)(eR.D,{className:"size-4 min-w-4",organization:a.organization}),t||a?null:(0,y.jsx)(sI.A,{className:"size-4"})]})})}let sP={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},sz={duration:.15,ease:"easeOut"},sB=["google","deepseek","openai","alibaba","anthropic","meta","xai","mistral","minimax","perplexity"];function sU(){return(0,y.jsx)(tG.P.div,{className:"mb-2 flex flex-row items-center justify-center gap-4 sm:mb-4 sm:gap-5",initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:.02}}},"data-sentry-element":"unknown","data-sentry-component":"ModelBanner","data-sentry-source-file":"welcome-screen.tsx",children:sB.map(e=>{let t="scale-100";return"deepseek"===e||"anthropic"===e||"meta"===e?t="scale-125":("xai"===e||"mistral"===e)&&(t="scale-90"),(0,y.jsx)(tG.P.div,{variants:sP,transition:{duration:.2,ease:"easeOut"},children:(0,y.jsx)(eR.D,{organization:e,isPrivate:!1,variant:"colored",className:(0,B.cn)("pointer-events-none size-3.5 select-none sm:size-4",t)})},e)})})}function sF(){let e=(0,_.kH)(e=>e.user);return(0,y.jsx)(N.Link,{href:"/leaderboard",className:"text-interactive-link hover:text-interactive-link/80 after:bg-interactive-link relative inline transition-colors after:absolute after:bottom-0 after:left-0 after:h-[1px] after:w-0 after:transition-all after:duration-200 hover:after:w-full",onClick:()=>{A.z.capture({action:"view_leaderboard_from_chat",params:{user_id:null==e?void 0:e.id}})},"data-sentry-element":"Link","data-sentry-component":"AnimatedLeaderboardLink","data-sentry-source-file":"welcome-screen.tsx",children:"leaderboard"})}function sH(e){let{className:t}=e;return(0,y.jsx)("div",{className:t,"data-sentry-component":"WelcomeScreen","data-sentry-source-file":"welcome-screen.tsx",children:(0,y.jsx)("div",{className:"flex flex-col items-center justify-center gap-6 sm:mb-6",children:(0,y.jsx)("div",{className:"flex flex-col items-center gap-4",children:(0,y.jsxs)("div",{className:"flex w-full max-w-[800px] flex-col items-center",children:[(0,y.jsx)(sU,{"data-sentry-element":"ModelBanner","data-sentry-source-file":"welcome-screen.tsx"}),(0,y.jsx)(tG.P.h1,{className:"font-heading mb-2 text-center text-[28px] font-medium leading-[2.5rem] sm:text-[42px] sm:font-medium",initial:"hidden",animate:"visible",variants:sP,transition:{...sz,delay:.2},"data-sentry-element":"unknown","data-sentry-source-file":"welcome-screen.tsx",children:"Find the best AI for you"}),(0,y.jsxs)(tG.P.p,{className:"text-text-secondary text-center text-base font-normal sm:text-sm sm:font-normal",initial:"hidden",animate:"visible",variants:sP,transition:{...sz,delay:.3},"data-sentry-element":"unknown","data-sentry-source-file":"welcome-screen.tsx",children:["Compare answers across top AI models, share your feedback and power our public ",(0,y.jsx)(sF,{"data-sentry-element":"AnimatedLeaderboardLink","data-sentry-source-file":"welcome-screen.tsx"})]})]})})})})}var sG=a(295);function sV(e){let{anchorEl:t}=e,a=(0,eJ.d)("md"),n=(0,D.useRef)(null),[s,r]=(0,D.useState)(null),{shouldShowEducation:l,dismissEducation:i}=sL(null!=t);if((0,D.useLayoutEffect)(()=>{if(!l)return;let e=e=>{let t=e.target;if(!t)return;let a=n.current;!(!a||a.contains(t))&&(("function"==typeof e.composedPath?e.composedPath():[]).includes(a)||i())};return document.addEventListener("pointerdown",e,!0),()=>{document.removeEventListener("pointerdown",e,!0)}},[l,t,i]),(0,D.useLayoutEffect)(()=>{let e,a,s;if(!l||!t)return;let i=()=>{var e,a;let s=t.getBoundingClientRect();if(!(s.width>0||s.height>0))return void r(null);let l=window.scrollY,i=window.scrollX,o=window.innerWidth,d=s.left+i+s.width/2,c=null!=(a=null==(e=n.current)?void 0:e.offsetWidth)?a:0,u=0;if(c>0){let e=d-c/2,t=i+16-e,a=e+c-(i+o-16);t>0?u=t:a>0&&(u=-a)}r({top:s.top+l,left:d,shift:u})},o=()=>{!e&&"undefined"!=typeof ResizeObserver&&n.current&&(e=new ResizeObserver(i)).observe(n.current)},d=0,c=()=>{(1&d++)==0&&(i(),o()),a=requestAnimationFrame(c)};return a=requestAnimationFrame(c),i(),o(),window.addEventListener("resize",i),window.addEventListener("scroll",i,!0),"undefined"!=typeof ResizeObserver&&(s=new ResizeObserver(i)).observe(t),()=>{null!=a&&cancelAnimationFrame(a),window.removeEventListener("resize",i),window.removeEventListener("scroll",i,!0),null==s||s.disconnect(),null==e||e.disconnect()}},[l,t]),"undefined"==typeof document||!l||!t||null==s)return null;let o=s.shift,d="translate(calc(-50% + ".concat(o,"px), calc(-100% - ").concat(12,"px))");return(0,sG.createPortal)((0,y.jsx)(tG.P.div,{style:{top:s.top,left:s.left},className:"absolute z-10",...!a&&{initial:"hidden",animate:l?"visible":"hidden",variants:sP,transition:{...sz,delay:.4}},children:(0,y.jsxs)("div",{ref:n,className:"border-border-faint bg-background relative w-[280px] rounded-[8px] border p-3 text-left shadow-lg",style:{transform:d},role:"dialog","aria-modal":!1,onClick:e=>e.stopPropagation(),children:[(0,y.jsxs)("div",{className:"mb-2 space-y-1",children:[(0,y.jsxs)("p",{className:"flex items-center gap-2",children:[(0,y.jsx)("span",{className:"text-interactive-link text-base font-semibold",children:"NEW"}),(0,y.jsx)("span",{className:"text-header-primary text-base font-medium",children:"Model Settings Menu"})]}),(0,y.jsx)("p",{className:"text-text-secondary text-sm leading-5",children:"We have integrated our leaderboards directly into chat to help you easily choose models across modalities."})]}),(0,y.jsx)(E.$,{variant:"tertiary",className:"h-7.5 w-full justify-center",size:"md",onClick:e=>{e.stopPropagation(),i()},onMouseDown:e=>e.stopPropagation(),children:"Got it"}),(0,y.jsx)("span",{className:"border-border-faint bg-background pointer-events-none absolute left-1/2 top-full h-3 w-3 border border-l-0 border-t-0",style:{transform:"translate(calc(-50% - ".concat(o,"px), -6px) rotate(45deg)")}})]})}),document.body)}function sW(e){let{setSearchValue:t,modelA:a,modelB:n,searchValue:s,models:r,handleRemoveA:l,handleRemoveB:i,handleSelectModel:o,handleAddModel:d,handleModelPicked:c,onCommit:u,enforceSelectionOnClose:m,getExcludedModelIds:p,mode:x,currentArena:f,onArenaChange:h,anchorRequiresImageUpload:g,selectedArenaOptionId:v,disabledArenaOptionIds:b,disabledFlags:w,isAddMandatory:j}=e,[N,E]=(0,D.useState)(!1),[C,T]=(0,D.useState)(null),_=(0,D.useRef)(!1),k=(0,D.useRef)(0),I=()=>+!!a+ +!!n,R=(0,D.useRef)(I());return(0,D.useEffect)(()=>{if(!N)return;let e=R.current,a=I();e<2&&a>=2&&(_.current=!0,u(),E(!1),t(""),_.current=!1),R.current=a},[a,n,N]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(sV,{anchorEl:C,"data-sentry-element":"ModelSettingsMenuEducationPopover","data-sentry-source-file":"model-selector-drawer.tsx"}),(0,y.jsxs)(a4._s,{open:N,onOpenChange:e=>{if(e){m&&(k.current=I()),A.z.capture({action:"model_menu_opened",params:{has_model_a:!!a,has_model_b:!!n}}),E(!0);return}if(_.current)return;if(!m){u(),E(!1);return}let t=k.current;0===t||I()>=t?(u(),E(!1)):E(!0)},"data-sentry-element":"Drawer","data-sentry-source-file":"model-selector-drawer.tsx",children:[(0,y.jsx)(a4.Uz,{asChild:!0,"data-sentry-element":"DrawerTrigger","data-sentry-source-file":"model-selector-drawer.tsx",children:(0,y.jsx)(sO,{modelA:a,modelB:n,onAnchorChange:T,"data-sentry-element":"ModelSelectorTrigger","data-sentry-source-file":"model-selector-drawer.tsx"})}),(0,y.jsxs)(a4.zj,{"data-sentry-element":"DrawerContent","data-sentry-source-file":"model-selector-drawer.tsx",children:[(0,y.jsx)(a4.BE,{className:"hidden","aria-hidden":!0,"data-sentry-element":"DrawerHeader","data-sentry-source-file":"model-selector-drawer.tsx",children:(0,y.jsx)(a4.gk,{"data-sentry-element":"DrawerTitle","data-sentry-source-file":"model-selector-drawer.tsx",children:"Model Selector"})}),(0,y.jsx)(s_,{mode:x,modelA:a,modelB:n,searchValue:s,setSearchValue:t,models:r,handleRemoveA:l,handleRemoveB:i,handleSelectModel:o,handleAddModel:d,handleModelPicked:c,getExcludedModelIds:p,currentArena:f,onArenaChange:h,anchorRequiresImageUpload:g,selectedArenaOptionId:v,disabledArenaOptionIds:b,disabledFlags:w,isAddMandatory:j,"data-sentry-element":"ModelSelectorDrawerContent","data-sentry-source-file":"model-selector-drawer.tsx"})]})]})]})}function sY(e){let{searchValue:t,setSearchValue:a,models:n,onPicked:s,onSelectModel:r,excludeModelsIds:l,currentArena:i,onArenaChange:o,anchorRequiresImageUpload:d,selectedArenaOptionId:c,disabledArenaOptionIds:u}=e,m=(0,D.useRef)(null),[p,x]=(0,D.useState)(!1),f="treatment-2"===(0,J._P)("webdev_v2_experiment"),h=(0,D.useMemo)(()=>n.filter(e=>!(null==l?void 0:l.includes(e.id))).filter(e=>{var a;return!(null!=t?t:"").trim()||(null==(a=e.publicName)?void 0:a.toLowerCase().includes(t.toLowerCase()))}),[n,l,t]),g=(0,D.useMemo)(()=>sT.filter(e=>"webdev"!==e.id||f),[f]),v=h.length>=3&&!p;(0,D.useLayoutEffect)(()=>{let e=m.current;e&&x(e.scrollTop+e.clientHeight>=e.scrollHeight-1)},[h.length]);let b=sh((e,t,a)=>{A.z.capture({action:"model_search_completed",params:{query:e,results_count:t,arena:null!=a?a:void 0}})},500),w=e=>{if(e===t)return;a(e);let s=(null!=e?e:"").trim();if(!s)return;let r=n.filter(e=>!(null==l?void 0:l.includes(e.id))).filter(e=>{var t;return!s||(null==(t=e.publicName)?void 0:t.toLowerCase().includes(s.toLowerCase()))}).length;b(s,r,i)};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"border-border relative rounded-[4px] border [&_[cmdk-input-wrapper]]:border-0",children:[(0,y.jsx)(ej,{placeholder:"Search models",className:"mb-0 border-0",value:t,autoFocus:!0,onValueChange:w,"data-sentry-element":"CommandInput","data-sentry-source-file":"model-selector-popover-content.tsx"}),t&&(0,y.jsx)("button",{onClick:()=>w(""),className:"hover:bg-surface-secondary absolute right-3 top-1/2 -translate-y-1/2 rounded-md p-1 transition-colors",type:"button",children:(0,y.jsx)(ek.A,{className:"text-text-tertiary size-3"})})]}),(0,y.jsx)("div",{className:"flex gap-2 py-2",children:g.map(e=>(0,y.jsxs)(E.$,{variant:"outline",disabled:null==u?void 0:u.includes(e.id),onClick:()=>{c===e.id?o("text"):o(e.id)},className:(0,B.cn)("flex-1 rounded-[4px]",c===e.id&&"text-text-tertiary bg-surface-secondary border-border-faint hover:text-text-tertiary"),children:[e.icon,e.label]},e.id))}),(0,y.jsx)("div",{className:"text-text-secondary py-2 text-sm font-medium",children:c?(()=>{var e;let t=null==(e=sT.find(e=>e.id===c))?void 0:e.label;return t?"Top ".concat(t," Models"):"Select an Arena"})():"Select an Arena"}),(0,y.jsx)("div",{className:"relative",children:(0,y.jsxs)(sa,{"data-sentry-element":"ScrollArea","data-sentry-source-file":"model-selector-popover-content.tsx",children:[(0,y.jsxs)(eN,{className:"max-h-[234px]",ref:m,onScroll:e=>{let t=e.currentTarget;x(t.scrollTop+t.clientHeight>=t.scrollHeight-1)},"data-sentry-element":"CommandList","data-sentry-source-file":"model-selector-popover-content.tsx",children:[(0,y.jsx)(eE,{"data-sentry-element":"CommandEmpty","data-sentry-source-file":"model-selector-popover-content.tsx",children:(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center px-4 py-8 text-center",children:[(0,y.jsx)("div",{className:"text-text-tertiary mb-3",children:(0,y.jsx)(eb.A,{className:"mr-2 size-6 shrink-0 opacity-50","data-sentry-element":"Search","data-sentry-source-file":"model-selector-popover-content.tsx"})}),(0,y.jsx)("p",{className:"text-text-secondary mb-1 text-sm",children:"No models found"}),(0,y.jsx)("p",{className:"text-text-tertiary text-xs",children:"Try adjusting your search term"})]})}),(0,y.jsx)(eC,{className:"relative p-0 pb-2 [&_[cmdk-group-items]_[data-selected=true]+[cmdk-item]]:border-t-transparent","data-sentry-element":"CommandGroup","data-sentry-source-file":"model-selector-popover-content.tsx",children:h.map(e=>{var t,a;let l=null==(a=e.capabilities)||null==(t=a.inputCapabilities)?void 0:t.image,i="object"==typeof l&&(null==l?void 0:l.requiresUpload)===!0,o=null!=d&&i!==d;return(0,y.jsxs)(eT,{value:e.publicName,disabled:o,onSelect:e=>{let t=n.find(t=>t.publicName===e);null!=t&&r(t.id),w(""),s()},className:(0,B.cn)("hover:bg-surface-secondary border-border-faint flex cursor-pointer items-center gap-2 rounded-[0px] border-t px-3 py-3.5 first:border-t-0 data-[selected=true]:rounded-[4px] data-[selected=true]:border-b-transparent data-[selected=true]:border-t-transparent",o&&"cursor-not-allowed opacity-20"),children:[(0,y.jsx)("span",{className:"text-text-tertiary text-sm font-medium",children:null!=e.rank?"".concat(e.rank,"."):""}),(0,y.jsx)(eR.D,{className:"size-4 flex-none",organization:e.organization}),(0,y.jsx)("span",{className:"text-interactive-normal flex-1 truncate font-mono text-sm",children:e.publicName}),(0,y.jsx)(sN,{capabilities:e.capabilities})]},e.id)})})]}),(0,y.jsx)("div",{className:(0,B.cn)("pointer-events-none absolute bottom-0 left-0 right-0 z-10 -mx-6 h-[60px] rounded-b-3xl bg-[linear-gradient(0deg,rgba(253,253,254,1)_0%,rgba(253,253,254,0)_100%)] transition-opacity duration-150 ease-out dark:bg-[linear-gradient(0deg,rgba(29,29,32,1)_0%,rgba(29,29,32,0)_100%)]",v?"opacity-100":"opacity-0")})]})})]})}function sQ(e){let{mode:t,modelA:a,modelB:n,searchValue:s,setSearchValue:r,models:l,handleRemoveA:i,handleRemoveB:o,handleSelectModel:d,handleAddModel:c,handleModelPicked:u,getExcludedModelIds:m,currentArena:p,onArenaChange:x,anchorRequiresImageUpload:f,selectedArenaOptionId:h,disabledArenaOptionIds:g,disabledFlags:v,isAddMandatory:b}=e;return(0,y.jsx)(y.Fragment,{children:"selected"===t&&null!=a?(0,y.jsx)(sb,{modelA:a,modelB:n,onAddModel:c,onRemoveA:i,onRemoveB:o,disabledFlags:v,isAddMandatory:b}):(0,y.jsxs)(y.Fragment,{children:[(null!=a?a:n)&&(0,y.jsxs)("div",{className:"flex flex-col gap-2 pb-2",children:[a&&(0,y.jsx)(sv,{model:a,onRemove:i,disabled:!!(null==v?void 0:v.isRemoveADisabled)}),n&&(0,y.jsx)(sv,{model:n,onRemove:o,disabled:!!(null==v?void 0:v.isRemoveBDisabled)})]}),(0,y.jsx)(sY,{searchValue:s,setSearchValue:r,models:l,onPicked:u,onSelectModel:d,excludeModelsIds:m(),currentArena:p,onArenaChange:x,anchorRequiresImageUpload:f,selectedArenaOptionId:h,disabledArenaOptionIds:g})]})})}let sJ=tG.P.create(ew);function sq(e){let{setSearchValue:t,modelA:a,modelB:n,searchValue:s,models:r,handleRemoveA:l,handleRemoveB:i,handleSelectModel:o,handleAddModel:d,handleModelPicked:c,onCommit:u,enforceSelectionOnClose:m,getExcludedModelIds:p,mode:x,currentArena:f,onArenaChange:h,anchorRequiresImageUpload:g,selectedArenaOptionId:v,disabledArenaOptionIds:b,disabledFlags:w,isAddMandatory:j}=e,[N,E]=(0,D.useState)(!1),[C,T]=(0,D.useState)(null),_=(0,D.useRef)(!1),k=(0,D.useRef)(0),[I,R]=(0,D.useState)(0),S=()=>+!!a+ +!!n,M=async e=>{_.current=!0;try{await h(e)}finally{_.current=!1}},L=(0,D.useRef)(S());return(0,D.useEffect)(()=>{if(!N)return;let e=L.current,a=S();e<2&&a>=2&&(_.current=!0,u(),E(!1),t(""),_.current=!1),L.current=a},[a,n,N]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(sV,{anchorEl:C,"data-sentry-element":"ModelSettingsMenuEducationPopover","data-sentry-source-file":"model-selector-popover.tsx"}),(0,y.jsxs)(eA.AM,{open:N,onOpenChange:e=>{if(e){m&&(k.current=S()),A.z.capture({action:"model_menu_opened",params:{has_model_a:!!a,has_model_b:!!n}}),E(!0);return}if(_.current)return;if(!m){u(),E(!1),t("");return}let s=S(),r=k.current;0===r||s>=r?(u(),E(!1),t("")):(E(!0),R(e=>e+1))},"data-sentry-element":"Popover","data-sentry-source-file":"model-selector-popover.tsx",children:[(0,y.jsx)(eA.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger","data-sentry-source-file":"model-selector-popover.tsx",children:(0,y.jsx)(sO,{modelA:a,modelB:n,onAnchorChange:T,"data-sentry-element":"ModelSelectorTrigger","data-sentry-source-file":"model-selector-popover.tsx"})}),(0,y.jsx)(eA.hl,{className:"data-[state=closed]:zoom-out-100 data-[state=open]:zoom-in-100 data-[side=bottom]:slide-in-from-top-0 data-[side=left]:slide-in-from-right-0 data-[side=right]:slide-in-from-left-0 data-[side=top]:slide-in-from-bottom-0 relative w-[540px] bg-transparent shadow-none",align:"start",sideOffset:4,side:"top",onOpenAutoFocus:e=>e.preventDefault(),onClick:e=>e.stopPropagation(),"data-sentry-element":"PopoverContent","data-sentry-source-file":"model-selector-popover.tsx",children:(0,y.jsx)(sJ,{className:"bg-background rounded-[12px] px-4 pb-0 pt-4 shadow-lg",initial:{scale:1},animate:{scale:I>0?[1,.98,1]:1,x:I>0?[0,-2,0]:0},transition:{duration:.4,ease:"easeOut"},"data-sentry-element":"MotionCommand","data-sentry-source-file":"model-selector-popover.tsx",children:(0,y.jsx)(sQ,{mode:x,modelA:a,modelB:n,searchValue:s,setSearchValue:t,models:r,handleRemoveA:l,handleRemoveB:i,handleSelectModel:o,handleAddModel:d,handleModelPicked:c,getExcludedModelIds:p,currentArena:f,onArenaChange:M,anchorRequiresImageUpload:g,selectedArenaOptionId:v,disabledArenaOptionIds:b,disabledFlags:w,isAddMandatory:j,"data-sentry-element":"ModelSelectorPopoverContent","data-sentry-source-file":"model-selector-popover.tsx"})},I)})]})]})}function s$(e){var t,a,n,s,r,l,i,o;let{textAreaRef:d}=e,c=(0,eJ.d)("md"),u=(0,I.md)(nd),{modality:m,setModality:p,mode:x,setMode:f,messages:h}=(0,U.g)(e=>e),g=(0,U.g)(e=>e.messages.some(e=>{var t;return e.role===b.PG.USER&&(null==(t=e.experimental_attachments)?void 0:t.some(e=>{var t;return null==(t=e.contentType)?void 0:t.startsWith("image/")}))})),[,v]=(0,sp.U)(),{models:w,modelAId:j,modelBId:N,setModelAId:E,setModelBId:C}=(0,ex.g)(e=>e),[,T]=(0,sx._)(),[_,k]=(0,D.useState)(""),[R,S]=(0,D.useState)("selected"),[M,L]=(0,D.useState)(void 0),[O,P]=(0,D.useState)(void 0),z=(0,J._P)("3m-model-selector"),B=(0,F.useRouter)(),H=(0,D.useCallback)(e=>{switch(e){case"text":default:return e=>(0,ef.oN)(e);case"vision":return e=>(0,ef.S1)(e);case"text-to-image":return e=>(0,ef.hK)(e);case"image-edit":return e=>(0,ef.j4)(e);case"search":return e=>(0,ef.cK)(e);case"webdev":return e=>(0,ef.JQ)(e)}},[]),G=null!=(l=({[b.Jg.CHAT]:"text",[b.Jg.IMAGE]:"text-to-image",[b.Jg.SEARCH]:"search",[b.Jg.VIDEO]:"text-to-video",[b.Jg.WEBDEV]:"webdev",[b.Jg.P2L]:"text"})[m])?l:"text",V=u.length>0||g,W=(0,D.useMemo)(()=>{if(!G)return null;switch(G){case"vision":case"image-edit":case"multi-image-edit":return"text-to-image";default:{let e=sT.find(e=>e.id===G);return e?e.id:null}}},[G]),Y=(0,D.useMemo)(()=>V?sT.map(e=>e.id).filter(e=>"search"===e||"webdev"===e):[],[V]),Q=void 0!==M?M:j,q=void 0!==O?O:N,$=(0,D.useMemo)(()=>{let e=null!=w?w:[],t=H(G);return e.filter(e=>null!=e.organization).filter(t)},[w,G,H]),K=null!=(i=$.find(e=>e.id===Q))?i:null,X=null!=(o=$.find(e=>e.id===q))?o:null,Z="pickA"===R?X:"pickB"===R?K:null,ee=null==Z?null:"object"==typeof(null==(a=Z.capabilities)||null==(t=a.inputCapabilities)?void 0:t.image)&&(null==(r=Z.capabilities)||null==(s=r.inputCapabilities)||null==(n=s.image)?void 0:n.requiresUpload)===!0,et=(0,D.useCallback)(()=>{L(null),S("pickA")},[]),ea=(0,D.useCallback)(()=>{P(null)},[]),en=(0,D.useCallback)(e=>{K?X||(P(e),A.z.capture({action:"model_selected",params:{model_id:e,slot:"b"}})):(L(e),A.z.capture({action:"model_selected",params:{model_id:e,slot:"a"}}))},[K,X]),es=(0,D.useCallback)(()=>{S("pickB"),A.z.capture({action:"model_add_clicked"})},[]),er=(0,D.useCallback)(()=>{S("selected")},[]),el=(0,D.useCallback)(()=>[null==K?void 0:K.id,null==X?void 0:X.id].filter(e=>null!=e),[null==K?void 0:K.id,null==X?void 0:X.id]),ei=h.length>0,eo=ei&&h.some(e=>"b"===e.participantPosition),ed=ei&&!eo,ec=ei&&eo,eu="text"!==G||!ei&&!Q&&!q,em=x===b.lY.BATTLE&&ei,ep=(0,D.useCallback)(()=>{let e=void 0!==M?M:null!=j?j:null,t=void 0!==O?O:null!=N?N:null;null!=e&&E(e),null!=t&&C(t),null==e&&E(""),null==t&&C(""),e&&t?(f(b.lY.SIDE_BY_SIDE),T(b.lY.SIDE_BY_SIDE)):e||t?(f(b.lY.DIRECT),T(b.lY.DIRECT)):(f(b.lY.BATTLE),T(null)),L(void 0),P(void 0),S("selected")},[M,O,j,N,E,C,f,T]),{setOpen:eh,setPromiseHandlers:eg}=eG(),ev=(0,D.useCallback)(async e=>{var t,a;if(e){if(e===m)return h.length>0?void eh(!0):(p(b.Jg.CHAT),v(b.Jg.CHAT),E(""),C(""),void(null==d||null==(t=d.current)||t.focus()));if(!(h.length>0)||await new Promise((e,t)=>{eg({resolve:e,reject:t}),eh(!0)}))if(h.length>0){let t=(0,sm.V)(e);B.push(t?"/?".concat(t):"/")}else p(e),v(e),null==d||null==(a=d.current)||a.focus()}},[m,p,v,h.length,B,eg,eh,E,C,d]),ey=async e=>{let t={text:b.Jg.CHAT,vision:b.Jg.CHAT,"text-to-image":b.Jg.IMAGE,"image-edit":b.Jg.IMAGE,search:b.Jg.SEARCH,"text-to-video":b.Jg.VIDEO,webdev:b.Jg.WEBDEV,"image-to-video":b.Jg.VIDEO,copilot:b.Jg.CHAT,"multi-image-edit":b.Jg.IMAGE}[e];await ev(t)};return"treatment"!==z&&"treatment-2"!==z?(0,y.jsx)(sm.K,{handleModalityChange:ev}):c?(0,y.jsxs)(y.Fragment,{children:[!em&&(0,y.jsx)(sW,{selectedArenaOptionId:W,disabledArenaOptionIds:Y,setSearchValue:k,searchValue:_,models:$,handleRemoveA:et,handleRemoveB:ea,handleSelectModel:en,handleAddModel:es,handleModelPicked:er,onCommit:ep,enforceSelectionOnClose:ei,getExcludedModelIds:el,mode:R,modelA:K,modelB:X,currentArena:G,onArenaChange:ey,anchorRequiresImageUpload:ee,disabledFlags:{isAddDisabled:ed,isRemoveADisabled:!1,isRemoveBDisabled:!1,isModalityLocked:ei},isAddMandatory:ec}),(eu||em)&&(0,y.jsx)(sm.K,{handleModalityChange:ev})]}):(0,y.jsxs)(y.Fragment,{children:[!em&&(0,y.jsx)(sq,{selectedArenaOptionId:W,disabledArenaOptionIds:Y,setSearchValue:k,searchValue:_,models:$,handleRemoveA:et,handleRemoveB:ea,handleSelectModel:en,handleAddModel:es,handleModelPicked:er,onCommit:ep,enforceSelectionOnClose:ei,getExcludedModelIds:el,mode:R,modelA:K,modelB:X,currentArena:G,onArenaChange:ey,anchorRequiresImageUpload:ee,disabledFlags:{isAddDisabled:ed,isRemoveADisabled:!1,isRemoveBDisabled:!1,isModalityLocked:ei},isAddMandatory:ec}),(eu||em)&&(0,y.jsx)(sm.K,{handleModalityChange:ev})]})}function sK(e){let{onFileSelect:t,isImageUploadEnabled:a}=e,[n,s]=(0,D.useState)(!1),r=nm();return a?(0,y.jsx)(a6.G,{content:"Upload Image","data-sentry-element":"BasicTooltip","data-sentry-component":"AttachmentsMenu","data-sentry-source-file":"attachments-menu.tsx",children:(0,y.jsx)(E.$,{type:"button",variant:"outline",size:"icon","aria-label":"Add files and more",onClick:t,disabled:r,"data-sentry-element":"Button","data-sentry-source-file":"attachments-menu.tsx",children:(0,y.jsx)(sy.A,{className:"size-4","data-sentry-element":"Plus","data-sentry-source-file":"attachments-menu.tsx"})})}):null}a(87869),a(7439),a(73042),a(92365);var sX=a(81180);let sZ=(0,D.forwardRef)((e,t)=>{let{className:a,minRows:n=1,...s}=e;return(0,y.jsx)(sX.A,{ref:t,rows:n,minRows:n,className:(0,B.cn)("bg-surface-primary box-border w-full flex-none resize-none p-2 focus:outline-none active:outline-none",a),...s})});sZ.displayName="AutoResizeTextarea";var s0=a(87135);let s1=(0,a(61252).F)("bg-surface-primary flex items-center gap-3",{variants:{layout:{default:"justify-between",centered:"justify-center"},padding:{compact:"p-2",comfortable:"py-2 px-4"},responsive:{mobile:"w-full border-t border-x border-border-faint rounded-t-xl",desktop:"w-auto mx-0 border border-border-faint rounded-xl shadow-sm"}},defaultVariants:{layout:"default",padding:"comfortable"}});function s2(e){let{children:t,className:a,layout:n="default",padding:s="comfortable"}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"flex w-full flex-col items-center gap-2 md:hidden",children:(0,y.jsx)("div",{className:(0,B.cn)(s1({layout:n,padding:s,responsive:"mobile"}),a),children:t})}),(0,y.jsx)("div",{className:"hidden md:absolute md:top-0 md:z-10 md:flex md:-translate-y-full md:justify-center md:pb-2",children:(0,y.jsx)("div",{className:(0,B.cn)(s1({layout:n,padding:s,responsive:"desktop"}),a),children:t})})]})}var s4=a(808);function s3(){let{messageThreads:e}=tF(),{appendMultiStream:t}=tk(),a=(0,U.g)(e=>e.deleteMessage),n=(0,U.g)(e=>e.messages),s=(0,F.useRouter)(),r=(0,_.kH)(_.Q_),{setLocation:l}=(0,eL.G)(),i=(0,U.g)(e=>{if(1!==e.lastMessageIds.length)return null;let t=e.messages.find(t=>t.id===e.lastMessageIds[0]);return t&&t.role===b.PG.USER?t:null}),o=function(){var e,t,a;let{models:n,modelAId:s,modelBId:r}=(0,ex.g)(e=>e),l=null==(e=n.find(e=>e.id===s))?void 0:e.rateLimitedUntil,i=null==(t=n.find(e=>e.id===r))?void 0:t.rateLimitedUntil,o=null!=l?l:i,d=l?s:r,c=n.find(e=>e.id===d),[u,m]=(0,D.useState)(()=>new Date);if((0,D.useEffect)(()=>{if(!o)return;let e=setInterval(()=>{m(new Date)},1e3);return()=>clearInterval(e)},[o]),!o)return{isRateLimited:!1,message:null};let p=(0,s0.FO)(o,u);return p?{isRateLimited:!0,message:"You have reached your rate limit for ".concat(null!=(a=null==c?void 0:c.publicName)?a:"this model",". Please try again in ").concat(p,".")}:{isRateLimited:!1,message:null}}(),d=function(){let e=(0,U.g)(e=>e.modality),t=(0,_.kH)(e=>e.imageModalityRateLimitedUntil),[a,n]=(0,D.useState)(()=>new Date);return((0,D.useEffect)(()=>{if(!t)return;let e=setInterval(()=>{n(new Date)},1e3);return()=>clearInterval(e)},[t]),t&&e===b.Jg.IMAGE&&(0,s0.FO)(t,a))?{isRateLimited:!0}:{isRateLimited:!1}}(),c=(null==i?void 0:i.status)===b.nH.FLAGGED,u=1===n.length,m=!c&&!u&&!o.isRateLimited;return d.isRateLimited&&r?(0,y.jsxs)(s2,{className:"space-between flex items-center gap-2",children:[(0,y.jsx)("p",{className:"text-interactive text-center text-xs font-medium sm:text-left sm:text-sm",children:"Please login or create an account to generate more images"}),(0,y.jsx)(E.$,{variant:"tertiary",size:"md",className:"flex-1 gap-1 sm:flex-initial",onClick:()=>l("image-modality-rate-limit-cta"),children:"Login"})]}):(0,y.jsx)(s2,{"data-sentry-element":"FloatingBar","data-sentry-component":"ErrorBar","data-sentry-source-file":"error-bar.tsx",children:(0,y.jsxs)("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-center sm:gap-4",children:[(0,y.jsx)("p",{className:"text-interactive-negative text-center text-xs font-medium sm:text-left sm:text-sm",children:o.isRateLimited&&o.message?(0,y.jsx)("span",{children:o.message}):c?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("span",{className:"sm:hidden",children:["Violates"," ",(0,y.jsx)(N.Link,{href:"/terms-of-use",target:"_blank",children:"Terms of Use"})]}),(0,y.jsxs)("span",{className:"hidden sm:inline",children:["This content violates our"," ",(0,y.jsx)(N.Link,{href:"/terms-of-use",target:"_blank",children:"Terms of Use"})]})]}):d.isRateLimited&&!r?(0,y.jsx)("span",{children:"Image generation is rate limited. Please try again later."}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{className:"sm:hidden",children:"Something went wrong. Please try again."}),(0,y.jsx)("span",{className:"hidden sm:inline",children:"Something went wrong while generating the response. Please try again."})]})}),(0,y.jsxs)("div",{className:"flex w-full gap-2 sm:w-auto",children:[m&&(0,y.jsxs)(E.$,{variant:"outline",size:"md",className:"flex-1 gap-1 sm:flex-initial",onClick:()=>{i&&t({content:i.content,experimental_attachments:i.experimental_attachments},e)},children:[(0,y.jsx)(nr.A,{size:12}),"Retry"]}),i&&(0,y.jsxs)(E.$,{variant:"outline",size:"md",className:"flex-1 gap-1 sm:flex-initial",onClick:()=>{i&&(u?s.replace("/"):a(i.id))},children:[(0,y.jsx)(s4.A,{size:16}),"Clear"]})]})]})})}let s5={[b.lY.SIDE_BY_SIDE]:{requiresModelA:!0,requiresModelB:!0},[b.lY.DIRECT]:{requiresModelA:!0,requiresModelB:!1},[b.lY.BATTLE]:{requiresModelA:!1,requiresModelB:!1}};function s6(e){let{formState:t,latestMessages:a,messageValue:n}=e,[s,r]=(0,U.g)((0,H.k)(e=>[e.mode,e.isVoteSubmitting])),{modelAId:l,modelBId:i,models:o}=(0,ex.g)(e=>e),[d]=(0,I.fp)(nd);return(0,D.useMemo)(()=>{let e=s5[s],c=(!e.requiresModelA||null!=l)&&(!e.requiresModelB||null!=i),u=a.some(e=>e.status===b.nH.PENDING),m=function(e,t,a,n){switch(e){case b.lY.BATTLE:return!1;case b.lY.SIDE_BY_SIDE:return ev(t,n)||ev(a,n);case b.lY.DIRECT:default:return ev(t,n)}}(s,l,i,o),p=d.length>0,x=m&&!p,f=n.length>0;return{canSubmit:t.isValid&&!t.isSubmitting&&c&&!u&&!r&&!x,isTextAreaDisabled:!1,missingRequiredImages:x,shouldShowImageUploadBanner:x&&f}},[t.isValid,t.isSubmitting,a,s,r,l,i,o,d,n])}function s8(){return(0,U.g)(e=>{let{messages:t,lastMessageIds:a}=e,n=1===a.length?t.find(e=>e.id===a[0]):null;return!!n&&n.role===b.PG.USER&&a.map(e=>t.find(t=>t.id===e)).filter(e=>null!=e).some(e=>[b.nH.FAILED,b.nH.FLAGGED].includes(e.status))})}let s9=(0,k.eU)(!1);function s7(){let[e,t]=(0,I.fp)(s9);return{seen:e,dismiss:()=>{t(!0)},reset:()=>{t(!1)}}}function re(){let{loading:e,mode:t,lastMessageIds:a,messages:n,hasViewedLatestResponses:s,modality:r}=(0,U.g)(e=>e);return(0,D.useMemo)(()=>{if(e||t===b.lY.DIRECT||0===a.length||r===b.Jg.WEBDEV)return!1;let l=a.map(e=>n.find(t=>t.id===e)).filter(e=>null!=e),i=l.filter(e=>e.role===b.PG.ASSISTANT);return!!(i.length>=2&&i.some(e=>"a"===e.participantPosition)&&i.some(e=>"b"===e.participantPosition))&&l.every(e=>(null==e?void 0:e.status)!=b.nH.PENDING&&(null==e?void 0:e.pairwiseFeedbackId)==null)&&s},[e,t,a,n,s,r])}function rt(){let{seen:e}=s7(),t=re(),{latestMessages:a}=tF(),n=s8(),s=(0,U.g)(e=>e.modality),r=(0,U.g)(e=>e.loading),l=(0,U.g)(e=>e.messages),i=(0,U.g)(e=>e.mode);if(e||s!==b.Jg.IMAGE||r||0===l.length||t||n)return!1;let o=a.some(e=>null!=e.pairwiseFeedbackId),d=i===b.lY.DIRECT;return o||d}function ra(){let{dismiss:e}=s7();return(0,y.jsx)(s2,{"data-sentry-element":"FloatingBar","data-sentry-component":"ImageModalityDisclaimer","data-sentry-source-file":"image-modality-disclaimer.tsx",children:(0,y.jsxs)("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-center sm:gap-4",children:[(0,y.jsxs)("p",{className:"text-text-primary text-center text-xs font-medium sm:text-left sm:text-sm",children:[(0,y.jsx)("span",{className:"sm:hidden",children:"Chat history won't carry over to new conversations"}),(0,y.jsx)("span",{className:"hidden sm:inline",children:"Previous chat history will not be carried over to new conversations"})]}),(0,y.jsx)(E.$,{variant:"primary",size:"md",className:"w-full flex-shrink-0 sm:w-auto",onClick:e,"data-sentry-element":"Button","data-sentry-source-file":"image-modality-disclaimer.tsx",children:"Got it"})]})})}function rn(){return(0,y.jsx)(s2,{layout:"centered",padding:"comfortable","data-sentry-element":"FloatingBar","data-sentry-component":"ImageUploadRequiredBar","data-sentry-source-file":"image-upload-required-bar.tsx",children:(0,y.jsx)("div",{className:"text-red-600",children:(0,y.jsx)("span",{className:"text-sm font-medium",children:"Model requires image upload"})})})}function rs(){let{dismiss:e}=nu();return(0,y.jsx)(s2,{"data-sentry-element":"FloatingBar","data-sentry-component":"MaxImagesNotification","data-sentry-source-file":"max-images-notification.tsx",children:(0,y.jsxs)("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-center sm:gap-4",children:[(0,y.jsx)("p",{className:"text-interactive-negative text-center text-sm font-normal leading-none sm:text-left",children:"Uh oh. You have reached the max amount of images you can upload."}),(0,y.jsx)(E.$,{variant:"tertiary",size:"md",className:"w-full flex-shrink-0 sm:w-auto",onClick:e,"data-sentry-element":"Button","data-sentry-source-file":"max-images-notification.tsx",children:"Got it"})]})})}var rr=a(82324),rl=a(65434);function ri(){let e=(0,nz.bj)(e=>e),[t,a]=(0,U.g)((0,H.k)(e=>[e.setLeftVoteHoverState,e.setRightVoteHoverState])),n=(0,U.g)(e=>e.isVoteSubmitting),[s,r]=(0,U.g)(e=>e.lastMessageIds),l=(0,U.g)(e=>e.didInspectBothResponsesByPairwiseFeedbackKey),i=(0,U.g)(e=>e.modality===b.Jg.WEBDEV),{handlePairwiseFeedbackSubmit:o}=nU(),d=(0,D.useCallback)(n=>{o(n,e,s,r,l[(0,nJ.J)(s,r)]),t(null),a(null)},[o,s,r,t,a,e,l]),c=(0,D.useCallback)((e,n)=>{t(e),a(n)},[t,a]),u="hover:text-interactive-positive focus:text-interactive-positive hover:border-interactive-positive focus:border-interactive-positive hover:bg-interactive-positive/10 focus:bg-interactive-positive/10",m=(0,B.cn)("flex-1",!i&&"md:flex-none md:w-[180px]"),p=(0,B.cn)("flex-none",!i&&"md:w-[140px]"),x=[{value:b.sb.MODEL_A,className:(0,B.cn)("min-w-0 md:gap-1 focus-visible:ring-0",u,m),mobileText:"A is better",desktopText:i?"A is better":"Left is Better",icon:(0,y.jsx)(nK.A,{size:12,className:"hidden md:block"}),iconPosition:"left",onHover:()=>c("win",null)},{value:b.sb.TIE,className:(0,B.cn)("min-w-0 md:gap-1 focus-visible:ring-0",u,p),desktopText:i?null:"It's a tie",icon:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(rr.A,{size:15,className:"md:hidden"}),(0,y.jsx)(ng.A,{size:12,className:"hidden md:block"})]}),onHover:()=>c("tie","tie")},{value:b.sb.BOTH_BAD,className:(0,B.cn)("min-w-0 md:gap-1 focus-visible:ring-0","hover:text-interactive-negative focus:text-interactive-negative hover:border-interactive-negative focus:border-interactive-negative hover:bg-interactive-negative/10 focus:bg-interactive-negative/10",p),desktopText:i?"":"Both are bad",icon:(0,y.jsx)(rl.A,{size:15,className:"md:size-3"}),onHover:()=>c("bothbad","bothbad")},{value:b.sb.MODEL_B,className:(0,B.cn)("min-w-0 md:gap-1 focus-visible:ring-0",u,m),mobileText:"B is better",desktopText:i?"B is better":"Right is Better",icon:(0,y.jsx)(R.A,{size:12,className:"hidden md:block"}),iconPosition:"right",onHover:()=>c(null,"win")}];return(0,y.jsx)(s2,{padding:"compact",className:"items-stretch","data-sentry-element":"FloatingBar","data-sentry-component":"VoteBar","data-sentry-source-file":"vote-bar.tsx",children:x.map(e=>(0,y.jsxs)(E.$,{variant:"outline",className:e.className,onClick:()=>d(e.value),onMouseEnter:e.onHover,onMouseLeave:()=>c(null,null),onFocus:e.onHover,onBlur:()=>c(null,null),disabled:n,children:["left"===e.iconPosition&&e.icon,e.mobileText&&(0,y.jsx)("span",{className:"md:hidden",children:e.mobileText}),e.desktopText&&(0,y.jsx)("span",{className:"hidden md:block",children:e.desktopText}),"right"===e.iconPosition&&e.icon,!e.iconPosition&&e.icon]},e.value))})}function ro(e){let{formState:t,latestMessages:a,messageValue:n}=e,s=s8(),r=re(),{shouldShowImageUploadBanner:l}=s6({formState:t,latestMessages:a,messageValue:n}),i=rt(),{shown:o}=nu();return(0,D.useMemo)(()=>s?(0,y.jsx)(s3,{}):l?(0,y.jsx)(rn,{}):r?(0,y.jsx)(ri,{}):i?(0,y.jsx)(ra,{}):o?(0,y.jsx)(rs,{}):null,[s,l,r,i,o])}function rd(){return(0,y.jsx)("div",{className:"bg-surface-primary text-text-secondary border-border-faint animate-in fade-in rounded-xl border p-3 opacity-100 shadow-sm transition-all duration-300","data-sentry-component":"LegalCopy","data-sentry-source-file":"legal-copy.tsx",children:(0,y.jsxs)("div",{className:"text-xs leading-relaxed",children:[(0,y.jsx)("p",{children:"Your conversations and certain other personal information will be disclosed to the relevant AI providers and may otherwise be disclosed publicly to help support our community and advance AI research."}),(0,y.jsx)("p",{className:"mt-3",children:"Do not submit to our Services any personal information or other sensitive information that you would not want to be shared publicly. By continuing to use our Services, you acknowledge and direct us to engage in such sharing."})]})})}var rc=a(10358);let ru={initial:{rotate:0,translateY:0,stroke:"currentColor"},hover:{rotate:5,translateY:1,stroke:"var(--interactive-active)",transition:{duration:.3,type:"spring",stiffness:200,damping:20}}},rm={initial:{translateY:0,scale:1,fill:"transparent",stroke:"currentColor"},hover:{translateY:-2,scale:1.1,fill:"hsl(var(--interactive-negative))",stroke:"transparent",transition:{duration:.2,type:"spring",stiffness:200,damping:25}}},rp=(0,D.forwardRef)((e,t)=>{let{size:a,className:n,disabled:s,onClick:r}=e;return(0,y.jsx)(tG.P.button,{ref:t,type:"button",disabled:s,onClick:r,className:(0,B.cn)("text-interactive-normal hover:text-interactive-active focus-visible:text-interactive-active flex cursor-pointer select-none items-center justify-center transition-colors duration-200",n),whileHover:"hover",whileFocus:"hover",initial:"initial",children:(0,y.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"2 2 19 19",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",style:{overflow:"visible"},strokeLinejoin:"round",children:[(0,y.jsxs)(tG.P.g,{variants:ru,children:[(0,y.jsx)("path",{d:"M11 14h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16"}),(0,y.jsx)("path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9"}),(0,y.jsx)("path",{d:"m2 15 6 6"})]}),(0,y.jsx)(tG.P.path,{d:"M19.5 8.5c.7-.7 1.5-1.6 1.5-2.7A2.73 2.73 0 0 0 16 4a2.78 2.78 0 0 0-5 1.8c0 1.2.8 2 1.5 2.8L16 12Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",variants:rm})]})})});rp.displayName="HandHeartButton";let rx="Your prompts may be shared publicly to support AI research",rf="Your conversations may be shared to support our community, improve our service, and advance the development of reliable AI. This includes posting conversations publicly online. Any data that we share is always anonymous and never linked to you.",rh="View FAQ";function rg(){let e=(0,eJ.d)("md"),t=(0,y.jsx)(rp,{size:16,className:"rounded-md p-2"});return e?(0,y.jsx)(rv,{heartIcon:t}):(0,y.jsx)(ry,{heartIcon:t,"data-sentry-element":"PublicNoticeDesktop","data-sentry-component":"PublicNoticeButton","data-sentry-source-file":"public-notice-button.tsx"})}function rv(e){let{heartIcon:t}=e;return(0,y.jsxs)(a4._s,{"data-sentry-element":"Drawer","data-sentry-component":"PublicNoticeMobile","data-sentry-source-file":"public-notice-button.tsx",children:[(0,y.jsx)(a4.zj,{"data-sentry-element":"DrawerContent","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsxs)("div",{className:"flex flex-col gap-4 px-2 pb-12 pt-10",children:[(0,y.jsxs)("div",{className:"flex flex-col gap-4 px-3",children:[(0,y.jsx)(a4.gk,{className:"font-heading text-base font-medium","data-sentry-element":"DrawerTitle","data-sentry-source-file":"public-notice-button.tsx",children:rx}),(0,y.jsx)(a4.I6,{className:"text-sm font-normal","data-sentry-element":"DrawerDescription","data-sentry-source-file":"public-notice-button.tsx",children:rf})]}),(0,y.jsx)(a4.tb,{className:"p-0","data-sentry-element":"DrawerFooter","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsx)(E.$,{size:"md",variant:"outline",asChild:!0,"data-sentry-element":"Button","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsx)(N.Link,{href:"/faq",target:"_blank","data-sentry-element":"Link","data-sentry-source-file":"public-notice-button.tsx",children:rh})})})]})}),(0,y.jsx)(a4.Uz,{asChild:!0,"data-sentry-element":"DrawerTrigger","data-sentry-source-file":"public-notice-button.tsx",children:t})]})}function ry(e){let{heartIcon:t}=e,[a,n]=(0,D.useState)(!1);return(0,y.jsxs)(eA.AM,{open:a,onOpenChange:n,"data-sentry-element":"Popover","data-sentry-component":"PublicNoticeDesktop","data-sentry-source-file":"public-notice-button.tsx",children:[(0,y.jsxs)(rc.m_,{open:!a&&void 0,"data-sentry-element":"Tooltip","data-sentry-source-file":"public-notice-button.tsx",children:[(0,y.jsx)(rc.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsx)("div",{children:(0,y.jsx)(eA.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger","data-sentry-source-file":"public-notice-button.tsx",children:t})})}),(0,y.jsx)(rc.ZI,{className:"max-w-60","data-sentry-element":"TooltipContent","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsxs)("p",{className:"text-interactive-on-cta text-center text-xs",children:[rx," ",(0,y.jsx)("span",{onClick:()=>n(!0),className:"text-interactive-cta-focus dark:text-interactive-cta-hover cursor-pointer",children:"Learn more"})]})})]}),(0,y.jsxs)(eA.hl,{className:"bg-surface-primary border-medium flex w-64 flex-col gap-2 rounded-xl border p-4",align:"end",side:"top","data-sentry-element":"PopoverContent","data-sentry-source-file":"public-notice-button.tsx",children:[(0,y.jsx)("h2",{className:"text-header-primary font-heading text-sm font-medium",children:rx}),(0,y.jsx)("p",{className:"text-text-secondary text-xs font-normal",children:rf}),(0,y.jsx)(E.$,{size:"sm",variant:"outline",asChild:!0,className:"mt-2","data-sentry-element":"Button","data-sentry-source-file":"public-notice-button.tsx",children:(0,y.jsx)(N.Link,{href:"/faq",target:"_blank","data-sentry-element":"Link","data-sentry-source-file":"public-notice-button.tsx",children:rh})})]})]})}let rb=eK.z.object({message:eK.z.string().trim().min(1,"Please enter a message").max(b.Kd,"Message is too long")});function rw(e){let{sendMessage:t,latestMessages:a,isSubmitting:n,textAreaRef:s,fileInputRef:r,fileUploaderProps:l,isImageUploadEnabled:i,handlePaste:o}=e,d=(0,eJ.d)("md"),c=(0,sd.lJ)(e=>{var t;return(null==(t=e.userAgent.device)?void 0:t.type)==="mobile"}),u=(0,F.usePathname)(),m=(0,D.useRef)(null),p=(0,D.useRef)(null),x=null!=s?s:p,f=(0,D.useRef)(null),h=(0,U.g)(e=>e.modality),[g]=(0,I.fp)(nd),v=(0,su.mN)({resolver:(0,ss.u)(rb),defaultValues:{message:""},mode:"onChange"}),{register:w,handleSubmit:j,reset:N,watch:C,formState:T}=v,A=C("message",""),k=function(e){let{messageValue:t,formState:a,latestMessages:n}=e,s=(0,eJ.d)("md"),r=(0,U.g)(e=>e.messages),l=(0,_.kH)(e=>e.user),{hasBeenShown:i}=si(),o=re(),d=s8(),{shouldShowImageUploadBanner:c}=s6({formState:a,latestMessages:n,messageValue:t}),u=rt(),{shown:m}=nu();return(0,D.useMemo)(()=>{let e=0===r.length,a=e&&(null==l?void 0:l.touConsentTimestamp)==null&&t.length>=1,n=d||o||c||u||m,p=o&&s&&!i;return{showWelcomeScreen:e,showLegalCopy:a,shouldShowErrorBar:d,shouldShowVoteBar:o,shouldShowImageDisclaimer:u,shouldShowMaxImagesNotification:m,shouldShowMobileVoteFtue:p,hasBarAboveForm:n}},[r.length,null==l?void 0:l.touConsentTimestamp,t.length,d,o,c,u,m,s,i])}({messageValue:A,formState:T,latestMessages:a}),R=s6({formState:T,latestMessages:a,messageValue:A}),S=function(e){let{isTextAreaDisabled:t,modality:a,showWelcomeScreen:n,attachments:s=[]}=e;return(0,D.useMemo)(()=>t?"Please vote to continue":a===b.Jg.IMAGE?s.length>0?"Describe how you want to edit this image":"Describe the image you want to generate":a===b.Jg.WEBDEV?n?"Describe the website or app you want to build":"Ask a follow up...":"Ask ".concat(n?"anything":"followup",""),[t,a,n,s])}({isTextAreaDisabled:R.isTextAreaDisabled,modality:h,showWelcomeScreen:k.showWelcomeScreen,attachments:g}),M=j(async e=>{try{await t(e.message),N()}catch(e){console.error("Form submission error:",e)}});return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:(0,B.cn)("bg-surface-primary relative flex flex-col rounded-[0.9rem] md:items-center md:gap-2",{"gap-0 md:gap-2":k.shouldShowVoteBar}),onClick:e=>{var t;let a=e.target;a&&(a.closest("button,input,textarea,select,a,[role=button],[role=menu],[role=listbox],[contenteditable=true],[data-prevent-form-autofocus]")||null==(t=x.current)||t.focus())},children:[(0,y.jsx)(ro,{formState:T,latestMessages:a,messageValue:A,"data-sentry-element":"BannerSelector","data-sentry-source-file":"evaluation-form.tsx"}),(0,y.jsxs)("div",{className:(0,B.cn)("border-border-faint bg-surface-primary relative mx-auto min-h-0 w-full flex-none rounded-[14px] border md:mx-4",{"rounded-none rounded-b-[14px]":d&&k.hasBarAboveForm}),children:[(0,y.jsxs)("form",{ref:m,onSubmit:e=>void M(e),className:(0,B.cn)("flex w-full flex-col items-start justify-center p-2",{"rounded-[calc(1rem-1px)]":d&&!k.hasBarAboveForm,"rounded-none rounded-b-[calc(1rem-1px)]":d&&k.hasBarAboveForm}),children:[i&&l.renderAttachments(),(0,y.jsxs)("div",{className:"flex w-full flex-col justify-between gap-1 md:gap-2",children:[(0,y.jsx)("input",{...l.getInputProps(),ref:e=>{f.current=e,r&&(r.current=e)},className:"hidden",onClick:e=>{e.stopPropagation(),e.target.value=""}}),(0,y.jsx)(sZ,{...w("message",{onChange:()=>{v.trigger("message")}}),autoFocus:!d,disabled:R.isTextAreaDisabled,minRows:1,maxRows:10,ref:e=>{w("message").ref(e),e&&null!==e.offsetParent&&x&&"current"in x&&(x.current=e)},autoComplete:"off",placeholder:S,onPaste:o,className:(0,B.cn)("max-h-[40vh] p-1 md:p-3",{"text-text-muted placeholder:text-text-muted":R.isTextAreaDisabled}),onKeyDown:e=>{if("Enter"===e.code&&!(c||e.shiftKey||e.nativeEvent.isComposing)&&(e.preventDefault(),R.canSubmit)){var t;null==(t=m.current)||t.requestSubmit()}},"data-sentry-element":"AutoResizeTextarea","data-sentry-source-file":"evaluation-form.tsx"}),(0,y.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,y.jsxs)("div",{className:"mr-1 flex h-8 flex-none gap-2",children:[(0,y.jsx)(sK,{onFileSelect:()=>{var e;return null==(e=f.current)?void 0:e.click()},isImageUploadEnabled:i,"data-sentry-element":"AttachmentsMenu","data-sentry-source-file":"evaluation-form.tsx"}),(0,y.jsx)(s$,{textAreaRef:x,"data-sentry-element":"ModelSelector","data-sentry-source-file":"evaluation-form.tsx"})]}),(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)(rg,{"data-sentry-element":"PublicNoticeButton","data-sentry-source-file":"evaluation-form.tsx"}),(0,y.jsx)(E.$,{size:"icon",type:"submit",className:"bg-header-primary hover:bg-header-primary/90 text-interactive-on-cta",disabled:!R.canSubmit||n,"data-sentry-element":"Button","data-sentry-source-file":"evaluation-form.tsx",children:(0,y.jsx)(sc.A,{className:"size-4","data-sentry-element":"ArrowUp","data-sentry-source-file":"evaluation-form.tsx"})})]})]})]}),l.isDragActive&&(0,y.jsx)("div",{className:(0,B.cn)("bg-surface-primary/90 absolute inset-[-1px] flex items-center justify-center backdrop-blur-sm transition-all duration-200",{"rounded-[calc(1rem-1px)]":d&&!k.hasBarAboveForm,"rounded-none rounded-b-[calc(1rem-1px)]":d&&k.hasBarAboveForm,"rounded-[0.6875rem]":!d}),style:{border:"2px dashed hsl(var(--interactive-active) / 0.12)"},children:(0,y.jsxs)("div",{className:"flex flex-col items-center gap-2 rounded-lg px-4 py-3",children:[(0,y.jsx)("p",{className:"text-text-primary text-sm font-medium",children:"Drop files here"}),(0,y.jsx)("p",{className:"text-text-secondary text-center text-xs",children:"Images: PNG, JPG, JPEG, WEBP (max 3MB)"})]})}),(0,y.jsx)("div",{className:(0,B.cn)("absolute -bottom-5 flex w-full justify-center",{hidden:k.showWelcomeScreen}),children:(0,y.jsx)("p",{className:"text-text-muted whitespace-nowrap text-[10px]",children:"Inputs are processed by third-party AI and responses may be inaccurate."})})]}),(0,y.jsx)("div",{className:(0,B.cn)("absolute z-10 w-full","/c/new"===u||d?"-top-2 -translate-y-full":"-bottom-2 translate-y-full",!k.showLegalCopy&&"hidden"),inert:!k.showLegalCopy,children:(0,y.jsx)(rd,{"data-sentry-element":"LegalCopy","data-sentry-source-file":"evaluation-form.tsx"})})]})]}),(0,y.jsx)(so,{open:k.shouldShowMobileVoteFtue,"data-sentry-element":"MobileVoteOnboarding","data-sentry-source-file":"evaluation-form.tsx"})]})}function rj(e){let{checkpointInView:t,lastMessagesArr:a}=e,n=(0,U.g)(e=>e);(0,D.useEffect)(()=>{var e;0!==n.lastMessageIds.length&&0!==a.length&&!n.hasViewedLatestResponses&&t&&(null==(e=a[0])?void 0:e.role)!==b.PG.USER&&a.every(e=>[b.nH.SUCCESS,b.nH.FAILED].includes(e.status))&&n.setHasViewedLatestResponses(!0)},[n,t,n.hasViewedLatestResponses,n.lastMessageIds.length,a])}var rN=a(41823);function rE(e,t,a){let{pairwiseFeedbacks:n,mode:s,modality:r}=(0,U.g)((0,H.k)(e=>({pairwiseFeedbacks:e.pairwiseFeedbacks,mode:e.mode,modality:e.modality})));return(0,D.useMemo)(()=>{var l;return r===b.Jg.IMAGE?null:s===b.lY.DIRECT?"a":(null==a||null==(l=a.get("a"))?void 0:l.pairwiseFeedbackId)!=null?null:null!=e&&"win"===ny(e,n)?"a":null!=t&&"win"===ny(t,n)?"b":null},[r,s,a,e,t,n])}function rC(e,t,a,n){if(n===b.Jg.WEBDEV)return{shouldShowA:null!=t,shouldShowB:null!=a,shouldRenderBoth:null!=t&&null!=a};let s=null!=t&&(null==a||"b"!==e),r=null!=a&&(null==t||"a"!==e);return{shouldShowA:s,shouldShowB:r,shouldRenderBoth:s&&r}}function rT(e){let{messageA:t,messageB:a,firstMessageMap:n}=e,s=(0,J._P)("webapp_chat_battle_side_by_side_mobile_carousel"),r=(0,U.g)(e=>e.mode),[l,i]=(0,D.useState)(!1),o=rE(t,a,n),d=function(e,t,a,n){if(null!=e&&n!==b.lY.DIRECT)return"a"===e?a:t}(o,t,a,r);return(0,y.jsxs)(y.Fragment,{children:[d&&(0,y.jsx)("div",{className:"flex w-full flex-col",children:(0,y.jsxs)("div",{children:[(0,y.jsxs)(E.$,{variant:"textLink",className:"gap-1 pl-0",onClick:()=>i(!0),children:[(0,y.jsx)(rN.A,{size:18}),(0,y.jsx)("span",{children:"See other response"})]}),(0,y.jsx)(nI,{renderExpandedMessage:l,setRenderExpandedMessage:i,message:d})]})}),(0,y.jsx)("treatment-1"===s?r_:rA,{messageA:t,messageB:a,selectedMessage:o,"data-sentry-element":"InnerMessageGroupComponent","data-sentry-source-file":"message-group.tsx"})]})}function rA(e){let{messageA:t,messageB:a,selectedMessage:n}=e,s=(0,U.g)(e=>e.modality),{shouldShowA:r,shouldShowB:l}=rC(n,t,a,s),i=s===b.Jg.WEBDEV;return(0,y.jsxs)("div",{className:(0,B.cn)("flex min-w-0",i?"flex-col gap-4":"flex-col gap-2 lg:flex-row lg:gap-3"),"data-sentry-component":"SideBySideOrStackedMessageGroup","data-sentry-source-file":"message-group.tsx",children:[r&&t&&(0,y.jsx)(nV,{message:t,selectedMessage:n,messageLayoutMode:"container",className:(0,B.cn)({"max-w-full":i,"lg:max-w-[768px]":!i&&!l})},"agent-a--message"),l&&a&&(0,y.jsx)(nV,{message:a,selectedMessage:n,messageLayoutMode:"container",className:(0,B.cn)({"max-w-full":i,"lg:max-w-[768px]":!i&&!r})},"agent-b--message")]})}function r_(e){let{messageA:t,messageB:a,selectedMessage:n}=e,s=a7.Fr,r=(0,U.g)(e=>e.modality),{shouldShowA:l,shouldShowB:i,shouldRenderBoth:o}=(0,D.useMemo)(()=>rC(n,t,a,r),[n,t,a,r]),d=(e=>{let[t,a]=e;return(0,U.g)((e=>{let[t,a]=e,n="string"==typeof t?t:null==t?void 0:t.id,s="string"==typeof a?a:null==a?void 0:a.id;return(0,nq.Mz)([e=>e.pairwiseFeedbacks],e=>e.some(e=>e.messageAId===n||e.messageBId===s))})([t,a]))})([null==t?void 0:t.id,null==a?void 0:a.id]),c=(0,D.useCallback)(e=>s&&o&&(e.canScrollNext()||e.canScrollPrev()),[s,o]);return(0,y.jsxs)(n3,{edgeToEdgePadding:"var(--chat-padding)",opts:{watchDrag:c,duration:15},messageA:t,messageB:a,"data-sentry-element":"Carousel","data-sentry-component":"CarouselMessageGroup","data-sentry-source-file":"message-group.tsx",children:[(0,y.jsxs)(n5,{className:"@container/carousel","data-sentry-element":"CarouselContent","data-sentry-source-file":"message-group.tsx",children:[l&&t&&(0,y.jsx)(rk,{message:t,selectedMessage:n,isRenderingAlone:!i},"agent-a-message"),i&&a&&(0,y.jsx)(rk,{message:a,selectedMessage:n,isRenderingAlone:!l},"agent-b-message")]}),!d&&(0,y.jsx)(n8,{className:"left-2 drop-shadow",variant:"secondary",hideOnDisable:!0}),!d&&(0,y.jsx)(n9,{className:"right-2 drop-shadow",variant:"secondary",hideOnDisable:!0}),(0,y.jsx)(n7,{messageA:t,messageB:a,"data-sentry-element":"CarouselControls","data-sentry-source-file":"message-group.tsx"})]})}function rk(e){let{message:t,selectedMessage:a,isRenderingAlone:n}=e;return(0,y.jsx)(n6,{className:n?"max-w-[768px]":"@[752px]/carousel:basis-1/2 basis-[calc(100%-theme(spacing.8))]","data-sentry-element":"CarouselItem","data-sentry-component":"CarouselMessage","data-sentry-source-file":"message-group.tsx",children:(0,y.jsx)(nV,{message:t,selectedMessage:a,messageLayoutMode:"container","data-sentry-element":"AssistantMessage","data-sentry-source-file":"message-group.tsx"})})}var rI=a(58932);function rR(e){let{mode:t}=e,a=(0,rI.m)(),[n]=(0,D.useState)(tz()),[s]=(0,D.useState)(tz());return(0,y.jsxs)("div",{className:(0,B.cn)("flex gap-4 p-4 duration-500",{"animate-in fade-in":a,"opacity-0":!a}),"data-sentry-component":"MessagesSkeleton","data-sentry-source-file":"message-skeleton.tsx",children:[(0,y.jsx)("div",{className:"flex flex-1 flex-col gap-4",children:n.map(e=>(0,y.jsx)(a9.E,{className:e.className},e.id))}),t===b.lY.DIRECT?null:(0,y.jsx)("div",{className:"flex flex-1 flex-col gap-4",children:s.map(e=>(0,y.jsx)(a9.E,{className:e.className},e.id))})]})}var rS=a(27735),rD=a(66696),rM=a(32158),rL=a(13258),rO=a(55120);let rP=[{icon:rS.A,name:"Game",variations:[{label:"Flappy Bird Game",prompt:"Build a Flappy Bird clone with gravity physics, scrolling pipes with collision detection, score tracking, persistent high scores, particle effects, sound effects, and start/game-over screens."},{label:"Snake Game",prompt:"Create a classic Snake game with smooth movement, growing snake mechanics, food spawning, collision detection, score tracking, game over screen, and increasing difficulty speed."},{label:"Tetris Clone",prompt:"Build a Tetris game with falling tetrominoes, rotation mechanics, line clearing, score system, next piece preview, level progression, hold piece feature, and smooth animations."},{label:"Breakout Game",prompt:"Design a Breakout/Arkanoid game with paddle controls, bouncing ball physics, destructible brick blocks, power-ups (multi-ball, wider paddle), lives system, level progression, and particle effects."},{label:"Space Invaders",prompt:"Create a Space Invaders game with player ship movement, shooting mechanics, enemy formations, progressive difficulty, shield blocks, UFO bonus enemies, sound effects, and wave-based progression."},{label:"Pong Game",prompt:"Build a Pong game with two paddles, ball physics, score tracking, AI opponent, difficulty levels, power-ups (speed boost, paddle size), smooth animations, and multiplayer support."},{label:"Asteroids Game",prompt:"Design an Asteroids game with ship rotation and thrust, asteroid destruction, shooting mechanics, wrap-around screen edges, particle effects, UFO enemies, lives system, and progressive difficulty."},{label:"2048 Puzzle",prompt:"Create a 2048 tile-sliding puzzle game with swipe gestures, tile merging animations, score tracking, undo functionality, best score persistence, smooth transitions, and win condition detection."},{label:"Candy Crush Clone",prompt:"Build a Candy Crush-style match-3 puzzle game with colorful candy pieces, swipe mechanics, match detection, cascading combos, special candy effects, level progression, score multipliers, and satisfying animations."}]},{icon:rD.A,name:"Clone",variations:[{label:"Spotify Player Clone",prompt:"Create a Spotify player clone with play/pause controls, progress bar, volume slider, song queue, album art display, track information, shuffle/repeat modes, and smooth transitions."},{label:"Stripe Homepage Clone",prompt:"Build a Stripe-style homepage with beautiful gradient animations, smooth scroll effects, interactive product demos, elegant typography, and mesmerizing background patterns."},{label:"Figma Clone",prompt:"Design a Figma-like design tool with canvas interactions, layer panels, vector editing tools, zoom/pan controls, selection handles, and collaborative cursors."},{label:"Notion Clone",prompt:"Create a Notion-style note-taking app with block-based editing, drag-and-drop reorganization, markdown support, inline databases, and beautiful typography."},{label:"Linear Clone",prompt:"Build a Linear-style project management interface with command palette, keyboard shortcuts, smooth animations, issue tracking, and polished interactions."},{label:"Stripe Checkout Clone",prompt:"Design a Stripe-style checkout form with animated inputs, real-time validation, card number formatting, smooth transitions, and elegant error handling."},{label:"Discord Clone",prompt:"Create a Discord-style chat interface with server sidebar, channel navigation, message threads, real-time updates, and smooth scroll behavior."},{label:"VS Code Clone",prompt:"Build a VS Code-style code editor with sidebar, file explorer, tab system, syntax highlighting, command palette, and extension-like architecture."},{label:"GitHub Dashboard Clone",prompt:"Design a GitHub-style dashboard with activity graphs, repository cards, contribution heatmap, issue tracking, pull request overview, and clean, developer-focused UI."}]},{icon:rM.A,name:"3D",variations:[{label:"Colosseum Simulator",prompt:"Design an elaborate, detailed, and vibrant voxel-art scene depicting the Colosseum in Ancient Rome with surrounding architecture, atmospheric lighting, and interactive camera controls."},{label:"Statue of Liberty",prompt:"Create a dawn fly-around of the Statue of Liberty on Liberty Island with a reflective harbor and the Lower Manhattan skyline beyond, featuring realistic lighting, textures, and smooth camera movements."},{label:"Mechanical Watch Mechanism",prompt:"Build a realistic, working, and accurate 3D mechanical watch mechanism with interactive controls, multiple layers, camera navigation, and detailed inspection of different mechanism elements."},{label:"Weather App 3D",prompt:"Create a polished, creative weather app with vivid, 3D-animated weather types taken to the extreme, allowing users to switch between different cities and weather conditions with stunning visuals."},{label:"Solar System 3D",prompt:"Build an interactive 3D solar system with orbiting planets, realistic textures, orbital paths, zoom controls, planet information tooltips, time speed controls, and celestial body scaling."},{label:"3D Terrain Generator",prompt:"Build a 3D terrain generator with procedurally generated landscapes, height maps, texture mapping, camera controls, fog effects, and interactive terrain editing."},{label:"3D Building Viewer",prompt:"Design a 3D building viewer with architectural models, floor plan navigation, room highlighting, interactive hotspots, camera presets, and smooth transitions."},{label:"Three-Body Simulation",prompt:"Create a 3D three-body gravitational simulation with constrained environment edges, interactive controls, and visually impressive orbital mechanics."},{label:"Subway Map Generator",prompt:"Procedurally generate beautiful 3D transit maps in the style of classic designs (e.g., London Underground), handling routing, station placement, and line intersections elegantly."}]},{icon:rL.A,name:"Animation",variations:[{label:"Boids Flocking Simulation",prompt:"Create a mesmerizing flocking simulation with thousands of individuals (birds/fish) using simple rules to create emergent patterns, realistic group behavior, and highly performant optimization."},{label:"Lightning Generator",prompt:"Design fractal lightning with realistic branching, 3D volumetric glow effects, interactive clicks to create strikes, adjustable voltage and atmosphere, featuring cloud-to-ground, Tesla coil, and Jacob's ladder types."},{label:"Strange Attractors",prompt:"Visualize Lorenz, Roessler, or other chaotic attractors showing trajectories that never repeat but stay confined to butterfly-shaped patterns, with highly engaging visualization and free camera controls."},{label:"Fluid Dynamics Simulator",prompt:"Build a real-time water/smoke simulation with particle physics, interactive obstacles, viscosity changes, wind adjustment, 3D visualization with realistic lighting, and support for different fluid types (water, honey, gas)."},{label:"Sorting Algorithm Race",prompt:"Show multiple sorting algorithms running simultaneously on the same data, racing each other, making it mesmerizing to watch with clear differences and factually correct implementations."},{label:"Fireworks Display",prompt:"Create a spectacular fireworks show with multiple rocket types, realistic explosions, particle trails, sound synchronization, celebratory timing and choreography, ensuring high performance and optimization."},{label:"Falling Sand Sandbox",prompt:"Build a falling sand simulation with multiple materials (sand, water, oil, fire, smoke, steam), simple interactions between materials, brush sizes, erase and fill tools, and save/load functionality."},{label:"Soft-Body Playground",prompt:"Design squishy 2D/3D blobs that jiggle and collide, with tear, merge, and pin areas featuring delightful motion, slow-mo effects, and trails for juicy visuals."},{label:"Cloth and Wind Simulator",prompt:"Simulate flag-like cloth that ripples in wind, with pin/unpin corners and points, collision with simple shapes, pause/reset functionality, and adjustable wind strength."}]},{icon:rO.A,name:"Interactive Tool",variations:[{label:"Personal Finance Tracker",prompt:"Build a personal finance tracker with income/expense entry, category-based spending breakdowns with charts, budget limits with progress bars, transaction history with filters, and monthly trends visualization."},{label:"Habit Tracker",prompt:"Create a habit tracker with daily check-ins, streak tracking, calendar visualization, progress charts, customizable habits, reminder notifications, and statistics dashboard."},{label:"Project Management Tool",prompt:"Design a project management tool with task boards, drag-and-drop organization, due dates, priority levels, team collaboration, progress tracking, and filter/search functionality."},{label:"Time Tracking Dashboard",prompt:"Build a time tracking dashboard with start/stop timers, project categorization, daily/weekly/monthly analytics, visual reports, export functionality, and productivity insights."},{label:"Markdown Note-Taking App",prompt:"Create a markdown note-taking app with folder organization, search functionality, tag system, export options, dark/light theme, and live preview."},{label:"URL Shortener",prompt:"Design a URL shortener with custom aliases, click analytics, QR code generation, expiration dates, link management dashboard, and export functionality."},{label:"Pomodoro Timer",prompt:"Build a Pomodoro timer with customizable work/break intervals, session statistics, progress tracking, sound notifications, and productivity insights."},{label:"Expense Splitter",prompt:"Create an expense splitter tool for splitting bills with multiple people, calculating shares, supporting different currencies, expense history, and settlement tracking."},{label:"Password Manager",prompt:"Design a password manager with secure storage, password generation, category organization, search functionality, auto-fill capabilities, and export options."}]}];function rz(e){let{sendMessage:t}=e,[a,n]=(0,U.g)((0,H.k)(e=>[e.mode,e.setMode])),s=(0,U.g)(e=>e.userId),{modelAId:r,modelBId:l}=(0,ex.g)(e=>e),i=(0,D.useMemo)(()=>rP.map(e=>{var t;let a=Math.floor(Math.random()*e.variations.length),n=null!=(t=e.variations[a])?t:e.variations[0];if(!n)throw Error("Theme ".concat(e.name," has no variations"));return{icon:e.icon,label:n.label,tooltip:n.label,prompt:n.prompt}}),[]),o=(0,D.useCallback)(async e=>{A.z.capture({action:"webdev_suggestion_clicked",params:{button_label:e.label,mode:a,user_id:s,model_a_id:r,model_b_id:l}});let i=s5[a];(!i.requiresModelA||(null==r?void 0:r.trim()))&&(!i.requiresModelB||(null==l?void 0:l.trim()))||n(b.lY.BATTLE);try{await t(e.prompt,{isPresetPrompt:!0,presetLabel:e.label})}catch(e){console.error("Failed to send message:",e)}},[a,s,r,l,n,t]);return(0,y.jsx)(tG.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"scrollbar-hide flex flex-col items-start gap-2 overflow-x-auto py-1 sm:flex-row sm:items-center sm:justify-center","data-sentry-element":"unknown","data-sentry-component":"WebDevSuggestionsButtons","data-sentry-source-file":"webdev-suggestions-buttons.tsx",children:(0,y.jsx)("div",{className:"flex w-full shrink-0 flex-nowrap items-center justify-start gap-2 sm:flex-wrap sm:justify-center",children:(0,y.jsx)("div",{className:"flex w-auto shrink-0 flex-nowrap items-center gap-2 sm:w-full sm:flex-wrap sm:justify-center",children:i.map((e,t)=>{let a=e.icon;return(0,y.jsxs)(E.$,{onClick:()=>{o(e)},className:(0,B.cn)("bg-surface-primary border-border-faint text-interactive-active hover:text-interactive-normal hover:bg-surface-secondary active:text-text-tertiary active:bg-surface-secondary shrink-0 rounded-full border px-3 py-2 text-xs font-normal focus-visible:ring-offset-0"),children:[(0,y.jsx)(a,{className:"size-4"}),e.label]},t)})})})})}function rB(e){let{evaluationFormProps:t,textAreaRef:a,fileInputRef:n,scrollableAreaRef:s,checkpointElementRef:r,messageThreads:l,latestMessages:i}=e,{ref:o,inView:d}=(0,nQ.Wx)({threshold:0,rootMargin:eY});rj({checkpointInView:d,lastMessagesArr:null!=i?i:[]});let c="treatment-1"===(0,J._P)("webapp_chat_battle_side_by_side_mobile_carousel"),u=(0,eJ.d)("md"),m=re(),p=(0,_.kH)(e=>e.user),x=(0,_.kH)(_.Q_),f=(0,U.g)((0,H.k)(e=>({id:e.id,mode:e.mode,loading:e.loading,modality:e.modality}))),h=f.modality===b.Jg.WEBDEV&&(!l||0===l.length),g=(0,D.useMemo)(()=>null==l?void 0:l.map(e=>{let t=e.get(tg.BQ.a),a=e.get(tg.BQ.b);return(null==t?void 0:t.role)===b.PG.USER?(0,y.jsx)(nW,{message:t},null==t?void 0:t.id):null!=t&&null==a?(0,y.jsx)(nV,{message:t,selectedMessage:"a",messageLayoutMode:"page",className:"lg:max-w-[768px]"},t.id):(0,y.jsx)(rT,{messageA:t,messageB:a,firstMessageMap:l[0]},"".concat(null==t?void 0:t.id).concat(null==a?void 0:a.id))}),[l]);return(0,y.jsx)(nZ,{"data-sentry-element":"CarouselTouchAreaContextProvider","data-sentry-component":"EvaluationChat","data-sentry-source-file":"evaluation-chat.tsx",children:(0,y.jsx)("div",{className:"relative flex min-h-0 flex-1 flex-col",children:(0,y.jsxs)("div",{className:"absolute inset-0 flex flex-col",children:[(0,y.jsx)(nY.N,{mode:"wait",initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-source-file":"evaluation-chat.tsx",children:f.loading?(0,y.jsx)("div",{className:"-mb-4 min-h-0 flex-1",children:(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,y.jsx)(rR,{mode:f.mode})})}):(null==l?void 0:l.length)&&l.length>0?(0,y.jsx)("div",{className:"-mb-4 min-h-0 flex-1",children:(0,y.jsx)(sa,{ref:s,className:"h-full min-h-0 flex-1",children:(0,y.jsx)("div",{className:"relative h-full w-full overscroll-none",children:(0,y.jsxs)("div",{className:(0,B.cn)("flex h-full flex-col items-center","px-[--chat-padding] [--chat-padding:theme(spacing.4)]"),children:[(0,y.jsxs)("ol",{className:(0,B.cn)("mt-8 flex w-full max-w-screen-xl grow flex-col-reverse justify-end gap-4 overscroll-none pb-2 duration-500",{"md:pb-24":m}),children:[(0,y.jsx)("div",{className:"h-0",ref:e=>{o(e),r.current=e}}),g]}),c&&u&&a7.Fr&&(0,y.jsx)(n4,{latestMessages:null!=i?i:[]})]})})})}):(0,y.jsx)(tG.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"flex flex-1 flex-col items-center justify-center px-4",children:(0,y.jsx)("div",{className:"w-full max-w-2xl text-center",children:(0,y.jsx)("p",{className:"text-text-muted text-2xl sm:text-5xl",children:null==p||x?"":"Welcome back"})})},"empty-state")}),(0,y.jsx)("div",{className:"flex flex-col items-center px-4 pb-6",children:(0,y.jsxs)("div",{className:"w-full md:max-w-screen-xl",children:[h&&(0,y.jsx)("div",{className:"relative z-[1] mb-3",style:{minHeight:"1.875rem"},children:(0,y.jsx)(rz,{sendMessage:t.sendMessage})}),(0,D.createElement)(rw,{...t,textAreaRef:a,fileInputRef:n,key:"evaluation-form-".concat(f.id),"data-sentry-element":"EvaluationForm","data-sentry-source-file":"evaluation-chat.tsx"})]})})]})})})}!function(e){e.DIRECT="direct",e.SIDE_BY_SIDE="side-by-side",e.BATTLE="battle"}(n||(n={})),function(e){e.UPVOTE="upvote",e.DOWNVOTE="downvote"}(s||(s={})),function(e){e.MODEL_A="model_a",e.MODEL_B="model_b",e.TIE="tie",e.BOTH_BAD="both_bad"}(r||(r={})),function(e){e.PUBLIC="public",e.PRIVATE="private"}(l||(l={})),function(e){e.EMAIL="email",e.GOOGLE="google"}(i||(i={})),function(e){e.SYSTEM="system",e.USER="user",e.ASSISTANT="assistant",e.DATA="data"}(o||(o={})),function(e){e.PENDING="pending",e.SUCCESS="success",e.FAILED="failed",e.FLAGGED="flagged"}(d||(d={})),function(e){e.SYSTEM="system",e.USER="user",e.ASSISTANT="assistant",e.TOOL="tool"}(c||(c={})),function(e){e.CHAT="chat",e.WEBDEV="webdev",e.SEARCH="search",e.IMAGE="image",e.P2L="p2l",e.VIDEO="video"}(u||(u={})),function(e){e.USER_ID="user_id",e.USER_IP="user_ip",e.USER_ID_AND_IP="user_id_and_ip"}(m||(m={})),function(e){e.HEALTHY="healthy",e.UNHEALTHY="unhealthy"}(p||(p={})),function(e){e.ACTIVE="active",e.DEPRECATED="deprecated"}(x||(x={})),function(e){e.PUBLIC="public",e.PRIVATE="private"}(f||(f={})),function(e){e.PUBLIC="public",e.PRIVATE="private"}(h||(h={})),eK.z.enum(["text","vision","text-to-image","image-edit","multi-image-edit","webdev","copilot","search","text-to-video","image-to-video"]),function(e){e.CREATE="create",e.UPDATE="update"}(g||(g={})),function(e){e.PENDING="pending",e.SCHEDULED="scheduled",e.PAUSED="paused",e.COMPLETED="completed",e.ARCHIVED="archived",e.CANCELLED="cancelled",e.REJECTED="rejected",e.PASSED_DEADLINE="passed_deadline"}(v||(v={}));var rU=a(71325);function rF(e){let{size:t=rU.U,...a}=e;return(0,y.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a,"data-sentry-element":"svg","data-sentry-component":"AnimatedSpinner","data-sentry-source-file":"animated-spinner.tsx",children:(0,y.jsx)("path",{d:"M21 12C20.9999 13.9006 20.3981 15.7524 19.2809 17.2899C18.1637 18.8275 16.5885 19.9719 14.7809 20.5592C12.9733 21.1464 11.0262 21.1464 9.21864 20.559C7.41109 19.9717 5.83588 18.8272 4.71876 17.2895C3.60165 15.7519 2.99999 13.9001 3 11.9995C3.00001 10.0989 3.60171 8.24712 4.71884 6.70951C5.83598 5.1719 7.4112 4.02742 9.21877 3.44009C11.0263 2.85276 12.9734 2.85273 14.781 3.44001",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","data-sentry-element":"path","data-sentry-source-file":"animated-spinner.tsx"})})}var rH=a(56771),rG=a(98329);let rV={"image/png":[".png"],"image/jpeg":[".jpg",".jpeg"],"image/webp":[".webp"]},rW=e=>{if(e.length>0){let t,a=e.map(e=>e.errors.map(e=>e.message).join(", ")),n=t=>e.some(e=>e.errors.some(e=>e.code===t));t=n(rH.O4.FileInvalidType)?"Failed to upload file. Unsupported file type.":n(rH.O4.FileTooLarge)?"Failed to upload file. Make sure the file is less than ".concat(15,"MB"):"Failed to upload file.",M.oR.error(t,{dismissible:!0}),console.error(a.join("\n"))}};var rY=a(69742);let rQ=(0,w.createServerReference)("70cb393626e05a5f0ce7dcb46977c36c139fa85f91",w.callServer,void 0,w.findSourceMapURL,"generateUploadUrl"),rJ=(0,w.createServerReference)("6064c365792a3eaf40a60a874b327fe031ea6f22d7",w.callServer,void 0,w.findSourceMapURL,"getSignedUrl");async function rq(e){try{let t=await rQ(e.name,e.type);if(!t.success||null==t.data)throw Error("Failed to generate upload URL");let{uploadUrl:a,key:n}=t.data;if(!(await fetch(a,{method:"PUT",body:e})).ok)throw Error("Failed to upload file");let s=await rJ(n.startsWith("/")?n.slice(1):n);if(!s.success||null==s.data)throw Error("Failed to get signed url");let r=s.data.url;return{key:n,url:r,mimeType:e.type}}catch(e){throw console.error("File upload failed:",e),e}}var r$=a(19352),rK=a(69405);function rX(e){let{evaluationFormProps:t,textAreaRef:a,fileInputRef:n}=e,s=(0,U.g)(e=>e.modality)===b.Jg.WEBDEV;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"flex w-full flex-1 flex-col items-center justify-center px-4",children:(0,y.jsxs)("div",{className:"w-full max-w-[800px]",children:[(0,y.jsx)(sH,{"data-sentry-element":"WelcomeScreen","data-sentry-source-file":"landing-new-user.tsx"}),(0,y.jsxs)(tG.P.div,{className:"relative hidden w-full max-w-full sm:block",initial:"hidden",animate:"visible",variants:sP,transition:{...sz,delay:.4},"data-sentry-element":"unknown","data-sentry-source-file":"landing-new-user.tsx",children:[(0,y.jsx)(tG.P.div,{className:"bg-interactive-cta pointer-events-none absolute inset-[-20px]",style:{opacity:0,filter:"blur(44px)",transform:"translate3d(0, 0, 0)"},initial:{opacity:0},animate:{opacity:.12},transition:{...sz,delay:.6},"data-sentry-element":"unknown","data-sentry-source-file":"landing-new-user.tsx"}),(0,y.jsx)(rw,{...t,textAreaRef:a,fileInputRef:n,"data-sentry-element":"EvaluationForm","data-sentry-source-file":"landing-new-user.tsx"}),(0,y.jsx)("div",{className:"relative z-[1] mt-2 hidden sm:block",style:{minHeight:"3.75rem"},children:s&&(0,y.jsx)(rz,{sendMessage:t.sendMessage})})]})]})}),(0,y.jsx)("div",{className:"w-full flex-none sm:hidden",children:(0,y.jsx)("div",{className:"flex flex-shrink-0 flex-col items-center pb-6",children:(0,y.jsxs)("div",{className:"relative w-full md:max-w-screen-xl",children:[(0,y.jsx)(tG.P.div,{className:"bg-interactive-cta pointer-events-none absolute inset-[-4px]",style:{opacity:0,filter:"blur(24px)",transform:"translate3d(0, 0, 0)"},initial:{opacity:0},animate:{opacity:.12},transition:{...sz,delay:.6},"data-sentry-element":"unknown","data-sentry-source-file":"landing-new-user.tsx"}),(0,y.jsxs)("div",{className:"px-3",children:[(0,y.jsx)("div",{className:"relative z-[1] mb-3 sm:hidden",style:{minHeight:"1.875rem"},children:s&&(0,y.jsx)(rz,{sendMessage:t.sendMessage})}),(0,y.jsx)(rw,{...t,textAreaRef:a,fileInputRef:n,"data-sentry-element":"EvaluationForm","data-sentry-source-file":"landing-new-user.tsx"})]})]})})})]})}function rZ(){let e=(0,U.g)(e=>0===e.messages.length),t=(0,_.kH)(_.Q_),a=(0,eJ.d)("md"),{setLocation:n}=(0,eL.G)();return e&&a&&t?(0,y.jsxs)("div",{className:"border-border-faint m-4 flex w-[calc(100%-1rem)] flex-col gap-2 rounded-lg border p-2","data-sentry-component":"MobileLoginCta","data-sentry-source-file":"mobile-login-cta.tsx",children:[(0,y.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,y.jsxs)("div",{className:"flex items-center gap-1",children:[(0,y.jsx)("h1",{className:"text-interactive-link font-heading text-base font-bold",children:"NEW"}),(0,y.jsx)("p",{className:"text-header-primary font-heading text-base font-medium",children:"Take your chats anywhere"})]}),(0,y.jsx)("div",{className:"text-text-secondary text-xs font-normal",children:"Create an account to sync your chat history across your devices and take your chat anywhere."})]}),(0,y.jsx)("div",{className:"flex justify-between gap-2",children:(0,y.jsx)(E.$,{onClick:()=>n("mobile-welcome-screen"),variant:"tertiary",className:"flex flex-1 gap-2","data-sentry-element":"Button","data-sentry-source-file":"mobile-login-cta.tsx",children:"Login"})})]}):null}var r0=a(26642),r1=a(66370);let r2=e=>{let{className:t,...a}=e;return(0,y.jsx)(r1.YZ,{className:(0,B.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...a,"data-sentry-element":"unknown","data-sentry-component":"ResizablePanelGroup","data-sentry-source-file":"resizable.tsx"})},r4=r1.Zk,r3=e=>{let{withHandle:t,className:a,...n}=e;return(0,y.jsx)(r1.TW,{className:(0,B.cn)("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",a),...n,"data-sentry-element":"unknown","data-sentry-component":"ResizableHandle","data-sentry-source-file":"resizable.tsx",children:t&&(0,y.jsx)("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-sm border",children:(0,y.jsx)(r0.A,{className:"h-2.5 w-2.5"})})})};var r5=a(71457),r6=a(74429),r8=a(93058),r9=a(5885),r7=a(96842),le=a(9082),lt=a(96836),la=a(98935),ln=a(38820),ls=a(92010);let lr={light:{"--code-editor-bg":"hsl(var(--surface-primary))","--code-editor-text":"hsl(var(--text-primary))","--code-editor-border":"hsl(var(--border-faint) / 0.8)","--code-editor-gutter-bg":"hsl(var(--surface-primary))","--code-editor-gutter-color":"hsl(var(--text-tertiary))","--code-editor-gutter-active":"hsl(var(--text-secondary))","--code-editor-cursor":"hsl(var(--interactive-cta))","--code-editor-active-line":"hsl(var(--surface-highlight) / 0.65)","--code-editor-selection":"hsl(var(--interactive-cta) / 0.16)","--code-editor-selection-focused":"hsl(var(--interactive-cta) / 0.26)","--code-editor-tooltip-bg":"hsl(var(--surface-floating))","--code-editor-tooltip-border":"hsl(var(--border-faint))","--code-editor-tooltip-color":"hsl(var(--text-primary))","--code-editor-tooltip-shadow":"rgba(15, 23, 42, 0.12)","--code-editor-fold-color":"hsl(var(--interactive-link))","--code-editor-fold-hover":"hsl(var(--interactive-cta-hover))"},dark:{"--code-editor-bg":"hsl(var(--surface-primary))","--code-editor-text":"hsl(var(--text-primary))","--code-editor-border":"hsl(var(--border-faint) / 0.45)","--code-editor-gutter-bg":"hsl(var(--surface-primary))","--code-editor-gutter-color":"hsl(var(--text-tertiary))","--code-editor-gutter-active":"hsl(var(--text-secondary))","--code-editor-cursor":"hsl(var(--interactive-cta))","--code-editor-active-line":"hsl(var(--surface-highlight) / 0.75)","--code-editor-selection":"hsl(var(--interactive-cta) / 0.28)","--code-editor-selection-focused":"hsl(var(--interactive-cta) / 0.38)","--code-editor-tooltip-bg":"hsl(var(--surface-floating))","--code-editor-tooltip-border":"hsl(var(--border-faint) / 0.6)","--code-editor-tooltip-color":"hsl(var(--text-primary))","--code-editor-tooltip-shadow":"rgba(0, 0, 0, 0.35)","--code-editor-fold-color":"hsl(var(--interactive-link))","--code-editor-fold-hover":"hsl(var(--interactive-cta))"}},ll=(0,ls.Lv)({markerDOM:e=>{let t=document.createElement("span");return t.className="cm-fold-marker".concat(e?" cm-fold-marker--open":" cm-fold-marker--closed"),t.setAttribute("aria-hidden","true"),t.innerHTML=e?'<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.7 5.25L7 8.55L10.3 5.25" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>':'<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 3.7L8.55 7L5.25 10.3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>',t}}),li=[ln.Lz.theme({"&":{color:"var(--code-editor-text)"},"&.cm-editor":{backgroundColor:"var(--code-editor-bg)",borderRadius:"inherit"},".cm-scroller":{fontFamily:'var(--font-dm-mono), "DM Mono", "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',lineHeight:"1.5"},".cm-line":{padding:"0 0 0 4px"},".cm-gutters":{backgroundColor:"var(--code-editor-gutter-bg) !important",borderRight:"none",color:"var(--code-editor-gutter-color)"},".cm-gutter.cm-lineNumbers":{fontFamily:'var(--font-dm-mono), "DM Mono", "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontSize:"12px",minWidth:"46px"},".cm-gutterElement.cm-activeLineGutter":{color:"var(--code-editor-gutter-active)",backgroundColor:"transparent"},".cm-foldGutter .cm-gutterElement":{padding:"0 8px 0 4px",color:"var(--code-editor-gutter-color)",display:"flex",alignItems:"center"},".cm-cursor":{borderLeftColor:"var(--code-editor-cursor)",borderLeftWidth:"2px"},".cm-activeLine":{backgroundColor:"var(--code-editor-active-line)"},".cm-selectionBackground":{backgroundColor:"var(--code-editor-selection) !important"},"&.cm-focused .cm-selectionBackground":{backgroundColor:"var(--code-editor-selection-focused) !important"},"&.cm-focused":{outline:"none"},".cm-tooltip":{backgroundColor:"var(--code-editor-tooltip-bg)",border:"1px solid var(--code-editor-tooltip-border)",boxShadow:"0 18px 38px var(--code-editor-tooltip-shadow)",color:"var(--code-editor-tooltip-color)"},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"var(--code-editor-tooltip-border)"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:"var(--code-editor-tooltip-bg)"},".cm-foldGutter .cm-gutterElement .cm-fold-marker":{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",marginRight:"4px",borderRadius:"4px",transition:"background-color 0.12s ease, color 0.12s ease",color:"var(--code-editor-fold-color)",transform:"translateY(1px)"},".cm-foldGutter .cm-gutterElement .cm-fold-marker--open":{color:"var(--code-editor-fold-color)"},".cm-foldGutter .cm-gutterElement .cm-fold-marker svg":{display:"block"},".cm-foldGutter .cm-gutterElement:hover .cm-fold-marker":{backgroundColor:"var(--code-editor-active-line)",color:"var(--code-editor-fold-hover)"}}),ll];function lo(e){let{code:t,contentType:a,className:n}=e,{resolvedTheme:s}=(0,at.D)(),r=(0,D.useRef)(null),l=(0,D.useRef)(t),i="dark"===s?"dark":"light",o=(0,D.useMemo)(()=>lr[i],[i]);return function(e,t){let a=(0,D.useRef)(e);(0,D.useEffect)(()=>{if(t)if(e.startsWith(a.current)){let n=e.slice(a.current.length);if(n){let s=t.state.doc.length;t.dispatch({changes:{from:s,to:s,insert:n},annotations:ln.ZX.addToHistory.of(!1)}),a.current=e}}else t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e},annotations:ln.ZX.addToHistory.of(!1)}),a.current=e},[e,t])}(t,r.current),(0,y.jsx)("div",{className:(0,B.cn)("relative h-full overflow-hidden border-b border-r shadow-sm",n),style:o,"data-sentry-component":"CodeEditor","data-sentry-source-file":"code-editor.tsx",children:(0,y.jsx)("div",{className:"absolute inset-0",children:(0,y.jsx)(ln.Ay,{value:l.current,theme:"light"===i?la.jL:la.Ts,height:"100%",style:lc,basicSetup:ld,extensions:lu[a],readOnly:!0,onCreateEditor:e=>{r.current=e},"data-sentry-element":"CodeMirror","data-sentry-source-file":"code-editor.tsx"})})})}let ld={lineNumbers:!0,highlightActiveLine:!0,foldGutter:!1},lc={fontSize:"12px",height:"100%",fontFamily:'var(--font-dm-mono), "DM Mono", "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},lu={"text/html":[(0,r9.qy)(),...li],"text/javascript":[(0,r7.Q2)({jsx:!0,typescript:!0}),...li],"text/css":[(0,r8.AH)(),...li],"text/markdown":[(0,lt.wD)(),...li],"application/json":[(0,le.Pq)(),...li],"text/plain":li};var lm=a(96297);function lp(e){let{selectedFile:t}=e,[,a]=(0,no.A)(),n=(0,D.useCallback)(()=>{if(!t.content)return;let e=new Blob([t.content],{type:t.contentType}),a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t.path,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)},[t]),s=(0,D.useCallback)(()=>{t.content?a(t.content):a(t.path)},[t,a]),r=!!t.content;return(0,y.jsxs)("div",{className:"bg-surface-primary border-border-faint flex min-h-[34px] items-center justify-between gap-2 border-b px-4","data-sentry-component":"FileSelectorBar","data-sentry-source-file":"file-selector-bar.tsx",children:[(0,y.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,y.jsx)(lm.A,{className:"text-text-tertiary size-4 shrink-0","data-sentry-element":"FileText","data-sentry-source-file":"file-selector-bar.tsx"}),(0,y.jsx)("span",{className:"text-text-primary truncate font-mono text-sm",children:t.path})]}),(0,y.jsxs)("div",{className:"flex shrink-0 items-center gap-1",children:[(0,y.jsx)(a8.i,{size:14,variant:"ghost",className:(0,B.cn)("hover:bg-surface-tertiary hover:text-text-primary size-7 rounded-md p-0 transition-colors",!r&&"cursor-not-allowed opacity-30"),onClick:s,disabled:!r,"data-sentry-element":"CopyButton","data-sentry-source-file":"file-selector-bar.tsx"}),(0,y.jsx)(E.$,{variant:"ghost",size:"icon",className:(0,B.cn)("hover:bg-surface-tertiary hover:text-text-primary size-7 rounded-md p-0 transition-colors",!r&&"cursor-not-allowed opacity-30"),onClick:n,disabled:!r,"data-sentry-element":"Button","data-sentry-source-file":"file-selector-bar.tsx",children:(0,y.jsx)(nl.A,{className:"size-3.5","data-sentry-element":"Download","data-sentry-source-file":"file-selector-bar.tsx"})})]})]})}var lx=a(93275),lf=a(41201);function lh(e){let{className:t,message:a}=e,{data:n}=nN(a),s=(0,D.useMemo)(()=>{var e,t;return function(e){let t={};for(let n of e){let e=n.path.split("/"),s=e.pop();if(!s)continue;let r=t;for(let t of e){var a;null!=(a=r)[t]||(a[t]={type:"folder",children:{}}),"folder"===r[t].type&&(r=r[t].children)}r[s]={type:"file",file:n}}return function e(t,a){return Object.entries(t).map(t=>{let[n,s]=t,r=a?"".concat(a,"/").concat(n):n;return"file"===s.type?{type:"file",name:n,path:r,file:s.file}:{type:"folder",name:n,path:r,children:e(s.children,r)}})}(t,"")}((null!=(e=null==n?void 0:n.files)?e:[]).concat(null!=(t=null==n?void 0:n.templateFiles)?t:[]))},[n]);return 0===s.length?null:(0,y.jsxs)("div",{className:(0,B.cn)("bg-surface-primary w-60 overflow-y-auto",t),"data-sentry-component":"FileTree","data-sentry-source-file":"file-tree.tsx",children:[(0,y.jsx)("div",{className:"border-border-faint flex min-h-[34px] items-center border-b px-3",children:(0,y.jsx)("h2",{className:"text-text-tertiary text-xs font-semibold uppercase tracking-wide",children:"Files"})}),(0,y.jsx)("div",{className:"flex flex-col gap-0.5 p-2",children:s.map(e=>(0,y.jsx)(lg,{node:e},e.path))})]})}function lg(e){let{node:t}=e,[a,n]=tx();return"file"===t.type?(0,y.jsxs)(lv,{onClick:()=>n(t.file.path),isSelected:t.file.path===a,children:[(0,y.jsx)(lx.A,{className:"text-text-tertiary size-4 shrink-0"}),(0,y.jsx)("span",{className:"truncate",children:t.name})]}):(0,y.jsxs)(aT,{className:"[&[data-state=open]>button>svg:first-child]:rotate-90","data-sentry-element":"Collapsible","data-sentry-component":"Tree","data-sentry-source-file":"file-tree.tsx",children:[(0,y.jsx)(aA,{asChild:!0,"data-sentry-element":"CollapsibleTrigger","data-sentry-source-file":"file-tree.tsx",children:(0,y.jsxs)(lv,{"data-sentry-element":"MenuButton","data-sentry-source-file":"file-tree.tsx",children:[(0,y.jsx)(az.A,{className:"text-text-tertiary size-4 shrink-0 transition-transform","data-sentry-element":"ChevronRight","data-sentry-source-file":"file-tree.tsx"}),(0,y.jsx)(lf.A,{className:"text-text-tertiary size-4 shrink-0","data-sentry-element":"Folder","data-sentry-source-file":"file-tree.tsx"}),(0,y.jsx)("span",{className:"truncate",children:t.name})]})}),(0,y.jsx)(a_,{"data-sentry-element":"CollapsibleContent","data-sentry-source-file":"file-tree.tsx",children:(0,y.jsx)("div",{className:"flex min-w-0 flex-col gap-0.5 py-0.5 pl-3",children:t.children.map(e=>(0,y.jsx)(lg,{node:e},e.path))})})]})}function lv(e){let{isSelected:t=!1,className:a,...n}=e;return(0,y.jsx)("button",{type:"button",className:(0,B.cn)("flex w-full items-center gap-2 overflow-hidden rounded-md px-2 py-1.5 text-left text-sm outline-none transition-colors disabled:pointer-events-none disabled:opacity-50",t?"bg-surface-tertiary text-text-primary font-medium":"text-text-secondary hover:bg-surface-secondary hover:text-text-primary bg-transparent",a),...n,"data-sentry-component":"MenuButton","data-sentry-source-file":"file-tree.tsx"})}var ly=a(92321);function lb(e){let{statusText:t}=e,{RiveComponent:a}=(0,ae.useRive)({src:"/rive/building-loop.riv",autoplay:!0});return(0,y.jsxs)("div",{className:"text-center","data-sentry-component":"GeneratingCodeCard","data-sentry-source-file":"pane-cards.tsx",children:[(0,y.jsx)("div",{className:"mb-4 flex justify-center",children:(0,y.jsx)(a,{className:"h-32 w-32","data-sentry-element":"RiveComponent","data-sentry-source-file":"pane-cards.tsx"})}),(0,y.jsx)("p",{className:"text-text-secondary text-lg font-semibold",children:t}),(0,y.jsx)("p",{className:"text-text-tertiary max-w-[15rem] text-sm",children:"Preview will appear when agent is done working"})]})}function lw(){return(0,y.jsxs)("div",{className:"flex flex-col items-center gap-2","data-sentry-component":"NoCodeCard","data-sentry-source-file":"pane-cards.tsx",children:[(0,y.jsx)(ly.A,{className:"h-12 w-12","data-sentry-element":"EyeClosed","data-sentry-source-file":"pane-cards.tsx"}),(0,y.jsx)("p",{className:"font-medium",children:"No preview available"})]})}function lj(){return(0,y.jsxs)("div",{className:"flex flex-col items-center gap-4","data-sentry-component":"ErrorCard","data-sentry-source-file":"pane-cards.tsx",children:[(0,y.jsx)(nM.A,{className:"h-12 w-12","data-sentry-element":"Unlink","data-sentry-source-file":"pane-cards.tsx"}),(0,y.jsxs)("div",{className:"text-center",children:[(0,y.jsx)("p",{className:"font-medium",children:"Something went wrong"}),(0,y.jsx)("p",{className:"text-text-tertiary text-sm",children:"Please start a new chat and try again."})]}),(0,y.jsx)(E.$,{variant:"secondary",size:"md",className:"flex-1 gap-1 sm:flex-initial",asChild:!0,"data-sentry-element":"Button","data-sentry-source-file":"pane-cards.tsx",children:(0,y.jsxs)(N.Link,{href:"/","data-sentry-element":"Link","data-sentry-source-file":"pane-cards.tsx",children:[(0,y.jsx)(er.A,{className:"size-3.5","data-sentry-element":"SquarePen","data-sentry-source-file":"pane-cards.tsx"}),"New Chat"]})})]})}function lN(){var e,t,a;let[n]=tc(),s=tp(n),{data:r,error:l}=nN(null!=s?s:null),i=(null!=(e=null==r?void 0:r.files)?e:[]).concat(null!=(t=null==r?void 0:r.templateFiles)?t:[]),[o]=tx(),d=(0,eJ.d)("md");if(l)return(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,y.jsx)(lj,{})});if(!r)return null;if("pending"===r.status&&0===r.files.length)return(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,y.jsx)(lb,{statusText:"Thinking..."})});let c=null!=(a=i.find(e=>e.path===o))?a:i[0];if("build-error"===r.status||!c){let e=0===r.files.length;return(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:e?(0,y.jsx)(lw,{}):(0,y.jsx)(lj,{})})}return(0,y.jsx)("div",{className:"flex h-full flex-col","data-sentry-component":"CodePane","data-sentry-source-file":"code-pane.tsx",children:(0,y.jsxs)("div",{className:"flex flex-1",children:[!d&&(0,y.jsx)(lh,{className:"border-border-faint border-r",message:null!=s?s:null}),(0,y.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,y.jsx)(lp,{selectedFile:c,"data-sentry-element":"FileSelectorBar","data-sentry-source-file":"code-pane.tsx"}),(0,y.jsx)(lo,{code:c.content,contentType:c.contentType,className:"flex-1","data-sentry-element":"CodeEditor","data-sentry-source-file":"code-pane.tsx"})]})]})})}function lE(){let[e]=tc(),t=tp(e),{data:a,error:n}=nN(t),s=(0,U.g)(e=>e.markWebDevPreviewAsViewed);(0,D.useEffect)(()=>{(null==a?void 0:a.status)==="success"&&(null==t?void 0:t.id)&&s(t.id)},[null==a?void 0:a.status,null==t?void 0:t.id,s]);let[r]=th();if(n)return(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,y.jsx)(lj,{})});if(!a)return null;if("build-error"===a.status){let e=0===a.files.length;return(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:e?(0,y.jsx)(lw,{}):(0,y.jsx)(lj,{})})}if("pending"===a.status){let e=a.files.length>0;return(0,y.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,y.jsx)(lb,{statusText:e?"Building...":"Thinking..."})})}let l=new URL(a.previewUrl);return l.searchParams.set("v",r.toString()),(0,y.jsx)("iframe",{src:l.toString(),className:"h-full w-full border-0",sandbox:"allow-scripts allow-same-origin allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-presentation allow-popups",allow:"accelerometer; autoplay; camera; encrypted-media; fullscreen; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; usb; vr; xr-spatial-tracking; screen-wake-lock; magnetometer; ambient-light-sensor; battery; gamepad; picture-in-picture; display-capture; bluetooth",title:"Option ".concat(e.toUpperCase()," Preview"),referrerPolicy:"origin-when-cross-origin","data-sentry-component":"PreviewPane","data-sentry-source-file":"preview-pane.tsx"})}function lC(){let[e]=tu();return(0,y.jsx)("div",{className:"flex h-full flex-col","data-sentry-component":"WebDevArtifact","data-sentry-source-file":"webdev-artifact.tsx",children:(0,y.jsx)("div",{className:"flex-1 overflow-hidden",children:"preview"===e?(0,y.jsx)(lE,{}):(0,y.jsx)(lN,{})})})}function lT(e){let{className:t,hideOptionTabs:a=!1,showSelectedOnly:n=!1}=e,[s,r]=tu(),[l,i]=tc(),o=tp(l),{data:d}=nN(null!=o?o:null),c=(null==d?void 0:d.status)==="success"?d.previewUrl:null,[,u]=th(),[,m]=(0,no.A)(),p="bg-surface-primary data-[state=active]:bg-surface-raised data-[state=active]:text-interactive-active data-[state=inactive]:text-interactive-normal";return(0,y.jsx)(rc.Bc,{"data-sentry-element":"TooltipProvider","data-sentry-component":"WebDevCanvas","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsxs)("div",{className:(0,B.cn)("flex min-h-0 flex-col",t),children:[!a&&!n&&(0,y.jsx)("div",{className:"border-border h-12 flex-none",children:(0,y.jsx)(r5.tU,{value:l,onValueChange:e=>void i(e,"canvas"),children:(0,y.jsxs)(r5.j7,{className:"bg-surface-primary grid h-12 grid-cols-2 items-stretch rounded-b-none p-0",children:[(0,y.jsx)(lA,{position:"a",className:"rounded-tl-none"}),(0,y.jsx)(lA,{position:"b",className:"rounded-tr-none"})]})})}),!a&&n&&(0,y.jsx)("div",{className:"border-border h-12 flex-none",children:(0,y.jsx)("div",{className:"flex h-12 items-center px-3",children:(0,y.jsxs)("span",{className:"text-text-secondary text-sm",children:["Option ",null==l?void 0:l.toUpperCase()]})})}),(0,y.jsx)("div",{className:"border-border bg-surface-raised-alt flex-none",children:(0,y.jsxs)("div",{className:"flex h-12 items-center gap-2 px-2 py-1",children:[(0,y.jsx)(r5.tU,{value:s,onValueChange:e=>void r(e,"canvas"),"data-sentry-element":"Tabs","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsxs)(r5.j7,{className:"bg-surface-primary items-stretch","data-sentry-element":"TabsList","data-sentry-source-file":"webdev-canvas.tsx",children:[(0,y.jsx)(r5.Xi,{value:"preview","aria-label":"Preview",className:p,title:"Preview","data-sentry-element":"TabsTrigger","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)(aP.A,{className:"h-4 w-4","data-sentry-element":"Eye","data-sentry-source-file":"webdev-canvas.tsx"})}),(0,y.jsx)(r5.Xi,{value:"code","aria-label":"Code",className:p,title:"Code","data-sentry-element":"TabsTrigger","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)(sC.A,{className:"h-4 w-4","data-sentry-element":"Code","data-sentry-source-file":"webdev-canvas.tsx"})})]})}),(0,y.jsxs)("div",{className:"border-border-faint bg-surface-primary flex h-9 flex-1 items-center gap-2 rounded-md border px-2 py-1",children:[(0,y.jsxs)(rc.m_,{open:!!c&&void 0,"data-sentry-element":"Tooltip","data-sentry-source-file":"webdev-canvas.tsx",children:[(0,y.jsx)(rc.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)("span",{className:c?void 0:"cursor-not-allowed",children:(0,y.jsx)(E.$,{variant:"ghost",size:"icon",className:"size-6 shrink-0 p-0",disabled:!c,onClick:()=>{u(e=>e+1)},"data-sentry-element":"Button","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)(nr.A,{className:"size-3.5","data-sentry-element":"RefreshCw","data-sentry-source-file":"webdev-canvas.tsx"})})})}),(0,y.jsx)(rc.ZI,{"data-sentry-element":"TooltipContent","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)("p",{children:"Refresh preview"})})]}),(0,y.jsx)("input",{type:"text",value:null!=c?c:"",readOnly:!0,className:"text-text-secondary min-w-0 flex-1 bg-transparent font-mono text-sm focus:outline-none"}),(0,y.jsxs)(rc.m_,{open:!!c&&void 0,"data-sentry-element":"Tooltip","data-sentry-source-file":"webdev-canvas.tsx",children:[(0,y.jsx)(rc.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)("span",{className:c?void 0:"cursor-not-allowed",children:(0,y.jsx)(a8.i,{size:14,className:"size-6 shrink-0 p-0",variant:"ghost",disabled:!c,onClick:()=>m(null!=c?c:""),"data-sentry-element":"CopyButton","data-sentry-source-file":"webdev-canvas.tsx"})})}),(0,y.jsx)(rc.ZI,{"data-sentry-element":"TooltipContent","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)("p",{children:"Copy URL"})})]}),(0,y.jsxs)(rc.m_,{open:!!c&&void 0,"data-sentry-element":"Tooltip","data-sentry-source-file":"webdev-canvas.tsx",children:[(0,y.jsx)(rc.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)("span",{className:c?void 0:"cursor-not-allowed",children:(0,y.jsx)(E.$,{variant:"ghost",size:"icon",className:"size-6 shrink-0",disabled:!c,onClick:()=>{c&&window.open(c,"_blank","noopener,noreferrer")},"data-sentry-element":"Button","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)(r6.A,{className:"size-3.5","data-sentry-element":"ExternalLink","data-sentry-source-file":"webdev-canvas.tsx"})})})}),(0,y.jsx)(rc.ZI,{"data-sentry-element":"TooltipContent","data-sentry-source-file":"webdev-canvas.tsx",children:(0,y.jsx)("p",{children:"Open in new tab"})})]})]})]})}),(0,y.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,y.jsx)(lC,{"data-sentry-element":"WebDevArtifact","data-sentry-source-file":"webdev-canvas.tsx"})})]})})}function lA(e){let{position:t,className:a}=e,n=(0,ex.g)(e=>e.models),s=tp(t),r=nC(s),l=(0,U.g)(e=>e.pairwiseFeedbacks),i=s?ny(s,l):null,o=s?n.find(e=>e.id===s.modelId):null,d=null==o?void 0:o.organization;return(0,y.jsxs)(r5.Xi,{className:(0,B.cn)("text-header-primary data-[state=active]:bg-surface-raised-alt flex gap-2 rounded-b-none rounded-t-2xl data-[state=active]:shadow-[0_6px_4px_0_rgba(0,0,0,0.25)]",a),value:t,"data-sentry-element":"TabsTrigger","data-sentry-component":"WebDevTabTrigger","data-sentry-source-file":"webdev-canvas.tsx",children:["string"==typeof d&&(0,y.jsx)(eR.D,{organization:d,className:"size-4"}),s?tP(s,n,"Option"):null,r?(0,y.jsx)("span",{className:"h-2 w-2 rounded-full bg-red-500"}):null,"win"==i?(0,y.jsx)(nv.A,{className:"text-interactive-positive",size:16}):null]})}function l_(){let[e,t]=tf(),[a]=tc(),n=(0,U.g)(e=>e.mode);return(0,y.jsx)(a4._s,{open:e,onOpenChange:t,"data-sentry-element":"Drawer","data-sentry-component":"MobileWebDevDrawer","data-sentry-source-file":"mobile-webdev-drawer.tsx",children:(0,y.jsxs)(a4.zj,{className:"h-[95svh] max-h-[95svh]","data-sentry-element":"DrawerContent","data-sentry-source-file":"mobile-webdev-drawer.tsx",children:[(0,y.jsx)(a4.BE,{className:"p-0","data-sentry-element":"DrawerHeader","data-sentry-source-file":"mobile-webdev-drawer.tsx",children:(0,y.jsxs)(a4.gk,{className:"sr-only","data-sentry-element":"DrawerTitle","data-sentry-source-file":"mobile-webdev-drawer.tsx",children:["WebDev Preview - Option ",null==a?void 0:a.toUpperCase()]})}),(0,y.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,y.jsx)(lT,{className:"h-full",hideOptionTabs:n===b.lY.DIRECT,showSelectedOnly:n!==b.lY.DIRECT,"data-sentry-element":"WebDevCanvas","data-sentry-source-file":"mobile-webdev-drawer.tsx"})})]})})}function lk(e){let{messageA:t,messageB:a,firstMessageMap:n}=e,s=rE(t,a,n),r=(0,U.g)(e=>e.mode),l=(0,U.g)(e=>e.lastMessageIds),i=t&&a&&l.includes(t.id)&&l.includes(a.id)&&r!==b.lY.DIRECT;return(0,y.jsxs)("div",{className:"flex flex-col gap-2","data-sentry-component":"WebDevMessageGroup","data-sentry-source-file":"webdev-message-group.tsx",children:[(0,y.jsx)(rA,{messageA:t,messageB:a,selectedMessage:s,"data-sentry-element":"SideBySideOrStackedMessageGroup","data-sentry-source-file":"webdev-message-group.tsx"}),i&&(0,y.jsx)(lI,{messageA:t,messageB:a})]})}function lI(e){let{messageA:t,messageB:a}=e,{handleVote:n,createTieVoteHandlers:s}=nF(),r=(0,U.g)(e=>e.pairwiseFeedbacks),l=t?ny(t,r):null,i=nH(),o=t.status===b.nH.PENDING||a.status===b.nH.PENDING;if(null!==l||o)return null;let{handleTieMouseEnter:d,handleBothBadMouseEnter:c,handleMouseLeave:u}=s();return(0,y.jsxs)("div",{className:"flex flex-wrap items-center gap-2","data-sentry-component":"TieVoteButtons","data-sentry-source-file":"webdev-message-group.tsx",children:[(0,y.jsxs)(E.$,{size:"sm",variant:"outline",className:"hover:bg-interactive-positive/12 hover:text-interactive-positive hover:border-interactive-positive rounded-full px-2 py-1 text-xs",disabled:!i,onClick:()=>n(b.sb.TIE),onMouseEnter:d,onMouseLeave:u,"data-sentry-element":"Button","data-sentry-source-file":"webdev-message-group.tsx",children:[(0,y.jsx)(nx.A,{size:10,"data-sentry-element":"ThumbsUp","data-sentry-source-file":"webdev-message-group.tsx"}),"Both options are good"]}),(0,y.jsxs)(E.$,{size:"sm",variant:"outline",className:"hover:bg-interactive-negative/12 hover:text-interactive-negative hover:border-interactive-negative rounded-full px-2 py-1 text-xs",disabled:!i,onClick:()=>n(b.sb.BOTH_BAD),onMouseEnter:c,onMouseLeave:u,"data-sentry-element":"Button","data-sentry-source-file":"webdev-message-group.tsx",children:[(0,y.jsx)(nf.A,{size:10,"data-sentry-element":"ThumbsDown","data-sentry-source-file":"webdev-message-group.tsx"}),"Both options are bad"]})]})}function lR(e){let{evaluationFormProps:t,className:a}=e,{messageThreads:n}=tF(),{ref:s}=(0,nQ.Wx)({threshold:0,rootMargin:eY});return(0,y.jsxs)("div",{className:(0,B.cn)("flex min-h-0 flex-col",a),"data-sentry-component":"MobileChat","data-sentry-source-file":"mobile-chat.tsx",children:[(0,y.jsx)("div",{className:"flex-none",children:(0,y.jsx)(eB,{showLoginButton:!1,"data-sentry-element":"EvaluationHeader","data-sentry-source-file":"mobile-chat.tsx"})}),(0,y.jsx)("div",{className:"relative flex min-h-0 flex-1 flex-col",children:(0,y.jsxs)("div",{className:"absolute inset-0 flex flex-col",children:[(0,y.jsx)(sa,{className:"min-h-0 flex-1","data-sentry-element":"ScrollArea","data-sentry-source-file":"mobile-chat.tsx",children:(0,y.jsx)("div",{className:"relative h-full w-full overscroll-none",children:(0,y.jsx)("div",{className:(0,B.cn)("flex flex-col items-center","px-3 [--chat-padding:theme(spacing.3)]"),children:(0,y.jsxs)("ol",{className:(0,B.cn)("mt-4 flex w-full max-w-screen-xl grow flex-col-reverse justify-end gap-3 overscroll-none pb-2 duration-500"),children:[(0,y.jsx)("div",{className:"h-0",ref:e=>{s(e)}}),n.map((e,t)=>{var a,s;let r=e.get(tg.BQ.a),l=e.get(tg.BQ.b);if((null==r?void 0:r.role)===b.PG.USER)return(0,y.jsx)(nW,{message:r},null==r?void 0:r.id);let i="".concat(null!=(a=null==r?void 0:r.id)?a:"idx-".concat(t,"-a"),":").concat(null!=(s=null==l?void 0:l.id)?s:"idx-".concat(t,"-b"));return(0,y.jsx)(lk,{messageA:r,messageB:l,firstMessageMap:n[0]},i)})]})})})}),(0,y.jsx)("div",{className:"flex flex-col items-center px-3 pb-4",children:(0,y.jsx)("div",{className:"w-full max-w-screen-xl",children:(0,y.jsx)(rw,{...t,"data-sentry-element":"EvaluationForm","data-sentry-source-file":"mobile-chat.tsx"})})})]})}),(0,y.jsx)(l_,{"data-sentry-element":"MobileWebDevDrawer","data-sentry-source-file":"mobile-chat.tsx"})]})}function lS(e){let{evaluationFormProps:t,className:a}=e,{messageThreads:n,latestMessages:s}=tF(),{ref:r,inView:l}=(0,nQ.Wx)({threshold:0,rootMargin:eY});return rj({checkpointInView:l,lastMessagesArr:s}),(0,y.jsxs)("div",{className:(0,B.cn)("flex min-h-0 flex-col",a),"data-sentry-component":"SideChat","data-sentry-source-file":"side-chat.tsx",children:[(0,y.jsx)("div",{className:"flex-none",children:(0,y.jsx)(eB,{showLoginButton:!1,"data-sentry-element":"EvaluationHeader","data-sentry-source-file":"side-chat.tsx"})}),(0,y.jsx)("div",{className:"relative flex min-h-0 flex-1 flex-col",children:(0,y.jsxs)("div",{className:"absolute inset-0 flex flex-col",children:[(0,y.jsx)(sa,{className:"min-h-0 flex-1","data-sentry-element":"ScrollArea","data-sentry-source-file":"side-chat.tsx",children:(0,y.jsx)("div",{className:"relative h-full w-full overscroll-none",children:(0,y.jsx)("div",{className:(0,B.cn)("flex flex-col items-center","px-[--chat-padding] [--chat-padding:theme(spacing.4)]"),children:(0,y.jsxs)("ol",{className:(0,B.cn)("mt-8 flex w-full max-w-screen-xl grow flex-col-reverse justify-end gap-4 overscroll-none pb-2 duration-500"),children:[(0,y.jsx)("div",{className:"h-0",ref:e=>{r(e)}}),n.map((e,t)=>{var a,s;let r=e.get(tg.BQ.a),l=e.get(tg.BQ.b);if((null==r?void 0:r.role)===b.PG.USER)return(0,y.jsx)(nW,{message:r},null==r?void 0:r.id);let i="".concat(null!=(a=null==r?void 0:r.id)?a:"idx-".concat(t,"-a"),":").concat(null!=(s=null==l?void 0:l.id)?s:"idx-".concat(t,"-b"));return(0,y.jsx)(lk,{messageA:r,messageB:l,firstMessageMap:n[0]},i)})]})})})}),(0,y.jsx)("div",{className:"flex flex-col items-center px-4 pb-6",children:(0,y.jsx)("div",{className:"w-full md:max-w-screen-xl",children:(0,y.jsx)(rw,{...t,"data-sentry-element":"EvaluationForm","data-sentry-source-file":"side-chat.tsx"})})})]})})]})}function lD(e){let{evaluationFormProps:t}=e,a=(0,eJ.d)("md"),n=(0,U.g)(e=>e.mode);return(0,y.jsx)(to,{"data-sentry-element":"WebDevStateProvider","data-sentry-component":"WebDevArena","data-sentry-source-file":"webdev-arena.tsx",children:a?(0,y.jsx)(lR,{evaluationFormProps:t,className:"h-full"}):(0,y.jsxs)(r2,{direction:"horizontal",children:[(0,y.jsx)(r4,{defaultSize:30,minSize:25,maxSize:50,children:(0,y.jsx)(lS,{evaluationFormProps:t,className:"h-full"})}),(0,y.jsx)(r3,{className:"data-[resize-handle-state=drag]:w-[2px] data-[resize-handle-state=drag]:bg-[#BDD1FF]"}),(0,y.jsx)(r4,{defaultSize:70,minSize:50,maxSize:75,children:(0,y.jsx)(lT,{className:"h-full",hideOptionTabs:n===b.lY.DIRECT})})]})})}var lM=function(e){return e.WELCOME_SCREEN="welcome_screen",e.WEBDEV_MODE="webdev_mode",e.EVALUATION_CHAT="evaluation_chat",e.NEW_PAGE_PLACEHOLDER="new_page_placeholder",e.LOGGED_USER_PLACEHOLDER="logged_user_placeholder",e}(lM||{});function lL(){let e=(0,D.useRef)(null),t=(0,D.useRef)(null),a=(0,U.g)((0,H.k)(e=>({id:e.id,mode:e.mode,modality:e.modality,messagesLength:e.messages.length,loading:e.loading,hasViewedLatestResponses:e.hasViewedLatestResponses}))),s=(0,_.kH)(e=>e.user),r=(0,_.kH)(_.Q_),l=(0,F.usePathname)(),i=(0,D.useRef)(null),[o,d]=(0,D.useState)(!1),c=l.startsWith("/c/")&&"/c"!==l,u="/c/new"===l?"new_page_placeholder":c&&a.loading?"evaluation_chat":c||0!==a.messagesLength?a.modality===b.Jg.WEBDEV?"webdev_mode":"evaluation_chat":null==s||r?"welcome_screen":"evaluation_chat",{messageThreads:m,latestMessages:p}=tF(),{fileUploaderProps:x,isImageUploadEnabled:f,handlePaste:h}=function(e){let[t,a]=(0,I.fp)(nd),{show:s}=nu(),r=(0,U.g)(e=>e),{modelAId:l,modelBId:i,models:o}=(0,ex.g)(e=>e),d=(0,D.useMemo)(()=>eg(r.mode,l,i,o,r.modality),[r.mode,l,i,o,r.modality]),c=(0,D.useCallback)(e=>{a(t=>{var a;let n=[...t];return(null==(a=n[e])?void 0:a.preview)&&URL.revokeObjectURL(n[e].preview),n.splice(e,1),n})},[a]),u=(0,D.useMemo)(()=>{if(r.mode===n.BATTLE)return!0;for(let s of r.mode===n.DIRECT?[l]:[l,i]){var e,t,a;let n=o.find(e=>e.id===s),r=null!=(a=null==n||null==(t=n.capabilities)||null==(e=t.inputCapabilities)?void 0:e.image)&&a;if("object"==typeof r&&!1===r.multipleImages)return!1}return!0},[r.mode,l,i,o]),m=(0,D.useCallback)(n=>{let r=n.filter(e=>e.type.startsWith("image/"));if(r.length>0&&!d)return void console.warn("Selected model(s) do not support image input");if(!u&&t.length+r.length>1)return void M.oR.warning("Multiple images not supported",{description:"Selected model only supports single image upload"});if(t.length+r.length>10)return void s();let l=n.map(e=>({file:e,preview:e.type.startsWith("image/")?URL.createObjectURL(e):void 0}));a(e=>[...e,...l]),e&&setTimeout(()=>{e()},0)},[t.length,u,d,e,a,s]),p=(0,D.useCallback)(e=>{let t=e.clipboardData.items,a=[];for(let e of t)if(e.type.startsWith("image/")){let t=e.getAsFile();t&&a.push(t)}a.length>0&&(e.preventDefault(),m(a))},[m]);(0,D.useEffect)(()=>{!u&&t.length>1&&(a(t.slice(0,1)),M.oR.warning("Multiple images removed",{description:"Selected model only supports single image. Keeping first image only."}))},[t,u,a]);let x=(0,rY.A)(t);(0,D.useEffect)(()=>{var e;t.length>0&&(null!=(e=null==x?void 0:x.length)?e:0)===0&&0===r.messages.length&&r.setModality(b.Jg.IMAGE)},[t.length,null==x?void 0:x.length,r]);let f=function(e){let{onFilesSelected:t,attachments:a,onRemoveAttachment:n,isImageUploadEnabled:s=!0}=e,r=(0,D.useCallback)(e=>{if(e.length>0){if(!s)return void M.oR.error("Selected model(s) do not support image input",{dismissible:!0});t(e)}},[t,s]),{getRootProps:l,getInputProps:i,isDragActive:o}=(0,rG.VB)({onDrop:r,accept:rV,maxSize:0xf00000,noClick:!0,onDropRejected:rW});return{getRootProps:l,getInputProps:i,isDragActive:o,renderAttachments:()=>s&&0!==a.length?(0,y.jsx)("div",{className:"dark flex flex-wrap gap-2","data-sentry-component":"renderAttachments","data-sentry-source-file":"file-uploader.tsx",children:a.map((e,t)=>(0,y.jsxs)("div",{className:"group relative h-16 w-16 overflow-hidden rounded-lg",children:[e.preview?(0,y.jsx)("img",{src:e.preview,alt:e.file.name,className:(0,B.cn)("bg-surface-floating h-full w-full object-cover",{"opacity-10":e.error})}):(0,y.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-gray-100",children:(0,y.jsx)("span",{className:"text-xxs line-clamp-3 break-words p-1 text-center",children:e.file.name})}),e.error&&(0,y.jsxs)("div",{className:"bg-interactive-negative/20 border-interactive-negative text-interactive-negative absolute inset-0 flex flex-col items-center justify-center gap-1 rounded-lg border border-dashed",children:[(0,y.jsx)(tZ.A,{size:14}),(0,y.jsx)("span",{className:"text-[10px] font-normal",children:"Error"})]}),e.uploading&&!e.error&&(0,y.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:(0,y.jsx)(rF,{className:"text-interactive-active h-4 w-4 animate-spin"})}),(0,y.jsx)("div",{className:"absolute bottom-0 left-0 right-0 top-0 bg-black opacity-0 transition-opacity group-hover:opacity-50"}),(0,y.jsx)(E.$,{variant:"secondary",onClick:e=>{e.preventDefault(),n(t)},className:(0,B.cn)("border-border-medium bg-surface-floating absolute right-1 top-1 rounded-full border p-1 opacity-0 transition-opacity group-hover:opacity-100",{"opacity-100":a7.Fr}),"aria-label":"Remove file",children:(0,y.jsx)(ek.A,{size:10,className:"text-interactive-active"})})]},t))}):null}}({onFilesSelected:m,attachments:t,onRemoveAttachment:c,isImageUploadEnabled:d});return(0,D.useEffect)(()=>()=>{t.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)})},[t]),{handleRemoveAttachment:c,handleFilesSelected:m,handlePaste:p,fileUploaderProps:f,isImageUploadEnabled:d}}(()=>{var t;null==(t=e.current)||t.focus()}),{scrollContainerRef:g,scrollToBottom:v}=function(e){var t,a;let{hasViewedLatestResponses:n,checkpointRef:s,messagesLength:r=0,evaluationId:l}=e,i=(0,D.useRef)(null),[o,d]=(0,r$.A)(),c=(0,D.useRef)(!1),u=(0,D.useRef)(l),{y:m}=(0,rK.A)(i),p=(null!=(a=null==(t=i.current)?void 0:t.scrollHeight)?a:m)-m-d.height,x=(0,D.useCallback)(()=>{if(null==s?void 0:s.current)s.current.scrollIntoView({behavior:"smooth",block:"end"});else{var e;let t=null==(e=i.current)?void 0:e.querySelector("[data-radix-scroll-area-viewport]");t&&t.scrollTo({top:t.scrollHeight,behavior:"smooth"})}},[s]),f=(0,D.useCallback)(()=>{var e;let t=null==(e=i.current)?void 0:e.querySelector("[data-radix-scroll-area-viewport]");t&&t.scrollTo({top:t.scrollHeight+100,behavior:"instant"})},[]);return(0,D.useLayoutEffect)(()=>{u.current!==l&&(c.current=!1,u.current=l),0!==r&&!c.current&&(null==s?void 0:s.current)&&(f(),c.current=!0)},[r,s,f,l]),{scrollContainerRef:i,scrollViewportRef:o,scrollViewportDimensions:d,distanceFromBottom:p,showScrollDownButton:p>100&&!n,scrollToBottom:x}}({hasViewedLatestResponses:a.hasViewedLatestResponses,checkpointRef:i,messagesLength:a.messagesLength,evaluationId:a.id}),{sendMessage:w}=function(e){let{setIsSubmitting:t,messageThreads:a,textAreaRef:n,scrollToBottom:s}=e,r=(0,U.g)((0,H.k)(e=>({id:e.id,noMessages:0===e.messages.length,modality:e.modality,mode:e.mode,userId:e.userId}))),l=(0,_.kH)(e=>e.user),i=(0,ex.g)(e=>e),{setOpen:o,setPromiseHandlers:d}=P(),{appendMultiStream:c}=tk(),[u,m]=(0,I.fp)(nd),{setOpen:p}=(0,V.cL)(),x=(0,eJ.d)("md"),f=(0,D.useCallback)(async e=>await Promise.all(e.map(async(e,t)=>{if(e.isAlreadyUploaded&&e.uploadedUrl)return{key:e.file.name,url:e.uploadedUrl,mimeType:e.file.type};try{return m(e=>e.map((e,a)=>a===t?{...e,uploading:!0}:e)),await rq(e.file)}catch(e){throw m(e=>e.map((e,a)=>a===t?{...e,error:"Upload failed"}:e)),e}})),[m]);return{sendMessage:(0,D.useCallback)(async(e,h)=>{if(!e.trim()&&0===u.length)return;let g=async()=>{try{var l,o,d,g,v,y,w,j,N;t(!0),a7.Fr&&(null==(l=n.current)||l.blur());let E=u.length>0?await f(u):[],C=null!=(o=null==i?void 0:i.modelAId)?o:null,T=null!=(d=null==i?void 0:i.modelBId)?d:null,_=u.some(e=>!0===e.isAlreadyUploaded);if(A.z.capture({action:"chat_submit",params:{is_first_message:r.noMessages,mode:r.mode,user_id:r.userId,modality:r.modality,evaluation_session_id:r.id,model_a_id:C,model_b_id:T,has_attachments:E.length>0,attachments_count:E.length,input_length:e.length,has_edited_images:_}}),r.mode===b.lY.DIRECT?null==(v=window)||null==(g=v.gtag)||g.call(v,"event","conversion_event_chat_direct"):r.mode===b.lY.SIDE_BY_SIDE?null==(w=window)||null==(y=w.gtag)||y.call(w,"event","conversion_event_chat_sbs"):r.mode===b.lY.BATTLE&&(null==(N=window)||null==(j=N.gtag)||j.call(N,"event","conversion_event_chat_battle")),m([]),c({content:e,experimental_attachments:E.map(e=>({name:e.key,contentType:e.mimeType,url:e.url})),metadata:h},a),r.noMessages){let e=r.modality!==b.Jg.CHAT?"?chat-modality=".concat(r.modality):"";window.history.replaceState({},"","/c/".concat(r.id).concat(e)),document.cookie.split("; ").some(e=>e.startsWith("".concat(tg.pC.sidebarState,"=")))||x||p(!0)}s&&setTimeout(()=>{s()},100)}catch(e){console.error("Failed to send message:",e)}finally{t(!1)}};try{((null==l?void 0:l.touConsentTimestamp)==null||new Date(l.touConsentTimestamp)<eQ)&&await new Promise((e,t)=>{d({resolve:e,reject:t}),o(!0)}),await g()}catch(e){console.error("Failed to send message",e)}},[c,r,f,a,l,t,n,s,d,o,i,u,m,p,x])}}({setIsSubmitting:d,messageThreads:m,textAreaRef:e,scrollToBottom:v}),j=(0,D.useMemo)(()=>({sendMessage:w,latestMessages:p,isSubmitting:o,textAreaRef:e,handlePaste:h,fileUploaderProps:x,isImageUploadEnabled:f}),[w,o,e,h,x,p,f]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{id:eW,className:"relative flex h-full flex-col overflow-hidden overscroll-none",children:["webdev_mode"!==u&&(0,y.jsx)(eB,{}),(0,y.jsx)("div",{className:"flex min-h-0 flex-1 justify-center overflow-hidden overscroll-none",children:(0,y.jsxs)("main",{className:(0,B.cn)("relative flex h-full min-w-0 flex-1 flex-col overflow-hidden overscroll-none outline-none","welcome_screen"===u&&"items-center justify-center"),...x.getRootProps(),children:[(0,y.jsx)(rZ,{"data-sentry-element":"MobileLoginCta","data-sentry-source-file":"evaluation.tsx"}),(()=>{switch(u){case"welcome_screen":return(0,y.jsx)(rX,{evaluationFormProps:j,textAreaRef:e,fileInputRef:t});case"webdev_mode":return(0,y.jsx)(lD,{evaluationFormProps:j});case"evaluation_chat":case"logged_user_placeholder":default:return(0,y.jsx)(rB,{evaluationFormProps:j,textAreaRef:e,fileInputRef:t,scrollableAreaRef:g,checkpointElementRef:i,messageThreads:m,latestMessages:p});case"new_page_placeholder":return(0,y.jsx)(rB,{evaluationFormProps:j,textAreaRef:e,fileInputRef:t,scrollableAreaRef:g,checkpointElementRef:i,messageThreads:null,latestMessages:null})}})()]})})]}),(0,y.jsx)(eV,{"data-sentry-element":"ChangeModalityModal","data-sentry-source-file":"evaluation.tsx"}),(0,y.jsx)(z,{"data-sentry-element":"TermsOfUseModal","data-sentry-source-file":"evaluation.tsx"})]})}},47470:(e,t,a)=>{"use strict";var n=Object.create?function(e,t,a,n){void 0===n&&(n=a);var s=Object.getOwnPropertyDescriptor(t,a);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,s)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]},s=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},r=function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[t.length]=a);return t})(t)};return function(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var r=e(t),l=0;l<r.length;l++)"default"!==r[l]&&n(a,t,r[l]);return s(a,t),a}}();t.EV=void 0;r(a(15359)),r(a(34963));t.EV="recaptcha validation failed"},56880:(e,t,a)=>{"use strict";a.d(t,{i:()=>d});var n=a(68208),s=a(35388),r=a(71341),l=a(71035),i=a(66696),o=a(41517);let d=e=>{let{onClick:t,className:a,size:d=18,...c}=e,{copyState:u,handleClick:m}=(()=>{let[e,t]=(0,s.useState)("idle"),a=(0,s.useRef)(null),n=(0,s.useRef)(null);return{copyState:e,handleClick:()=>{null!=a.current&&clearTimeout(a.current),null!=n.current&&clearTimeout(n.current),t("copied"),a.current=setTimeout(()=>{t("resetting"),n.current=setTimeout(()=>{t("idle")},300)},2e3)}}})();return(0,n.jsxs)(o.$,{variant:"outline",className:(0,r.cn)("relative rounded-lg p-[6px]",a),onClick:e=>{null==t||t(e),m()},...c,"data-sentry-element":"Button","data-sentry-component":"CopyButton","data-sentry-source-file":"copy-button.tsx",children:[(0,n.jsx)(l.A,{size:d,className:(0,r.cn)("text-interactive-positive absolute left-1.5 top-1.5 rotate-90 opacity-0 transition-all duration-300",{"rotate-0 opacity-100":"copied"===u,"rotate-0 opacity-0":"resetting"===u}),"data-sentry-element":"Check","data-sentry-source-file":"copy-button.tsx"}),(0,n.jsx)(i.A,{size:d,className:(0,r.cn)("opacity-100 transition-opacity duration-300",{"opacity-0":"copied"===u}),"data-sentry-element":"Copy","data-sentry-source-file":"copy-button.tsx"})]})}},58466:(e,t,a)=>{"use strict";a.d(t,{HV:()=>c,lJ:()=>u});var n=a(68208),s=a(50164);let r={width:0,height:0,userAgent:{isBot:!1,ua:"",browser:{name:"",version:"",major:""},device:{model:"",type:"",vendor:""},engine:{name:"",version:""},os:{name:"",version:""},cpu:{architecture:""}}},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return(0,s.y)()(t=>({...e,initialize:e=>t({userAgent:e}),setWidth:e=>t({width:e}),setHeight:e=>t({height:e})}))};var i=a(35388),o=a(25228);let d=(0,i.createContext)(void 0),c=e=>{let{children:t,userAgent:a}=e,[s]=(0,i.useState)(l({userAgent:a,width:window.innerWidth,height:window.innerHeight}));return(0,i.useEffect)(()=>{let e=()=>{s.setState({width:window.innerWidth}),s.setState({height:window.innerHeight})};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[s]),(0,n.jsx)(d.Provider,{value:s,"data-sentry-element":"unknown","data-sentry-component":"DeviceStoreProvider","data-sentry-source-file":"device-store-provider.tsx",children:t})},u=e=>{let t=(0,i.useContext)(d);if(!t)throw Error("useDeviceStore must be used within DeviceStoreProvider");return(0,o.P)(t,e)}},63252:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var n=a(68208),s=a(71341),r=a(33468),l=a(35388),i=a(37705),o=a(52370),d=a(11980),c=a(83502),u=a(99857);a(3536);var m=a(38490);let p=e=>{let{children:t,className:a,...r}=e;return(0,n.jsx)("div",{className:"overflow-x-auto","data-sentry-component":"TableComponent","data-sentry-source-file":"table.tsx",children:(0,n.jsx)("table",{...r,className:(0,s.cn)("min-w-full",a),children:t})})},x=e=>{let{children:t,className:a,...r}=e;return(0,n.jsx)("th",{...r,className:(0,s.cn)("whitespace-nowrap px-3 py-2",a),"data-sentry-component":"TableHeaderComponent","data-sentry-source-file":"table.tsx",children:t})},f=e=>{let{children:t,className:a,...r}=e;return(0,n.jsx)("td",{...r,className:(0,s.cn)("px-3 py-2",a),"data-sentry-component":"TableCellComponent","data-sentry-source-file":"table.tsx",children:t})},h=(0,l.memo)(e=>{let{content:t,id:a,className:i}=e,o=(0,l.useMemo)(()=>r.xI.lexer(t).map(e=>e.raw),[t]);return(0,n.jsx)("div",{className:(0,s.cn)("prose prose-sm prose-pre:bg-transparent prose-pre:p-0 text-wrap break-words",i),children:o.map((e,t)=>(0,n.jsx)(g,{content:e},"".concat(a,"-block_").concat(t)))})});h.displayName="MemoizedMarkdown";let g=(0,l.memo)(e=>{let{content:t}=e;return(0,n.jsx)(i.oz,{remarkPlugins:[d.A,c.A,[u.A,{singleDollarTextMath:!0}]],rehypePlugins:[[o.A,{displayMode:!0,throwOnError:!1,errorColor:"#cc0000"}]],components:{code:m.Hd,table:p,th:x,td:f},children:t})},(e,t)=>e.content===t.content);g.displayName="MemoizedMarkdownBlock"},66107:()=>{},67551:(e,t,a)=>{Promise.resolve().then(a.bind(a,47423))},70641:(e,t,a)=>{"use strict";a.d(t,{bq:()=>p,eb:()=>g,gC:()=>h,l6:()=>c,s3:()=>u,yv:()=>m});var n=a(68208),s=a(6917),r=a(71341),l=a(97919),i=a(3574),o=a(71035),d=a(35388);let c=s.bL,u=s.YJ,m=s.WT,p=d.forwardRef((e,t)=>{let{className:a,children:i,...o}=e;return(0,n.jsxs)(s.l9,{ref:t,className:(0,r.cn)("border-border text-header-secondary hover:text-header-primary data-[state=open]:text-text-tertiary ring-offset-background placeholder:text-muted-foreground focus:ring-ring group flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border px-3 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:block [&>span]:truncate",a),...o,children:[i,(0,n.jsx)(s.In,{asChild:!0,children:(0,n.jsx)(l.A,{className:"h-[18px] w-[18px] transition-transform duration-200 group-data-[state=open]:-rotate-180"})})]})});p.displayName=s.l9.displayName;let x=d.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(s.PP,{ref:t,className:(0,r.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,n.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=s.PP.displayName;let f=d.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,n.jsx)(s.wn,{ref:t,className:(0,r.cn)("flex cursor-default items-center justify-center py-1",a),...i,children:(0,n.jsx)(l.A,{className:"h-4 w-4"})})});f.displayName=s.wn.displayName;let h=d.forwardRef((e,t)=>{let{className:a,children:l,position:i="popper",...o}=e;return(0,n.jsx)(s.ZL,{children:(0,n.jsxs)(s.UC,{ref:t,className:(0,r.cn)("border-border-faint bg-surface-primary text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-[9999] max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-0",a),position:i,...o,children:[(0,n.jsx)(x,{}),(0,n.jsx)(s.LM,{className:(0,r.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,n.jsx)(f,{})]})})});h.displayName=s.UC.displayName,d.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(s.JU,{ref:t,className:(0,r.cn)("px-2 py-1.5 text-sm font-semibold",a),...l})}).displayName=s.JU.displayName;let g=d.forwardRef((e,t)=>{let{className:a,children:l,showCheck:i=!0,...d}=e;return(0,n.jsxs)(s.q7,{ref:t,className:(0,r.cn)("hover:bg-surface-highlight focus:bg-surface-highlight data-[state=checked]:text-text-tertiary relative flex w-full cursor-default select-none items-center rounded-sm p-2 text-sm font-medium outline-none transition-colors duration-200 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...d,children:[(0,n.jsx)(s.p4,{children:l}),i&&(0,n.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(s.VF,{children:(0,n.jsx)(o.A,{className:"size-4"})})})]})});g.displayName=s.q7.displayName,d.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(s.wv,{ref:t,className:(0,r.cn)("bg-muted -mx-1 my-1 h-px",a),...l})}).displayName=s.wv.displayName},76518:e=>{e.exports={container:"code-block_container__lbMX4"}},87135:(e,t,a)=>{"use strict";a.d(t,{FO:()=>r,Yq:()=>n,ZV:()=>s});let n=e=>{if(isNaN(e.getTime()))return"N/A";let t=new Date;return e>t?(console.warn("Future date detected: ".concat(e,", using today's date instead")),t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}).replace(/(\w+) (\d+), (\d+)/,"$1 $2, $3")):e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}).replace(/(\w+) (\d+), (\d+)/,"$1 $2, $3")},s=e=>null==e?"0":e.toLocaleString("en-US"),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e)return null;let a=("string"==typeof e?new Date(e):e).getTime()-t.getTime();if(a<=0)return null;let n=Math.ceil(a/1e3),s=Math.ceil(a/6e4),r=Math.ceil(a/36e5);return n<60?"".concat(n," second").concat(1===n?"":"s"):s<60?"".concat(s," minute").concat(1===s?"":"s"):"".concat(r," hour").concat(1===r?"":"s")}},91508:(e,t,a)=>{"use strict";a.d(t,{Lt:()=>u,pY:()=>p,wY:()=>m});var n=a(22629),s=a(65938),r=a(71341);let l=null,i=null,o=["javascript","typescript","ts","tsx","jsx","json","jsonc","html","css","python","bash","shell","markdown","yaml","sql","java","cpp","c","go","rust","php","ruby","swift","text","plaintext"],d=["github-light","github-dark"];async function c(){return l||i||(i=(0,s.O_)({themes:d,langs:o}),l=await i)}function u(){c()}async function m(e,t,a){let n=await c(),s=o.includes(t)?t:"plaintext";return n.codeToHtml(e,{lang:s,theme:a,transformers:[{pre(e){this.addClassToHast(e,"shiki-code-block")},code(e){e.properties.class=(0,r.cn)("whitespace-pre-wrap break-words")}}]})}async function p(e,t,a,s){let r=await c(),l=o.includes(t)?t:"plaintext",i=e,d=e.split("\n");return"create"===s?i=d.map(e=>"+".concat(e)).join("\n"):"delete"===s?i=d.map(e=>"-".concat(e)).join("\n"):/^[+-]/m.test(e)||(i=d.map(e=>"+".concat(e)).join("\n")),r.codeToHtml(i,{lang:l,theme:a,transformers:[(0,n.N6)(),{name:"diff-transformer",preprocess(e){return this.meta={originalLines:e.split("\n")},e},pre(e){this.addClassToHast(e,"shiki-code-block"),this.addClassToHast(e,"has-diff")},line(e,t){var a,n,s;let r=null!=(s=(null!=(n=null==(a=this.meta)?void 0:a.originalLines)?n:[])[t-1])?s:"";r.startsWith("+")?(this.addClassToHast(e,"line"),this.addClassToHast(e,"diff"),this.addClassToHast(e,"add")):r.startsWith("-")?(this.addClassToHast(e,"line"),this.addClassToHast(e,"diff"),this.addClassToHast(e,"remove")):r.startsWith(" ")&&(this.addClassToHast(e,"line"),this.addClassToHast(e,"diff"))},span(e,t,a){var n,s,r;let l=null!=(r=(null!=(s=null==(n=this.meta)?void 0:n.originalLines)?s:[])[t-1])?r:"";if(0===a&&(l.startsWith("+")||l.startsWith("-")||l.startsWith(" "))){let t=e=>{if(!e)return!1;if("text"===e.type&&e.value){let t=e.value;if(t.length>0&&(t.startsWith("+")||t.startsWith("-")||t.startsWith(" ")))return e.value=t.slice(1),!0}if(e.children&&Array.isArray(e.children)){for(let a of e.children)if(t(a))return!0}return!1};t(e)}}}]})}}}]);